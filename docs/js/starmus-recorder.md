# starmus-recorder.js

**Source:** `src/js/starmus-recorder.js`

---

## Members

<dl>
<dt><a href="#sharedAudioContext">sharedAudioContext</a></dt>
<dd><p>Shared AudioContext Singleton.
Prevents &quot;dual-context&quot; freezes on Android and prevents iOS limits on active contexts.</p>
</dd>
</dl>

## Functions

<dl>
<dt><a href="#getSharedContext">getSharedContext()</a> ⇒ <code>AudioContext</code></dt>
<dd><p>Get or create the shared AudioContext instance.</p>
</dd>
<dt><a href="#calibrateAudioLevels">calibrateAudioLevels(stream, onUpdate)</a> ⇒ <code>Promise.&lt;object&gt;</code></dt>
<dd><p>Analyze audio stream to determine optimal gain adjustment.
Uses 3-phase calibration: quiet → speech → quiet</p>
</dd>
<dt><a href="#getOptimalAudioSettings">getOptimalAudioSettings()</a></dt>
<dd><p>Determine optimal audio recording settings based on environment.</p>
</dd>
<dt><a href="#setupAudioGraph">setupAudioGraph(rawStream)</a> ⇒ <code>object</code></dt>
<dd><p>Builds the Web Audio API graph.
Source -&gt; HighPass (85Hz) -&gt; Compressor -&gt; Destination</p>
</dd>
<dt><a href="#initRecorder">initRecorder()</a></dt>
<dd><p>Wires microphone + file logic for a specific instance.</p>
</dd>
</dl>

<a name="sharedAudioContext"></a>

## sharedAudioContext
Shared AudioContext Singleton.
Prevents "dual-context" freezes on Android and prevents iOS limits on active contexts.

**Kind**: global variable  
<a name="getSharedContext"></a>

## getSharedContext() ⇒ <code>AudioContext</code>
Get or create the shared AudioContext instance.

**Kind**: global function  
**Returns**: <code>AudioContext</code> - Shared audio context  
<a name="calibrateAudioLevels"></a>

## calibrateAudioLevels(stream, onUpdate) ⇒ <code>Promise.&lt;object&gt;</code>
Analyze audio stream to determine optimal gain adjustment.
Uses 3-phase calibration: quiet → speech → quiet

**Kind**: global function  
**Returns**: <code>Promise.&lt;object&gt;</code> - Calibration data  

| Param | Type | Description |
| --- | --- | --- |
| stream | <code>MediaStream</code> | The audio stream from getUserMedia |
| onUpdate | <code>function</code> | Callback for UI updates (message, volumePercent, isDone) |

<a name="getOptimalAudioSettings"></a>

## getOptimalAudioSettings()
Determine optimal audio recording settings based on environment.

**Kind**: global function  
<a name="setupAudioGraph"></a>

## setupAudioGraph(rawStream) ⇒ <code>object</code>
Builds the Web Audio API graph.
Source -> HighPass (85Hz) -> Compressor -> Destination

**Kind**: global function  
**Returns**: <code>object</code> - { audioContext, destinationStream, nodes[] }  

| Param | Type |
| --- | --- |
| rawStream | <code>MediaStream</code> | 

<a name="initRecorder"></a>

## initRecorder()
Wires microphone + file logic for a specific instance.

**Kind**: global function  


---

_Generated by Starisian JS Documentation Generator_
