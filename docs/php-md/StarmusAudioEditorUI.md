# StarmusAudioEditorUI

**Namespace:** `Starisian\Sparxstar\Starmus\frontend`

**File:** `/workspaces/starmus-audio-recorder/src/frontend/StarmusAudioEditorUI.php`

## Description

Starmus Audio Editor UI - Refactored for Security & Performance
@package Starisian\Sparxstar\Starmus\frontend
@version 0.8.5
@since 0.3.1

## Methods

### `__construct()`

**Visibility:** `public`

Starmus Audio Editor UI - Refactored for Security & Performance
@package Starisian\Sparxstar\Starmus\frontend
@version 0.8.5
@since 0.3.1
/
namespace Starisian\Sparxstar\Starmus\frontend;

use Exception;

use function file_exists;
use function is_numeric;
use function json_decode;

use const JSON_ERROR_NONE;

use function json_last_error;
use function json_last_error_msg;
use function realpath;

use Starisian\Sparxstar\Starmus\helpers\StarmusLogger;
use Starisian\Sparxstar\Starmus\helpers\StarmusTemplateLoaderHelper;

use function str_replace;

use Throwable;

use function usort;

use WP_Error;
use WP_REST_Request;
use WP_REST_Response;

if (! \defined('ABSPATH')) {
    exit;
}

class StarmusAudioEditorUI
{
    /**
REST namespace for editor endpoints (must match other handlers)
/
    public const STARMUS_REST_NAMESPACE = 'star_uec/v1';

    /**
REST namespace consumed by the editor for annotation endpoints.
Use StarmusSubmissionHandler::STARMUS_REST_NAMESPACE directly where needed.
/

    /**
Upper bound for stored annotations to avoid overloading requests.
/
    public const STARMUS_MAX_ANNOTATIONS = 1000;

    /**
Time-based throttle applied when saving annotations.
/
    public const STARMUS_RATE_LIMIT_SECONDS = 2;

    /**
Cached rendering context shared between hooks during a request.
/
    private ?array $cached_context = null;

    /**
Bootstrap the editor by registering its WordPress hooks.

### `register_hooks()`

**Visibility:** `public`

Register shortcode, assets, and REST route hooks.

### `render_audio_editor_shortcode()`

**Visibility:** `public`

Render the audio editor shortcode.
@param array $atts Shortcode attributes.
@return string Rendered HTML output.

### `enqueue_scripts()`

**Visibility:** `public`

Conditionally enqueue front-end assets required by the editor.

### `register_rest_endpoint()`

**Visibility:** `public`

Register REST endpoints used by the editor for annotation persistence.

### `validate_post_id()`

**Visibility:** `public`

Validate incoming post ID arguments for REST requests.
@param mixed $value Raw value supplied to the REST endpoint.
@return bool True when the value is a valid post identifier.

### `sanitize_annotations()`

**Visibility:** `public`

Sanitize incoming annotations payloads from REST requests.
@param mixed $value Raw annotations payload.
@return array Normalized annotations array.

### `validate_annotations()`

**Visibility:** `public`

Validate that annotations array obeys structural constraints.
@param mixed $value Annotations payload to validate.
@return bool True when annotations are acceptable.

### `can_save_annotations()`

**Visibility:** `public`

Determine whether the current request is authorized to save annotations.
@param WP_REST_Request $request REST request context.
@return bool True when the user can persist annotations.

### `handle_save_annotations()`

**Visibility:** `public`

Persist sanitized annotations for a recording.
@param WP_REST_Request $request REST request containing annotations.
@return WP_REST_Response Success response with saved annotations.

### `get_editor_context_public()`

**Visibility:** `public`

Public wrapper for get_editor_context to allow external access.
@param array $atts Shortcode attributes.
@return array|WP_Error Context array or WP_Error on failure.

## Properties

---

_Generated by Starisian Documentation Generator_
