# to

**Namespace:** `Starisian\Sparxstar\Starmus\includes`

**File:** `/workspaces/starmus-audio-recorder/src/includes/StarmusTusdHookHandler.php`

## Description

PSR-4 compliant class to handle webhooks from a tusd server.
This class is responsible for receiving and validating tusd webhook calls
and then passing the data to the appropriate handler for processing.
@package   Starisian\Sparxstar\Starmus\includes
@version   1.0.0

## Methods

### `__construct()`

**Visibility:** `public`

PSR-4 compliant class to handle webhooks from a tusd server.
This class is responsible for receiving and validating tusd webhook calls
and then passing the data to the appropriate handler for processing.
@package   Starisian\Sparxstar\Starmus\includes
@version   1.0.0
/
namespace Starisian\Sparxstar\Starmus\includes;

// Exit if accessed directly.
if (! \defined('ABSPATH')) {
    exit;
}

// Import dependencies from the same namespace and WordPress core.
use Starisian\Sparxstar\Starmus\helpers\StarmusLogger;
use WP_Error;
use WP_REST_Request;
use WP_REST_Response;
use WP_REST_Server;

/**
StarmusTusdHookHandler Class
This class is solely responsible for the REST API endpoint that listens for tusd webhooks.
It validates the request and delegates the payload to a dedicated submission handler.
/
class StarmusTusdHookHandler
{
    protected string $namespace = 'starmus/v1';

    protected string $rest_base = 'hook';

    /**
Constructor. Injects the submission handler dependency.
@param StarmusSubmissionHandler $submission_handler An instance of the class that processes uploads.

### `register_hooks()`

**Visibility:** `public`

A dedicated handler for processing the submission data.
/
        private readonly StarmusSubmissionHandler $submission_handler
    ) {
    }

    /**
Registers the WordPress hooks. This is the entry point for the class.

### `register_routes()`

**Visibility:** `public`

Registers the custom REST API route for the tusd webhook.

### `handle_tusd_hook()`

**Visibility:** `public`

Primary callback for the REST route. It receives the webhook request.
@param WP_REST_Request $request The incoming REST request object.
@return WP_REST_Response|WP_Error A success response or an error object.

### `permissions_check()`

**Visibility:** `public`

Permission check for the REST API endpoint. Hardened for production.
@param WP_REST_Request $request The incoming REST request object.
@return bool|WP_Error True if the request is permitted, otherwise a WP_Error.

---

_Generated by Starisian Documentation Generator_
