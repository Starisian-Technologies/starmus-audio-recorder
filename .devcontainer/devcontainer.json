{
  "name": "AiWA Starmus Workflow Manager - PHP 8.3",
  "image": "mcr.microsoft.com/devcontainers/php:8.3-bookworm",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "version": "latest",
      "moby": true
    }
  },
  "containerEnv": {
    "PHP_MEMORY_LIMIT": "1G",
    "XDEBUG_MODE": "off"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "bmewburn.vscode-intelephense-client",
        "junstyle.php-cs-fixer",
        "neilbrayfield.php-docblocker",
        "mikestead.dotenv",
        "ms-azuretools.vscode-docker"
      ],
      "settings": {
        "php.validate.executablePath": "/usr/local/bin/php",
        "php.suggest.basic": false,
        "intelephense.environment.phpVersion": "8.3.0",
        "intelephense.stubs": [
          "wordpress",
          "woocommerce",
          "acf-pro",
          "wordpress-globals",
          "wp-cli",
          "genesis",
          "polylang"
        ],
        "phpcs.enable": true,
        "phpcs.standard": "WordPress-VIP-Go",
        "editor.formatOnSave": true,
        "[php]": {
          "editor.defaultFormatter": "bmewburn.vscode-intelephense-client",
          "editor.formatOnSave": true
        }
      }
    }
  },
  "forwardPorts": [
    8080,
    9003
  ],
  "remoteUser": "vscode",
  "postCreateCommand": "sudo chmod a+x \"$(pwd)\" && sudo rm -rf /var/www/html && sudo ln -s \"$(pwd)\" /var/www/html; echo 'memory_limit = 1G' | sudo tee /usr/local/etc/php/conf.d/memory-limit.ini && echo 'xdebug.mode = off' | sudo tee /usr/local/etc/php/conf.d/xdebug-off.ini; if [ -f composer.json ]; then composer install; fi"
}