<?xml version="1.0"?>
<ruleset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         name="SPARXSTAR Sky - Default Ruleset"
         xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/PHPCSStandards/PHP_CodeSniffer/master/phpcs.xsd">

  <description>
    Default strict coding standards for SPARXSTAR Sky.
    Enforces WordPress VIP, PHP compatibility, modern PHP usage, naming conventions, and documentation.
    This file is intended as the baseline for CI and contributors.
    To override locally, create a `phpcs.xml` file (gitignored).
  </description>

  <!-- Scan plugin source -->
  <file>starmus-audio-recorder.php</file>
  <file>uninstall.php</file>
  <file>src/</file>
  
  <!-- Exclude patterns -->
  <exclude-pattern>vendor/*</exclude-pattern>
  <exclude-pattern>node_modules/*</exclude-pattern>
  <exclude-pattern>*.min.js</exclude-pattern>
  <exclude-pattern>tests/*</exclude-pattern>
  <exclude-pattern>wp-admin/*</exclude-pattern>
  <exclude-pattern>wp-content/*</exclude-pattern>
  <exclude-pattern>wordpress-installer/*</exclude-pattern>

  <!-- PHPCS runtime args -->
  <arg value="sp"/>
  <arg name="colors"/>
  <arg name="extensions" value="php"/>
  <arg name="parallel" value="8"/>
  <arg name="basepath" value="./"/>

  <!-- Installed standards -->
  <config name="installed_paths" value="vendor/wp-coding-standards/wpcs,vendor/automattic/vipwpcs,vendor/phpcompatibility/php-compatibility,vendor/phpcompatibility/phpcompatibility-wp,vendor/phpcompatibility/phpcompatibility-paragonie,vendor/phpcsstandards/phpcsextra,vendor/phpcsstandards/phpcsutils,vendor/sirbrillig/phpcs-variable-analysis"/>

  <!-- Target PHP version -->
  <config name="testVersion" value="8.2-"/>

  <!-- Core standards -->
  <rule ref="WordPress-Core"/>
  <rule ref="WordPress-Extra"/>
  <rule ref="WordPress-Docs"/>
  <rule ref="WordPressVIPMinimum"/>

  <!-- Modernization and compatibility -->
  <rule ref="PHPCompatibility"/>
  <rule ref="PHPCompatibilityWP"/>
  <rule ref="PHPCompatibilityParagonieRandomCompat"/>
  <rule ref="PHPCompatibilityParagonieSodiumCompat"/>
  <rule ref="Modernize"/>
  <rule ref="Universal"/>
  <rule ref="VariableAnalysis"/>

  <!-- Naming conventions -->
  <rule ref="WordPress.NamingConventions.PrefixAllGlobals">
    <properties>
      <property name="prefixes" type="array">
        <element value="sparxstar"/>
        <element value="star"/>
      </property>
    </properties>
  </rule>

  <!-- Text domain enforcement -->
  <rule ref="WordPress.WP.I18n">
    <properties>
      <property name="text_domain" type="array">
        <element value="starmus-audio-recorder"/>
      </property>
    </properties>
  </rule>
</ruleset>
