<?php\n/**\n * getID3 Implementation Comparison\n * Official Documentation vs Starmus Audio Recorder\n */\n\n// ===== OFFICIAL GETID3 BASIC USAGE =====\n\n// Basic analysis\n$getID3 = new getID3;\n$ThisFileInfo = $getID3->analyze($filename);\ngetid3_lib::CopyTagsToComments($ThisFileInfo);\n\n// Basic tag writing\n$tagwriter = new getid3_writetags;\n$tagwriter->filename = '/path/to/file.mp3';\n$tagwriter->tagformats = array('id3v1', 'id3v2.3');\n$tagwriter->overwrite_tags = true;\n$tagwriter->tag_encoding = 'UTF-8';\n$tagwriter->tag_data = $TagData;\n$tagwriter->WriteTags();\n\n// ===== STARMUS ENHANCED IMPLEMENTATION =====\n\nclass StarmusId3Service {\n    private const TEXT_ENCODING = 'UTF-8';\n    \n    // Enhanced initialization with fallback loading\n    private function getID3Engine(): ?\\getID3 {\n        if (!class_exists('getID3')) {\n            // Fallback loading from vendor path\n            $possible_path = WP_CONTENT_DIR . '/plugins/starmus-audio-recorder/vendor/autoload.php';\n            if (file_exists($possible_path)) {\n                require_once $possible_path;\n            }\n        }\n        \n        if (!class_exists('getID3')) {\n            StarmusLogger::error('StarmusId3Service', 'getID3 library class not found.');\n            return null;\n        }\n        \n        $getID3 = new \\getID3();\n        $getID3->setOption(array('encoding' => self::TEXT_ENCODING));\n        return $getID3;\n    }\n    \n    // Enhanced tag writing with comprehensive error handling\n    public function writeTags(string $filepath, array $tagData): bool {\n        if (!file_exists($filepath)) {\n            StarmusLogger::error('StarmusId3Service', 'File missing for tagging', array('file' => $filepath));\n            return false;\n        }\n        \n        try {\n            $engine = $this->getID3Engine();\n            if (!$engine instanceof \\getID3) {\n                return false;\n            }\n            \n            if (!class_exists('getid3_writetags')) {\n                StarmusLogger::error('StarmusId3Service', 'getid3_writetags class missing.');\n                return false;\n            }\n            \n            $tagwriter = new \\getid3_writetags();\n            $tagwriter->filename = $filepath;\n            $tagwriter->tagformats = array('id3v2.3');  // Standardized format\n            $tagwriter->overwrite_tags = true;\n            $tagwriter->tag_encoding = self::TEXT_ENCODING;\n            $tagwriter->remove_other_tags = true;  // Clean slate approach\n            $tagwriter->tag_data = $tagData;\n            \n            if (!$tagwriter->WriteTags()) {\n                StarmusLogger::error('StarmusId3Service', 'WriteTags Failed', array('errors' => $tagwriter->errors));\n                return false;\n            }\n            \n            if ($tagwriter->warnings !== array()) {\n                StarmusLogger::warning('StarmusId3Service', 'WriteTags Warnings', array('warnings' => $tagwriter->warnings));\n            }\n            \n            return true;\n        } catch (\\Throwable $throwable) {\n            StarmusLogger::error('StarmusId3Service', 'Exception', array('msg' => $throwable->getMessage()));\n            return false;\n        }\n    }\n    \n    // Enhanced file analysis with error handling\n    public function analyzeFile(string $filepath): array {\n        $engine = $this->getID3Engine();\n        if (!$engine instanceof \\getID3) {\n            return array();\n        }\n        \n        $info = $engine->analyze($filepath);\n        \\getid3_lib::CopyTagsToComments($info);\n        return $info;\n    }\n}\n\n// ===== KEY DIFFERENCES =====\n\n/**\n * 1. LIBRARY LOADING\n * Official: Assumes getID3 is already loaded\n * Starmus: Automatic fallback loading with Composer integration\n */\n\n/**\n * 2. ERROR HANDLING\n * Official: Basic error checking\n * Starmus: Comprehensive logging with StarmusLogger integration\n */\n\n/**\n * 3. TAG FORMAT STANDARDIZATION\n * Official: Multiple formats (id3v1, id3v2.3)\n * Starmus: Standardized on ID3v2.3 for consistency\n */\n\n/**\n * 4. ENCODING CONSISTENCY\n * Official: Manual encoding setup\n * Starmus: Enforced UTF-8 encoding constant\n */\n\n/**\n * 5. WORDPRESS INTEGRATION\n * Official: Generic PHP implementation\n * Starmus: WordPress-specific paths and logging\n */\n\n/**\n * 6. PRODUCTION READINESS\n * Official: Basic examples for learning\n * Starmus: Production-ready with exception handling and validation\n */\n\n?>