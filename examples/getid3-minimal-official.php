<?php\n/**\n * Minimal getID3 Implementation\n * Based on official getID3 documentation by James Heinrich\n */\n\nrequire_once 'vendor/autoload.php'; // or: composer require james-heinrich/getid3\n\n// ===== BASIC USAGE (Official Example) =====\n\n// Initialize getID3 engine\n$getID3 = new getID3;\n$ThisFileInfo = $getID3->analyze($filename);\n\n// Optional: copies data from all subarrays of [tags] into [comments] so\n// metadata is all available in one location for all tag formats\n// rather than having to know the internal structure of all possible tags\ngetid3_lib::CopyTagsToComments($ThisFileInfo);\n\necho '<pre>'.htmlentities(print_r($ThisFileInfo, true)).'</pre>';\n\n// ===== WRITING TAGS (Official Example) =====\n\n// Initialize\nrequire_once('getid3/getid3.php');\nrequire_once('getid3/write.php');\n$getID3 = new getID3;\n$getID3->setOption(array('encoding'=>'UTF-8'));\n\n// Initialize getid3 tag-writing module\n$tagwriter = new getid3_writetags;\n$tagwriter->filename = '/path/to/file.mp3';\n$tagwriter->tagformats = array('id3v1', 'id3v2.3');\n\n// set various options (optional)\n$tagwriter->overwrite_tags    = true;  // if true will erase existing tag data and write only passed data; if false will merge passed data with existing tag data (experimental)\n$tagwriter->remove_other_tags = false; // if true removes other tag formats (e.g. ID3v1 if writing ID3v2.3)\n$tagwriter->tag_encoding      = 'UTF-8';\n$tagwriter->remove_other_tags = true;\n\n// populate data array\n$TagData = array(\n  'title'                  => array('My Song'),\n  'artist'                 => array('The Artist'),\n  'album'                  => array('Greatest Hits'),\n  'year'                   => array('2004'),\n  'genre'                  => array('Rock'),\n  'comment'                => array('excellent!'),\n  'track_number'           => array('04/16'),\n  'popularimeter'          => array('email'=>'user@example.net', 'rating'=>128, 'data'=>0),\n  'unique_file_identifier' => array('owneridentifier'=>'user@example.net', 'data'=>md5('filename.mp3'))\n);\n$tagwriter->tag_data = $TagData;\n\n// write tags\nif ($tagwriter->WriteTags()) {\n    echo 'Successfully wrote tags<br>';\n    if (!empty($tagwriter->warnings)) {\n        echo 'There were some warnings:<br>'.implode('<br><br>', $tagwriter->warnings);\n    }\n} else {\n    echo 'Failed to write tags!<br>'.implode('<br><br>', $tagwriter->errors);\n}\n\n// ===== REMOTE FILE ANALYSIS (Official Example) =====\n\n// Copy remote file locally to scan with getID3()\n$remotefilename = 'http://www.example.com/filename.mp3';\nif ($fp_remote = fopen($remotefilename, 'rb')) {\n    $localtempfilename = tempnam('/tmp', 'getID3');\n    if ($fp_local = fopen($localtempfilename, 'wb')) {\n        while ($buffer = fread($fp_remote, 8192)) {\n            fwrite($fp_local, $buffer);\n        }\n        fclose($fp_local);\n        // Initialize getID3 engine\n        $getID3 = new getID3;\n        $ThisFileInfo = $getID3->analyze($localtempfilename);\n        // Delete temporary file\n        unlink($localtempfilename);\n    }\n    fclose($fp_remote);\n}\n\n?>