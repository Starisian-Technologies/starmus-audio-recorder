/**
 * STARISIAN TECHNOLOGIES - TACTILE DESIGN SYSTEM
 * Refactor: Photophobia-Friendly & Legacy-Hardened
 * Theme: Dark-First / Deep Ink / Noto Sans
 */

/* ========================================================================
   1. THEME INHERITANCE & PHOTOPHOBIA VARIABLES
   ======================================================================== */
:root {
    /* Base Colors: Using your Deep Ink & Warm Earth tones */
    --starmus-base: var(--wp--preset--color--base, #180205);
    --starmus-base-two: var(--wp--preset--color--base-two, #251717);

    /* Photophobia Fix: Softened Cream (reduces "halo" effect for light-sensitive eyes) */
    --starmus-text: var(--wp--preset--color--contrast, #eceecf);
    --starmus-text-muted: rgba(236, 238, 207, 0.6);

    /* Primary Action: Softened Gold (less "glare" than pure yellow) */
    --starmus-primary: var(--wp--preset--color--accent, #e5c34d);

    /* Shadows: Palette-derived Ink (No pure black) */
    --starmus-shadow-lift: 0 10px 20px -5px rgba(24, 2, 5, 0.7);
    --starmus-shadow-raised: 2px 2px 5px rgba(24, 2, 5, 0.5);
    --starmus-shadow-recessed: inset 2px 2px 5px rgba(24, 2, 5, 0.6);

    /* Glass/Paper Surface Logic */
    --starmus-glass-bg: var(--starmus-base-two);
    --starmus-glass-border-color: rgba(236, 238, 207, 0.08);
    --starmus-glass-shadow: var(--starmus-shadow-lift);

    /* Accessible Semantic States (Slightly desaturated to prevent glare) */
    --starmus-danger: #a52a2a;
    --starmus-success: #2e7d32;
    --starmus-warning: #c66900;
}

/* ========================================================================
   2. GLOBAL TYPOGRAPHY & SURFACE (LOSSLESS)
   ======================================================================== */
.starmus-recorder-form,
.starmus-user-detail,
.starmus-admin-detail,
.starmus-editor {
    font-family:
        "Noto Sans",
        system-ui,
        -apple-system,
        sans-serif !important;
    color: var(--starmus-text) !important;
    line-height: 1.6;
    background-color: transparent;
}

.sparxstar-glass-card,
.starmus-glass,
.starmus-recorder-form,
.starmus-editor__wave-inner,
.starmus-editor__transcript,
.starmus-editor__list,
.starmus-player-card,
.starmus-info-card,
.starmus-actions-card {
    background: var(--starmus-glass-bg) !important;
    border: 1px solid var(--starmus-glass-border-color) !important;
    border-radius: 4px !important;
    box-shadow: var(--starmus-glass-shadow) !important;
    /* Optimized: Removed backdrop-filter to save CPU/Battery on low-end devices */
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}

/* ========================================================================
   3. FORMS & INPUTS (TACTILE RECESSED)
   ======================================================================== */
.starmus-recorder-form label {
    font-weight: 600;
    color: var(--starmus-text-muted); /* Softer label for photophobia */
    font-size: 0.9rem;
}

.starmus-recorder-form input[type="text"],
.starmus-recorder-form select,
.starmus-recorder-form textarea {
    background-color: var(--starmus-base) !important;
    color: var(--starmus-text) !important;
    border: 1px solid var(--starmus-glass-border-color) !important;
    border-radius: 4px !important;
    box-shadow: var(--starmus-shadow-recessed) !important;
    font-size: 1rem;
    padding: 0.85rem !important;
    appearance: none; /* Uniform look on old Androids */
}

/* Compatibility fix for older mobile browser select dropdowns */
.starmus-recorder-form select option {
    background-color: var(--starmus-base-two) !important;
    color: var(--starmus-text) !important;
}

.starmus-recorder-form input:focus {
    outline: none !important;
    border-color: var(--starmus-primary) !important;
    background-color: var(--starmus-base-two) !important;
}

/* ========================================================================
   4. BUTTON SYSTEM (TACTILE RAISED)
   ======================================================================== */
.starmus-btn,
.button.starmus-btn {
    font-family: "Noto Sans", sans-serif !important;
    border-radius: 4px !important;
    box-shadow: var(--starmus-shadow-raised) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.05em !important;
    font-weight: 700 !important;
    border: none;
    transition: all 0.2s ease !important;
}

.starmus-btn--primary,
button[data-starmus-action="record"],
button[data-starmus-action="submit"] {
    background-color: var(--starmus-primary) !important;
    color: var(--starmus-base) !important; /* Inverted for clarity */
}

.starmus-btn--secondary,
.starmus-btn--resume,
.starmus-btn--pause {
    background: var(--starmus-base-two) !important;
    border: 1px solid var(--starmus-primary) !important;
    color: var(--starmus-primary) !important;
}

@media (hover: hover) {
    .starmus-btn:hover:not(:disabled) {
        transform: translateY(-2px) !important;
        box-shadow: var(--starmus-shadow-lift) !important;
    }
}

/* ========================================================================
   5. RECORDER COMPONENTS (TIMER & METERS)
   ======================================================================== */
.starmus-visualizer-stage {
    background: var(--starmus-base) !important;
    box-shadow: var(--starmus-shadow-recessed) !important;
    border: 1px solid var(--starmus-glass-border-color) !important;
    filter: brightness(0.9); /* Reduces glare during live recording */
}

.starmus-timer {
    font-family: "Noto Sans Mono", monospace !important;
    color: var(--starmus-text);
    letter-spacing: -0.05em;
}

/* Meters: Using desaturated semantic colors for photophobia */
.starmus-meter-bar {
    background: rgba(24, 2, 5, 0.5) !important;
    border-radius: 2px;
}

.starmus-meter-bar::after {
    filter: saturate(0.8); /* Dims the intensity of the "Green-to-Red" meter */
}

/* ========================================================================
   6. TRANSCRIPT & EDITOR (MONOSPACE ALIGNMENT)
   ======================================================================== */
.starmus-editor__transcript,
.starmus-transcript-box {
    font-family: "Noto Sans Mono", monospace !important;
    background: var(--starmus-base-two) !important;
    color: var(--starmus-text) !important;
    border-radius: 4px;
}

.starmus-word.is-active {
    background: color-mix(in srgb, var(--starmus-primary) 30%, transparent) !important;
    color: var(--starmus-text) !important;
    box-shadow: 0 0 10px rgba(229, 195, 77, 0.2);
    border-radius: 2px;
}

/* ========================================================================
   7. LISTS, CARDS & PAGINATION
   ======================================================================== */
.starmus-card__title a {
    color: var(--starmus-primary) !important;
    text-decoration: none;
}

.starmus-tag,
.starmus-badge {
    background: var(--starmus-base) !important;
    border: 1px solid var(--starmus-glass-border-color) !important;
    color: var(--starmus-text-muted) !important;
    font-size: 0.7rem !important;
}

.starmus-pagination__item .page-numbers {
    background: var(--starmus-base-two) !important;
    border: 1px solid var(--starmus-glass-border-color) !important;
    color: var(--starmus-text) !important;
}

/* ========================================================================
   8. PERFORMANCE & ACCESSIBILITY (HARDENED)
   ======================================================================== */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation: none !important;
    }
}

/* Softened Shine Animation (Reduced glare) */
button[data-starmus-action="submit"],
.starmus-btn--primary {
    position: relative;
    overflow: hidden;
    background: linear-gradient(
        90deg,
        var(--starmus-primary) 0%,
        rgba(229, 195, 77, 0.4) 50%,
        var(--starmus-primary) 100%
    ) !important;
    background-size: 200% auto !important;
}

/* Mobile Immersive: Ensure dark-first background is forced */
@media (width <= 768px) {
    .starmus-recorder-form.starmus-immersive {
        background: var(--starmus-base) !important;
        position: fixed;
        z-index: 10000;
    }
}
