/* =========================================================
   SPARXSTAR PLUGIN CORE (Structure & Inheritance)
   Logic: Zero Design Opinion. Total Theme Dependency.
   ========================================================= */

:root {
    /* --- THEME MAPPING (The Standard Setup) --- */
    --sparxstar-bg:       var(--wp--preset--color--base);
    --sparxstar-surface:  var(--wp--preset--color--base-2, var(--wp--preset--color--base));
    --sparxstar-text:     var(--wp--preset--color--contrast);
    --sparxstar-accent:   var(--wp--preset--color--accent);

    /* --- SHADOW INHERITANCE --- */
    /* We expect the theme to provide these. If not, they remain empty/flat */
    --sparxstar-shd-raised:  var(--wp--custom--shadow--raised);
    --sparxstar-shd-embossed: var(--wp--custom--shadow--embossed);
    --sparxstar-shd-flat:    var(--wp--custom--shadow--flat);
}

/* --- THE INTERNAL FLIP (Dark/Light Switcher) --- */
/* If you apply this class, the plugin swaps the theme's logic internally */
.sparxstar-theme--invert {
    --sparxstar-bg:       var(--wp--preset--color--contrast);
    --sparxstar-surface:  var(--wp--preset--color--contrast-2, var(--wp--preset--color--contrast));
    --sparxstar-text:     var(--wp--preset--color--base);
    /* Shadows must also be flipped or they will look like "glows" on dark */
    --sparxstar-shd-raised:   var(--wp--custom--shadow--raised-inverted);
    --sparxstar-shd-embossed: var(--wp--custom--shadow--embossed-inverted);
}

/* ---------------------------------------------------------
   1. LAYOUT ENGINE (Grids & Spacing)
   --------------------------------------------------------- */
.sparxstar-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--wp--style--spacing--medium, 2rem);
}

@media (min-width: 782px) {
    .sparxstar-grid--halves { grid-template-columns: repeat(2, 1fr); }
    .sparxstar-grid--sidebar { grid-template-columns: 2fr 1fr; }
}

/* ---------------------------------------------------------
   2. COMPONENT STRUCTURE: CARD
   --------------------------------------------------------- */
.sparxstar-card {
    background-color: var(--sparxstar-surface);
    color: var(--sparxstar-text);
    box-shadow: var(--sparxstar-shd-flat);

    /* Structural padding only */
    padding: var(--wp--style--spacing--large, 2.5rem);
    border-radius: var(--wp--custom--border-radius--card, 8px);
    font-family: inherit;
    line-height: inherit;
}

/* ---------------------------------------------------------
   3. COMPONENT STRUCTURE: FORM & CONTROLS
   --------------------------------------------------------- */
.sparxstar-form__group { margin-bottom: 1.5rem; }

.sparxstar-form__control {
    width: 100%;
    min-height: 48px; /* Touch target structure */
    padding: 0 1rem;

    /* Identity inherited from Theme */
    background-color: var(--sparxstar-bg) !important;
    color: var(--sparxstar-text) !important;
    font-family: inherit;
    font-size: inherit;

    /* Shadow inherited from Theme */
    box-shadow: var(--sparxstar-shd-embossed) !important;
    border: var(--wp--custom--border--input, none);
    border-radius: var(--wp--custom--border-radius--input, 13px);
}

/* ---------------------------------------------------------
   4. COMPONENT STRUCTURE: BUTTONS
   --------------------------------------------------------- */
.sparxstar-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: 44px;
    padding: 0 1.5rem;

    /* Inherit identity */
    background-color: var(--sparxstar-accent);
    color: var(--sparxstar-bg); /* Contrast text */

    box-shadow: var(--sparxstar-shd-raised);
    border: none;
    border-radius: var(--wp--custom--border-radius--button, 13px);
    font-family: inherit;
    font-weight: 700;
    text-transform: uppercase;
    cursor: pointer;
}
