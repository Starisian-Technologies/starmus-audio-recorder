!function(e,o){"use strict";if(!o)return void console.error("[Optimizer] CRITICAL: StarmusHooks is not available.");const t=e.starmusServerConfig?.optimizationProfile||"default",i=e.starmusServerConfig?.debug||!1;(i||"default"!==t)&&console.log(`[Optimizer] Server-defined profile received: "${t}". Applying filters.`),"default"!==t&&(o.addFilter("starmus_audio_constraints",function(e,o){"very_low_spec"===t?(e.audio.sampleRate=8e3,i&&console.log(`[Optimizer] Setting sampleRate to 8000 Hz for very_low_spec (instance: ${o})`)):"low_spec"===t&&(e.audio.sampleRate=16e3,i&&console.log(`[Optimizer] Setting sampleRate to 16000 Hz for low_spec (instance: ${o})`));return e},10),o.addFilter("starmus_media_recorder_options",function(e,o){"very_low_spec"===t?(e.audioBitsPerSecond=16e3,i&&console.log(`[Optimizer] Setting bitrate to 16 kbps for very_low_spec (instance: ${o})`)):"low_spec"===t&&(e.audioBitsPerSecond=32e3,i&&console.log(`[Optimizer] Setting bitrate to 32 kbps for low_spec (instance: ${o})`));return e},10))}(window,window.StarmusHooks);