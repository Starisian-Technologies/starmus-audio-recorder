{"version":3,"file":"starmus-audio-recorder-submissions.min.js","names":["document","addEventListener","CONFIG","LOG_PREFIX","DB_NAME","STORE_NAME","CHUNK_SIZE","DEBUG_MODE","URLSearchParams","window","location","search","has","console","log","idbAvailable","dbPromise","Promise","resolve","request","indexedDB","open","onupgradeneeded","event","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","error","base64ToBlob","base64","parts","split","mime","match","binary","atob","array","Uint8Array","length","i","charCodeAt","Blob","type","async","enqueue","item","tx","transaction","objectStore","put","reject","oncomplete","err","list","JSON","parse","localStorage","getItem","blob","reader","FileReader","onloadend","readAsDataURL","blobToBase64","audio","storableItem","audioData","undefined","existingIndex","findIndex","id","push","setItem","stringify","getAllItems","req","getAll","map","deleteItem","delete","filter","uploadSubmission","formInstanceId","offset","uploadedBytes","size","navigator","onLine","warn","success","queued","chunk","slice","fd","FormData","Object","keys","wordpressData","forEach","key","append","meta","audioField","fileName","response","fetch","ajaxUrl","method","body","ok","errorData","json","catch","Error","data","message","status","redirectUrl","redirect_url","isProcessingQueue","processQueue","retryBtn","getElementById","disabled","items","updateQueueUI","queueBanner","createElement","countSpan","textContent","classList","remove","add","className","setAttribute","innerHTML","appendChild","setTimeout","recorderWrappers","querySelectorAll","wrapper","substring","formElement","step1","querySelector","step2","continueBtn","style","display","initializeRecorder","transitionToStep2","step2Heading","focus","instanceId","StarmusAudioRecorder","init","then","preventDefault","errorMessageDiv","fieldsToValidate","name","field","removeAttribute","input","isValid","value","trim","checked","geolocation","getCurrentPosition","position","coords","latitude","longitude","code","e","audioIdField","audioFileInput","submitButton","loaderDiv","files","alert","formData","File","action","starmusFormData","nonce","submissionItem","ajax_url","href","reset","cleanup"],"sources":["0"],"mappings":"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"}
