{"version":3,"file":"starmus-audio-recorder-submissions.min.js","names":["document","addEventListener","CONFIG","LOG_PREFIX","DB_NAME","STORE_NAME","CHUNK_SIZE","DEBUG_MODE","URLSearchParams","window","location","search","has","console","log","idbAvailable","dbPromise","Promise","resolve","request","indexedDB","open","onupgradeneeded","event","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","onerror","error","base64ToBlob","base64","parts","split","mime","match","binary","atob","array","Uint8Array","length","i","charCodeAt","Blob","type","async","enqueue","item","tx","transaction","objectStore","put","reject","oncomplete","err","list","JSON","parse","localStorage","getItem","blob","reader","FileReader","onloadend","readAsDataURL","blobToBase64","audio","storableItem","audioData","undefined","existingIndex","findIndex","id","push","setItem","stringify","getAllItems","req","getAll","map","uploadSubmission","offset","uploadedBytes","size","navigator","onLine","warn","chunk","slice","fd","FormData","key","wordpressData","append","meta","audioField","fileName","response","fetch","ajaxUrl","method","body","ok","errorData","json","catch","errorMessage","data","message","status","Error","success","delete","filter","deleteItem","isProcessingQueue","processQueue","retryBtn","getElementById","disabled","items","updateQueueUI","queueBanner","createElement","countSpan","textContent","classList","remove","add","className","setAttribute","innerHTML","appendChild","setTimeout","recorderWrappers","querySelectorAll","forEach","wrapper","formInstanceId","substring","formElement","_updateStatus","makeVisible","reEnableSubmit","statusDiv","textSpan","querySelector","submitButton","StarmusAudioRecorder","init","then","e","preventDefault","audioIdField","audioFileInput","consentCheckbox","loaderDiv","value","files","checked","formData","File","action","starmusFormData","nonce","submissionItem","ajax_url","name","reset","cleanup","onStarmusSubmitSuccess"],"sources":["0"],"mappings":"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"}
