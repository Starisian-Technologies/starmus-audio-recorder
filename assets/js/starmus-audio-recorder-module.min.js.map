{"version":3,"file":"starmus-audio-editor.min.js","names":["createButtonStateEnforcer","buttonElement","stateObject","permissionKey","logFn","console","log","getLiveButton","document","getElementById","id","shouldBeEnabled","includes","liveButtonForCheck","disabled","observer","MutationObserver","mutations","currentLiveButton","mutation","type","attributeName","allowed","observe","attributes","attributeFilter","forEach","delay","setTimeout","freshButton","StarmusAudioRecorder","mediaRecorder","currentStream","config","formInstanceId","recordButtonId","pauseButtonId","deleteButtonId","timerDisplayId","audioPlayerId","statusDisplayId","levelBarId","uuidFieldId","fileInputId","submitButtonId","recorderContainerSelector","logPrefix","dom","internalState","micPermission","eventHandlers","recordButtonEnforcer","audioChunks","isRecording","isPaused","accumulatedElapsedTime","_log","args","_updateStatus","msg","statusDisplay","sanitizedMsg","String","replace","char","querySelector","textContent","classList","remove","_attachAudioToForm","audioBlob","fileType","generatedAudioID","crypto","randomUUID","getRandomValues","buffer","Uint8Array","U","i","toString","padStart","error","d","Date","getTime","performance","now","c","r","Math","random","floor","_generateUniqueAudioId","fileName","uuidField","value","fileInput","dataTransfer","DataTransfer","file","File","items","add","files","length","submitButton","e","event","CustomEvent","detail","audioId","durationMs","container","dispatchEvent","_handleRecordingReady","recordButton","setAttribute","pauseButton","deleteButton","audioPlayer","src","startsWith","URL","revokeObjectURL","_handleDataAvailable","data","size","push","_handleStop","publicMethods","cleanup","mimeType","Blob","audioUrl","createObjectURL","controls","getTracks","track","stop","init","async","userConfig","Object","assign","baseId","elementIds","timerDisplay","keys","key","_cacheDomElements","this","setupEventListeners","setupPermissionsAndUI","recordClick","start","pauseClick","resume","pause","deleteClick","action","navigator","permissions","query","permissionStatus","name","state","onchange","disconnect","err","mediaDevices","getUserMedia","window","MediaRecorder","stream","audio","selectedMimeType","find","isTypeSupported","ondataavailable","onstop","destroy","getAudioId","addEventListener"],"sources":["0"],"mappings":"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"}