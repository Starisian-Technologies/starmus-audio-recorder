{"version":3,"file":"starmus-audio-recorder-module.min.js","names":["createButtonStateEnforcer","buttonElement","stateObject","permissionKey","logFn","console","log","error","getLiveButton","document","getElementById","id","shouldBeEnabled","includes","liveButtonForCheck","disabled","observer","MutationObserver","mutations","currentLiveButton","mutation","type","attributeName","allowed","observe","attributes","attributeFilter","forEach","delay","setTimeout","freshButton","window","StarmusAudioRecorder","mediaRecorder","currentStream","config","formInstanceId","recordButtonId","pauseButtonId","deleteButtonId","timerDisplayId","audioPlayerId","statusDisplayId","levelBarId","uuidFieldId","fileInputId","submitButtonId","recorderContainerSelector","logPrefix","dom","internalState","micPermission","eventHandlers","recordButtonEnforcer","audioChunks","isRecording","isPaused","accumulatedElapsedTime","timerInterval","_log","args","_warn","warn","_error","_formatTime","ms","totalSeconds","Math","floor","minutes","seconds","String","padStart","_updateStatus","msg","statusDisplay","textSpan","querySelector","textContent","className","classList","remove","_attachAudioToForm","audioBlob","fileType","generatedAudioID","crypto","randomUUID","getRandomValues","buffer","Uint8Array","hex","Array","from","byte","toString","slice","join","d","Date","getTime","performance","now","replace","c","r","random","_generateUniqueAudioId","fileName","uuidField","value","dataTransfer","DataTransfer","file","File","items","add","fileInput","files","length","submitButton","e","event","CustomEvent","detail","audioId","durationMs","container","dispatchEvent","_handleRecordingReady","clearInterval","timerDisplay","recordButton","setAttribute","pauseButton","deleteButton","audioPlayer","src","startsWith","URL","revokeObjectURL","_handleDataAvailable","data","size","push","_handleStop","publicMethods","cleanup","mimeType","Blob","audioUrl","createObjectURL","controls","getTracks","track","stop","init","async","userConfig","Object","assign","baseId","elementIds","keys","key","some","el","_cacheDomElements","this","setupEventListeners","setupPermissionsAndUI","recordClick","start","pauseClick","resume","pause","deleteClick","action","navigator","permissions","query","permissionStatus","name","state","onchange","disconnect","err","mediaDevices","getUserMedia","MediaRecorder","stream","audio","selectedMimeType","find","isTypeSupported","ondataavailable","onstop","startTime","setInterval","message","resumeTime","elapsedSinceResume","instanceId","destroy","getAudioId"],"sources":["0"],"mappings":"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"}
