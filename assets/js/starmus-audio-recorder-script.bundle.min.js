var t,e,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={};function i(){if(e)return t;e=1;var n=function(t){return t&&t.Math===Math&&t};return t=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r&&r)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}var o,a,u,s,c,f,l,d,p={};function v(){return a?o:(a=1,o=function(t){try{return!!t()}catch(t){return!0}})}function m(){if(s)return u;s=1;var t=v();return u=!t(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})}function y(){if(f)return c;f=1;var t=v();return c=!t(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})}function h(){if(d)return l;d=1;var t=y(),e=Function.prototype.call;return l=t?e.bind(e):function(){return e.apply(e,arguments)},l}var g,b,w,S,T,A,O,E,k,x,I,R,P,C,M,j,_,B,N,U,D,L,F,q,z,H,W,V,G,$,Y,Q,J,K,X,Z,tt,et,rt,nt,it,ot={};function at(){if(g)return ot;g=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return ot.f=r?function(t){var r=e(this,t);return!!r&&r.enumerable}:t,ot}function ut(){return w?b:(w=1,b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}})}function st(){if(T)return S;T=1;var t=y(),e=Function.prototype,r=e.call,n=t&&e.bind.bind(r,r);return S=t?n:function(t){return function(){return r.apply(t,arguments)}},S}function ct(){if(O)return A;O=1;var t=st(),e=t({}.toString),r=t("".slice);return A=function(t){return r(e(t),8,-1)}}function ft(){if(k)return E;k=1;var t=st(),e=v(),r=ct(),n=Object,i=t("".split);return E=e(function(){return!n("z").propertyIsEnumerable(0)})?function(t){return"String"===r(t)?i(t,""):n(t)}:n}function lt(){return I?x:(I=1,x=function(t){return null==t})}function dt(){if(P)return R;P=1;var t=lt(),e=TypeError;return R=function(r){if(t(r))throw new e("Can't call method on "+r);return r}}function pt(){if(M)return C;M=1;var t=ft(),e=dt();return C=function(r){return t(e(r))}}function vt(){if(_)return j;_=1;var t="object"==typeof document&&document.all;return j=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(t){return"function"==typeof t}}function mt(){if(N)return B;N=1;var t=vt();return B=function(e){return"object"==typeof e?null!==e:t(e)}}function yt(){if(D)return U;D=1;var t=i(),e=vt();return U=function(r,n){return arguments.length<2?(i=t[r],e(i)?i:void 0):t[r]&&t[r][n];var i},U}function ht(){if(F)return L;F=1;var t=st();return L=t({}.isPrototypeOf)}function gt(){if(z)return q;z=1;var t=i().navigator,e=t&&t.userAgent;return q=e?String(e):""}function bt(){if(W)return H;W=1;var t,e,r=i(),n=gt(),o=r.process,a=r.Deno,u=o&&o.versions||a&&a.version,s=u&&u.v8;return s&&(e=(t=s.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!e&&n&&(!(t=n.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=n.match(/Chrome\/(\d+)/))&&(e=+t[1]),H=e}function wt(){if(G)return V;G=1;var t=bt(),e=v(),r=i().String;return V=!!Object.getOwnPropertySymbols&&!e(function(){var e=Symbol("symbol detection");return!r(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&t&&t<41})}function St(){if(Y)return $;Y=1;var t=wt();return $=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function Tt(){if(J)return Q;J=1;var t=yt(),e=vt(),r=ht(),n=St(),i=Object;return Q=n?function(t){return"symbol"==typeof t}:function(n){var o=t("Symbol");return e(o)&&r(o.prototype,i(n))}}function At(){if(X)return K;X=1;var t=String;return K=function(e){try{return t(e)}catch(t){return"Object"}}}function Ot(){if(tt)return Z;tt=1;var t=vt(),e=At(),r=TypeError;return Z=function(n){if(t(n))return n;throw new r(e(n)+" is not a function")}}function Et(){if(rt)return et;rt=1;var t=Ot(),e=lt();return et=function(r,n){var i=r[n];return e(i)?void 0:t(i)}}function kt(){if(it)return nt;it=1;var t=h(),e=vt(),r=mt(),n=TypeError;return nt=function(i,o){var a,u;if("string"===o&&e(a=i.toString)&&!r(u=t(a,i)))return u;if(e(a=i.valueOf)&&!r(u=t(a,i)))return u;if("string"!==o&&e(a=i.toString)&&!r(u=t(a,i)))return u;throw new n("Can't convert object to primitive value")}}var xt,It,Rt,Pt,Ct,Mt,jt,_t,Bt,Nt,Ut,Dt,Lt,Ft,qt,zt,Ht,Wt,Vt,Gt,$t,Yt,Qt,Jt,Kt={exports:{}};function Xt(){return It?xt:(It=1,xt=!1)}function Zt(){if(Pt)return Rt;Pt=1;var t=i(),e=Object.defineProperty;return Rt=function(r,n){try{e(t,r,{value:n,configurable:!0,writable:!0})}catch(e){t[r]=n}return n}}function te(){if(Ct)return Kt.exports;Ct=1;var t=Xt(),e=i(),r=Zt(),n="__core-js_shared__",o=Kt.exports=e[n]||r(n,{});return(o.versions||(o.versions=[])).push({version:"3.47.0",mode:t?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Kt.exports}function ee(){if(jt)return Mt;jt=1;var t=te();return Mt=function(e,r){return t[e]||(t[e]=r||{})}}function re(){if(Bt)return _t;Bt=1;var t=dt(),e=Object;return _t=function(r){return e(t(r))}}function ne(){if(Ut)return Nt;Ut=1;var t=st(),e=re(),r=t({}.hasOwnProperty);return Nt=Object.hasOwn||function(t,n){return r(e(t),n)}}function ie(){if(Lt)return Dt;Lt=1;var t=st(),e=0,r=Math.random(),n=t(1.1.toString);return Dt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+n(++e+r,36)}}function oe(){if(qt)return Ft;qt=1;var t=i(),e=ee(),r=ne(),n=ie(),o=wt(),a=St(),u=t.Symbol,s=e("wks"),c=a?u.for||u:u&&u.withoutSetter||n;return Ft=function(t){return r(s,t)||(s[t]=o&&r(u,t)?u[t]:c("Symbol."+t)),s[t]}}function ae(){if(Ht)return zt;Ht=1;var t=h(),e=mt(),r=Tt(),n=Et(),i=kt(),o=oe(),a=TypeError,u=o("toPrimitive");return zt=function(o,s){if(!e(o)||r(o))return o;var c,f=n(o,u);if(f){if(void 0===s&&(s="default"),c=t(f,o,s),!e(c)||r(c))return c;throw new a("Can't convert object to primitive value")}return void 0===s&&(s="number"),i(o,s)}}function ue(){if(Vt)return Wt;Vt=1;var t=ae(),e=Tt();return Wt=function(r){var n=t(r,"string");return e(n)?n:n+""}}function se(){if($t)return Gt;$t=1;var t=i(),e=mt(),r=t.document,n=e(r)&&e(r.createElement);return Gt=function(t){return n?r.createElement(t):{}}}function ce(){if(Qt)return Yt;Qt=1;var t=m(),e=v(),r=se();return Yt=!t&&!e(function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})}function fe(){if(Jt)return p;Jt=1;var t=m(),e=h(),r=at(),n=ut(),i=pt(),o=ue(),a=ne(),u=ce(),s=Object.getOwnPropertyDescriptor;return p.f=t?s:function(t,c){if(t=i(t),c=o(c),u)try{return s(t,c)}catch(t){}if(a(t,c))return n(!e(r.f,t,c),t[c])},p}var le,de,pe,ve,me,ye,he,ge={};function be(){if(de)return le;de=1;var t=m(),e=v();return le=t&&e(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})}function we(){if(ve)return pe;ve=1;var t=mt(),e=String,r=TypeError;return pe=function(n){if(t(n))return n;throw new r(e(n)+" is not an object")}}function Se(){if(me)return ge;me=1;var t=m(),e=ce(),r=be(),n=we(),i=ue(),o=TypeError,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,s="enumerable",c="configurable",f="writable";return ge.f=t?r?function(t,e,r){if(n(t),e=i(e),n(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var o=u(t,e);o&&o[f]&&(t[e]=r.value,r={configurable:c in r?r[c]:o[c],enumerable:s in r?r[s]:o[s],writable:!1})}return a(t,e,r)}:a:function(t,r,u){if(n(t),r=i(r),n(u),e)try{return a(t,r,u)}catch(t){}if("get"in u||"set"in u)throw new o("Accessors not supported");return"value"in u&&(t[r]=u.value),t},ge}function Te(){if(he)return ye;he=1;var t=m(),e=Se(),r=ut();return ye=t?function(t,n,i){return e.f(t,n,r(1,i))}:function(t,e,r){return t[e]=r,t}}var Ae,Oe,Ee,ke,xe,Ie,Re,Pe,Ce,Me,je,_e,Be,Ne,Ue,De={exports:{}};function Le(){if(Oe)return Ae;Oe=1;var t=m(),e=ne(),r=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=e(r,"name"),o=i&&"something"===function(){}.name,a=i&&(!t||t&&n(r,"name").configurable);return Ae={EXISTS:i,PROPER:o,CONFIGURABLE:a}}function Fe(){if(ke)return Ee;ke=1;var t=st(),e=vt(),r=te(),n=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(t){return n(t)}),Ee=r.inspectSource}function qe(){if(Pe)return Re;Pe=1;var t=ee(),e=ie(),r=t("keys");return Re=function(t){return r[t]||(r[t]=e(t))}}function ze(){return Me?Ce:(Me=1,Ce={})}function He(){if(_e)return je;_e=1;var t,e,r,n=function(){if(Ie)return xe;Ie=1;var t=i(),e=vt(),r=t.WeakMap;return xe=e(r)&&/native code/.test(String(r))}(),o=i(),a=mt(),u=Te(),s=ne(),c=te(),f=qe(),l=ze(),d="Object already initialized",p=o.TypeError,v=o.WeakMap;if(n||c.state){var m=c.state||(c.state=new v);m.get=m.get,m.has=m.has,m.set=m.set,t=function(t,e){if(m.has(t))throw new p(d);return e.facade=t,m.set(t,e),e},e=function(t){return m.get(t)||{}},r=function(t){return m.has(t)}}else{var y=f("state");l[y]=!0,t=function(t,e){if(s(t,y))throw new p(d);return e.facade=t,u(t,y,e),e},e=function(t){return s(t,y)?t[y]:{}},r=function(t){return s(t,y)}}return je={set:t,get:e,has:r,enforce:function(n){return r(n)?e(n):t(n,{})},getterFor:function(t){return function(r){var n;if(!a(r)||(n=e(r)).type!==t)throw new p("Incompatible receiver, "+t+" required");return n}}}}function We(){if(Be)return De.exports;Be=1;var t=st(),e=v(),r=vt(),n=ne(),i=m(),o=Le().CONFIGURABLE,a=Fe(),u=He(),s=u.enforce,c=u.get,f=String,l=Object.defineProperty,d=t("".slice),p=t("".replace),y=t([].join),h=i&&!e(function(){return 8!==l(function(){},"length",{value:8}).length}),g=String(String).split("String"),b=De.exports=function(t,e,r){"Symbol("===d(f(e),0,7)&&(e="["+p(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!n(t,"name")||o&&t.name!==e)&&(i?l(t,"name",{value:e,configurable:!0}):t.name=e),h&&r&&n(r,"arity")&&t.length!==r.arity&&l(t,"length",{value:r.arity});try{r&&n(r,"constructor")&&r.constructor?i&&l(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=s(t);return n(a,"source")||(a.source=y(g,"string"==typeof e?e:"")),t};return Function.prototype.toString=b(function(){return r(this)&&c(this).source||a(this)},"toString"),De.exports}function Ve(){if(Ue)return Ne;Ue=1;var t=vt(),e=Se(),r=We(),n=Zt();return Ne=function(i,o,a,u){u||(u={});var s=u.enumerable,c=void 0!==u.name?u.name:o;if(t(a)&&r(a,c,u),u.global)s?i[o]=a:n(o,a);else{try{u.unsafe?i[o]&&(s=!0):delete i[o]}catch(t){}s?i[o]=a:e.f(i,o,{value:a,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return i}}var Ge,$e,Ye,Qe,Je,Ke,Xe,Ze,tr,er,rr,nr,ir,or,ar,ur,sr,cr={};function fr(){if(Qe)return Ye;Qe=1;var t=function(){if($e)return Ge;$e=1;var t=Math.ceil,e=Math.floor;return Ge=Math.trunc||function(r){var n=+r;return(n>0?e:t)(n)}}();return Ye=function(e){var r=+e;return r!=r||0===r?0:t(r)}}function lr(){if(Ke)return Je;Ke=1;var t=fr(),e=Math.max,r=Math.min;return Je=function(n,i){var o=t(n);return o<0?e(o+i,0):r(o,i)}}function dr(){if(Ze)return Xe;Ze=1;var t=fr(),e=Math.min;return Xe=function(r){var n=t(r);return n>0?e(n,9007199254740991):0}}function pr(){if(er)return tr;er=1;var t=dr();return tr=function(e){return t(e.length)}}function vr(){if(nr)return rr;nr=1;var t=pt(),e=lr(),r=pr(),n=function(n){return function(i,o,a){var u=t(i),s=r(u);if(0===s)return!n&&-1;var c,f=e(a,s);if(n&&o!=o){for(;s>f;)if((c=u[f++])!=c)return!0}else for(;s>f;f++)if((n||f in u)&&u[f]===o)return n||f||0;return!n&&-1}};return rr={includes:n(!0),indexOf:n(!1)}}function mr(){if(or)return ir;or=1;var t=st(),e=ne(),r=pt(),n=vr().indexOf,i=ze(),o=t([].push);return ir=function(t,a){var u,s=r(t),c=0,f=[];for(u in s)!e(i,u)&&e(s,u)&&o(f,u);for(;a.length>c;)e(s,u=a[c++])&&(~n(f,u)||o(f,u));return f}}function yr(){return ur?ar:(ur=1,ar=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function hr(){if(sr)return cr;sr=1;var t=mr(),e=yr().concat("length","prototype");return cr.f=Object.getOwnPropertyNames||function(r){return t(r,e)},cr}var gr,br,wr,Sr,Tr,Ar,Or,Er,kr,xr,Ir,Rr,Pr,Cr,Mr={};function jr(){if(wr)return br;wr=1;var t=yt(),e=st(),r=hr(),n=(gr||(gr=1,Mr.f=Object.getOwnPropertySymbols),Mr),i=we(),o=e([].concat);return br=t("Reflect","ownKeys")||function(t){var e=r.f(i(t)),a=n.f;return a?o(e,a(t)):e}}function _r(){if(Tr)return Sr;Tr=1;var t=ne(),e=jr(),r=fe(),n=Se();return Sr=function(i,o,a){for(var u=e(o),s=n.f,c=r.f,f=0;f<u.length;f++){var l=u[f];t(i,l)||a&&t(a,l)||s(i,l,c(o,l))}}}function Br(){if(Or)return Ar;Or=1;var t=v(),e=vt(),r=/#|\.prototype\./,n=function(r,n){var s=o[i(r)];return s===u||s!==a&&(e(n)?t(n):!!n)},i=n.normalize=function(t){return String(t).replace(r,".").toLowerCase()},o=n.data={},a=n.NATIVE="N",u=n.POLYFILL="P";return Ar=n}function Nr(){if(kr)return Er;kr=1;var t=i(),e=fe().f,r=Te(),n=Ve(),o=Zt(),a=_r(),u=Br();return Er=function(i,s){var c,f,l,d,p,v=i.target,m=i.global,y=i.stat;if(c=m?t:y?t[v]||o(v,{}):t[v]&&t[v].prototype)for(f in s){if(d=s[f],l=i.dontCallGetSet?(p=e(c,f))&&p.value:c[f],!u(m?f:v+(y?".":"#")+f,i.forced)&&void 0!==l){if(typeof d==typeof l)continue;a(d,l)}(i.sham||l&&l.sham)&&r(d,"sham",!0),n(c,f,d,i)}}}function Ur(){if(Ir)return xr;Ir=1;var t=ct(),e=st();return xr=function(r){if("Function"===t(r))return e(r)}}function Dr(){if(Pr)return Rr;Pr=1;var t=v();return Rr=function(e,r){var n=[][e];return!!n&&t(function(){n.call(null,r||function(){return 1},1)})}}!function(){if(Cr)return n;Cr=1;var t=Nr(),e=Ur(),r=vr().indexOf,i=Dr(),o=e([].indexOf),a=!!o&&1/o([1],1,-0)<0;t({target:"Array",proto:!0,forced:a||!i("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return a?o(this,t,e)||0:r(this,t,e)}})}();var Lr,Fr,qr,zr,Hr,Wr,Vr,Gr,$r,Yr,Qr,Jr,Kr,Xr,Zr,tn,en,rn,nn,on,an,un,sn,cn,fn,ln,dn,pn,vn,mn,yn,hn,gn,bn,wn,Sn={};function Tn(){if(Fr)return Lr;Fr=1;var t=mr(),e=yr();return Lr=Object.keys||function(r){return t(r,e)}}function An(){if(Hr)return zr;Hr=1;var t=yt();return zr=t("document","documentElement")}function On(){if(Vr)return Wr;Vr=1;var t,e=we(),r=function(){if(qr)return Sn;qr=1;var t=m(),e=be(),r=Se(),n=we(),i=pt(),o=Tn();return Sn.f=t&&!e?Object.defineProperties:function(t,e){n(t);for(var a,u=i(e),s=o(e),c=s.length,f=0;c>f;)r.f(t,a=s[f++],u[a]);return t},Sn}(),n=yr(),i=ze(),o=An(),a=se(),u=qe(),s="prototype",c="script",f=u("IE_PROTO"),l=function(){},d=function(t){return"<"+c+">"+t+"</"+c+">"},p=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var e,r,i;v="undefined"!=typeof document?document.domain&&t?p(t):(r=a("iframe"),i="java"+c+":",r.style.display="none",o.appendChild(r),r.src=String(i),(e=r.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F):p(t);for(var u=n.length;u--;)delete v[s][n[u]];return v()};return i[f]=!0,Wr=Object.create||function(t,n){var i;return null!==t?(l[s]=e(t),i=new l,l[s]=null,i[f]=t):i=v(),void 0===n?i:r.f(i,n)}}function En(){if($r)return Gr;$r=1;var t=oe(),e=On(),r=Se().f,n=t("unscopables"),i=Array.prototype;return void 0===i[n]&&r(i,n,{configurable:!0,value:e(null)}),Gr=function(t){i[n][t]=!0}}function kn(){return Qr?Yr:(Qr=1,Yr={})}function xn(){if(Zr)return Xr;Zr=1;var t=ne(),e=vt(),r=re(),n=qe(),i=function(){if(Kr)return Jr;Kr=1;var t=v();return Jr=!t(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})}(),o=n("IE_PROTO"),a=Object,u=a.prototype;return Xr=i?a.getPrototypeOf:function(n){var i=r(n);if(t(i,o))return i[o];var s=i.constructor;return e(s)&&i instanceof s?s.prototype:i instanceof a?u:null}}function In(){if(en)return tn;en=1;var t,e,r,n=v(),i=vt(),o=mt(),a=On(),u=xn(),s=Ve(),c=oe(),f=Xt(),l=c("iterator"),d=!1;return[].keys&&("next"in(r=[].keys())?(e=u(u(r)))!==Object.prototype&&(t=e):d=!0),!o(t)||n(function(){var e={};return t[l].call(e)!==e})?t={}:f&&(t=a(t)),i(t[l])||s(t,l,function(){return this}),tn={IteratorPrototype:t,BUGGY_SAFARI_ITERATORS:d}}function Rn(){if(nn)return rn;nn=1;var t=Se().f,e=ne(),r=oe()("toStringTag");return rn=function(n,i,o){n&&!o&&(n=n.prototype),n&&!e(n,r)&&t(n,r,{configurable:!0,value:i})}}function Pn(){if(fn)return cn;fn=1;var t=mt();return cn=function(e){return t(e)||null===e}}function Cn(){if(dn)return ln;dn=1;var t=Pn(),e=String,r=TypeError;return ln=function(n){if(t(n))return n;throw new r("Can't set "+e(n)+" as a prototype")}}function Mn(){if(vn)return pn;vn=1;var t=function(){if(sn)return un;sn=1;var t=st(),e=Ot();return un=function(r,n,i){try{return t(e(Object.getOwnPropertyDescriptor(r,n)[i]))}catch(t){}}}(),e=mt(),r=dt(),n=Cn();return pn=Object.setPrototypeOf||("__proto__"in{}?function(){var i,o=!1,a={};try{(i=t(Object.prototype,"__proto__","set"))(a,[]),o=a instanceof Array}catch(t){}return function(t,a){return r(t),n(a),e(t)?(o?i(t,a):t.__proto__=a,t):t}}():void 0)}function jn(){if(yn)return mn;yn=1;var t=Nr(),e=h(),r=Xt(),n=Le(),i=vt(),o=function(){if(an)return on;an=1;var t=In().IteratorPrototype,e=On(),r=ut(),n=Rn(),i=kn(),o=function(){return this};return on=function(a,u,s,c){var f=u+" Iterator";return a.prototype=e(t,{next:r(+!c,s)}),n(a,f,!1,!0),i[f]=o,a}}(),a=xn(),u=Mn(),s=Rn(),c=Te(),f=Ve(),l=oe(),d=kn(),p=In(),v=n.PROPER,m=n.CONFIGURABLE,y=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,b=l("iterator"),w="keys",S="values",T="entries",A=function(){return this};return mn=function(n,l,p,h,O,E,k){o(p,l,h);var x,I,R,P=function(t){if(t===O&&B)return B;if(!g&&t&&t in j)return j[t];switch(t){case w:case S:case T:return function(){return new p(this,t)}}return function(){return new p(this)}},C=l+" Iterator",M=!1,j=n.prototype,_=j[b]||j["@@iterator"]||O&&j[O],B=!g&&_||P(O),N="Array"===l&&j.entries||_;if(N&&(x=a(N.call(new n)))!==Object.prototype&&x.next&&(r||a(x)===y||(u?u(x,y):i(x[b])||f(x,b,A)),s(x,C,!0,!0),r&&(d[C]=A)),v&&O===S&&_&&_.name!==S&&(!r&&m?c(j,"name",S):(M=!0,B=function(){return e(_,this)})),O)if(I={values:P(S),keys:E?B:P(w),entries:P(T)},k)for(R in I)(g||M||!(R in j))&&f(j,R,I[R]);else t({target:l,proto:!0,forced:g||M},I);return r&&!k||j[b]===B||f(j,b,B,{name:O}),d[l]=B,I}}function _n(){return gn?hn:(gn=1,hn=function(t,e){return{value:t,done:e}})}function Bn(){if(wn)return bn;wn=1;var t=pt(),e=En(),r=kn(),n=He(),i=Se().f,o=jn(),a=_n(),u=Xt(),s=m(),c="Array Iterator",f=n.set,l=n.getterFor(c);bn=o(Array,"Array",function(e,r){f(this,{type:c,target:t(e),index:0,kind:r})},function(){var t=l(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,a(void 0,!0);switch(t.kind){case"keys":return a(r,!1);case"values":return a(e[r],!1)}return a([r,e[r]],!1)},"values");var d=r.Arguments=r.Array;if(e("keys"),e("values"),e("entries"),!u&&s&&"values"!==d.name)try{i(d,"name",{value:"values"})}catch(t){}return bn}Bn();var Nn,Un,Dn,Ln,Fn,qn,zn,Hn,Wn,Vn,Gn,$n,Yn,Qn,Jn,Kn={};function Xn(){if(Un)return Nn;Un=1;var t=ct();return Nn=Array.isArray||function(e){return"Array"===t(e)}}function Zn(){if(Ln)return Dn;Ln=1;var t={};return t[oe()("toStringTag")]="z",Dn="[object z]"===String(t)}function ti(){if(qn)return Fn;qn=1;var t=Zn(),e=vt(),r=ct(),n=oe()("toStringTag"),i=Object,o="Arguments"===r(function(){return arguments}());return Fn=t?r:function(t){var a,u,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(u=function(t,e){try{return t[e]}catch(t){}}(a=i(t),n))?u:o?r(a):"Object"===(s=r(a))&&e(a.callee)?"Arguments":s}}function ei(){if(Hn)return zn;Hn=1;var t=st(),e=v(),r=vt(),n=ti(),i=yt(),o=Fe(),a=function(){},u=i("Reflect","construct"),s=/^\s*(?:class|function)\b/,c=t(s.exec),f=!s.test(a),l=function(t){if(!r(t))return!1;try{return u(a,[],t),!0}catch(t){return!1}},d=function(t){if(!r(t))return!1;switch(n(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!c(s,o(t))}catch(t){return!0}};return d.sham=!0,zn=!u||e(function(){var t;return l(l.call)||!l(Object)||!l(function(){t=!0})||t})?d:l}function ri(){if(Vn)return Wn;Vn=1;var t=m(),e=Se(),r=ut();return Wn=function(n,i,o){t?e.f(n,i,r(0,o)):n[i]=o}}function ni(){if($n)return Gn;$n=1;var t=v(),e=oe(),r=bt(),n=e("species");return Gn=function(e){return r>=51||!t(function(){var t=[];return(t.constructor={})[n]=function(){return{foo:1}},1!==t[e](Boolean).foo})}}function ii(){if(Qn)return Yn;Qn=1;var t=st();return Yn=t([].slice)}!function(){if(Jn)return Kn;Jn=1;var t=Nr(),e=Xn(),r=ei(),n=mt(),i=lr(),o=pr(),a=pt(),u=ri(),s=oe(),c=ni(),f=ii(),l=c("slice"),d=s("species"),p=Array,v=Math.max;t({target:"Array",proto:!0,forced:!l},{slice:function(t,s){var c,l,m,y=a(this),h=o(y),g=i(t,h),b=i(void 0===s?h:s,h);if(e(y)&&(c=y.constructor,(r(c)&&(c===p||e(c.prototype))||n(c)&&null===(c=c[d]))&&(c=void 0),c===p||void 0===c))return f(y,g,b);for(l=new(void 0===c?p:c)(v(b-g,0)),m=0;g<b;g++,m++)g in y&&u(l,m,y[g]);return l.length=m,l}})}();var oi,ai,ui,si,ci,fi,li,di,pi,vi,mi,yi={};function hi(){if(si)return ui;si=1;var t=TypeError;return ui=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}}function gi(){if(fi)return ci;fi=1;var t=Xn(),e=ei(),r=mt(),n=oe()("species"),i=Array;return ci=function(o){var a;return t(o)&&(a=o.constructor,(e(a)&&(a===i||t(a.prototype))||r(a)&&null===(a=a[n]))&&(a=void 0)),void 0===a?i:a}}function bi(){if(di)return li;di=1;var t=gi();return li=function(e,r){return new(t(e))(0===r?0:r)}}function wi(){if(vi)return pi;vi=1;var t=At(),e=TypeError;return pi=function(r,n){if(!delete r[n])throw new e("Cannot delete property "+t(n)+" of "+t(r))}}!function(){if(mi)return yi;mi=1;var t=Nr(),e=re(),r=lr(),n=fr(),i=pr(),o=function(){if(ai)return oi;ai=1;var t=m(),e=Xn(),r=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();return oi=i?function(t,i){if(e(t)&&!n(t,"length").writable)throw new r("Cannot set read only .length");return t.length=i}:function(t,e){return t.length=e}}(),a=hi(),u=bi(),s=ri(),c=wi(),f=ni()("splice"),l=Math.max,d=Math.min;t({target:"Array",proto:!0,forced:!f},{splice:function(t,f){var p,v,m,y,h,g,b=e(this),w=i(b),S=r(t,w),T=arguments.length;for(0===T?p=v=0:1===T?(p=0,v=w-S):(p=T-2,v=d(l(n(f),0),w-S)),a(w+p-v),m=u(b,v),y=0;y<v;y++)(h=S+y)in b&&s(m,y,b[h]);if(m.length=v,p<v){for(y=S;y<w-v;y++)g=y+p,(h=y+v)in b?b[g]=b[h]:c(b,g);for(y=w;y>w-v+p;y--)c(b,y-1)}else if(p>v)for(y=w-v;y>S;y--)g=y+p-1,(h=y+v-1)in b?b[g]=b[h]:c(b,g);for(y=0;y<p;y++)b[y+S]=arguments[y+2];return o(b,w-v+p),m}})}();var Si,Ti,Ai,Oi={};!function(){if(Ai)return Oi;Ai=1;var t=Zn(),e=Ve(),r=function(){if(Ti)return Si;Ti=1;var t=Zn(),e=ti();return Si=t?{}.toString:function(){return"[object "+e(this)+"]"}}();t||e(Object.prototype,"toString",r,{unsafe:!0})}();var Ei,ki,xi,Ii,Ri,Pi,Ci,Mi,ji,_i,Bi,Ni,Ui,Di,Li,Fi,qi,zi,Hi,Wi,Vi,Gi,$i,Yi,Qi,Ji,Ki,Xi,Zi,to,eo,ro,no,io,oo,ao,uo,so,co={exports:{}},fo={};function lo(){if(Ei)return fo;Ei=1;var t=ct(),e=pt(),r=hr().f,n=ii(),i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];return fo.f=function(o){return i&&"Window"===t(o)?function(t){try{return r(t)}catch(t){return n(i)}}(o):r(e(o))},fo}function po(){if(Ri)return Ii;Ri=1;var t=v(),e=mt(),r=ct(),n=function(){if(xi)return ki;xi=1;var t=v();return ki=t(function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})}(),i=Object.isExtensible,o=t(function(){});return Ii=o||n?function(t){return!!e(t)&&((!n||"ArrayBuffer"!==r(t))&&(!i||i(t)))}:i}function vo(){if(Mi)return co.exports;Mi=1;var t=Nr(),e=st(),r=ze(),n=mt(),i=ne(),o=Se().f,a=hr(),u=lo(),s=po(),c=ie(),f=function(){if(Ci)return Pi;Ci=1;var t=v();return Pi=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})}(),l=!1,d=c("meta"),p=0,m=function(t){o(t,d,{value:{objectID:"O"+p++,weakData:{}}})},y=co.exports={enable:function(){y.enable=function(){},l=!0;var r=a.f,n=e([].splice),i={};i[d]=1,r(i).length&&(a.f=function(t){for(var e=r(t),i=0,o=e.length;i<o;i++)if(e[i]===d){n(e,i,1);break}return e},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,d)){if(!s(t))return"F";if(!e)return"E";m(t)}return t[d].objectID},getWeakData:function(t,e){if(!i(t,d)){if(!s(t))return!0;if(!e)return!1;m(t)}return t[d].weakData},onFreeze:function(t){return f&&l&&s(t)&&!i(t,d)&&m(t),t}};return r[d]=!0,co.exports}function mo(){if(_i)return ji;_i=1;var t=Ur(),e=Ot(),r=y(),n=t(t.bind);return ji=function(t,i){return e(t),void 0===i?t:r?n(t,i):function(){return t.apply(i,arguments)}},ji}function yo(){if(Ni)return Bi;Ni=1;var t=oe(),e=kn(),r=t("iterator"),n=Array.prototype;return Bi=function(t){return void 0!==t&&(e.Array===t||n[r]===t)}}function ho(){if(Di)return Ui;Di=1;var t=ti(),e=Et(),r=lt(),n=kn(),i=oe()("iterator");return Ui=function(o){if(!r(o))return e(o,i)||e(o,"@@iterator")||n[t(o)]}}function go(){if(Fi)return Li;Fi=1;var t=h(),e=Ot(),r=we(),n=At(),i=ho(),o=TypeError;return Li=function(a,u){var s=arguments.length<2?i(a):u;if(e(s))return r(t(s,a));throw new o(n(a)+" is not iterable")},Li}function bo(){if(zi)return qi;zi=1;var t=h(),e=we(),r=Et();return qi=function(n,i,o){var a,u;e(n);try{if(!(a=r(n,"return"))){if("throw"===i)throw o;return o}a=t(a,n)}catch(t){u=!0,a=t}if("throw"===i)throw o;if(u)throw a;return e(a),o}}function wo(){if(Wi)return Hi;Wi=1;var t=mo(),e=h(),r=we(),n=At(),i=yo(),o=pr(),a=ht(),u=go(),s=ho(),c=bo(),f=TypeError,l=function(t,e){this.stopped=t,this.result=e},d=l.prototype;return Hi=function(p,v,m){var y,h,g,b,w,S,T,A=m&&m.that,O=!(!m||!m.AS_ENTRIES),E=!(!m||!m.IS_RECORD),k=!(!m||!m.IS_ITERATOR),x=!(!m||!m.INTERRUPTED),I=t(v,A),R=function(t){return y&&c(y,"normal"),new l(!0,t)},P=function(t){return O?(r(t),x?I(t[0],t[1],R):I(t[0],t[1])):x?I(t,R):I(t)};if(E)y=p.iterator;else if(k)y=p;else{if(!(h=s(p)))throw new f(n(p)+" is not iterable");if(i(h)){for(g=0,b=o(p);b>g;g++)if((w=P(p[g]))&&a(d,w))return w;return new l(!1)}y=u(p,h)}for(S=E?p.next:y.next;!(T=e(S,y)).done;){try{w=P(T.value)}catch(t){c(y,"throw",t)}if("object"==typeof w&&w&&a(d,w))return w}return new l(!1)}}function So(){if(Gi)return Vi;Gi=1;var t=ht(),e=TypeError;return Vi=function(r,n){if(t(n,r))return r;throw new e("Incorrect invocation")}}function To(){if(Yi)return $i;Yi=1;var t=oe()("iterator"),e=!1;try{var r=0,n={next:function(){return{done:!!r++}},return:function(){e=!0}};n[t]=function(){return this},Array.from(n,function(){throw 2})}catch(t){}return $i=function(r,n){try{if(!n&&!e)return!1}catch(t){return!1}var i=!1;try{var o={};o[t]=function(){return{next:function(){return{done:i=!0}}}},r(o)}catch(t){}return i}}function Ao(){if(Ji)return Qi;Ji=1;var t=vt(),e=mt(),r=Mn();return Qi=function(n,i,o){var a,u;return r&&t(a=i.constructor)&&a!==o&&e(u=a.prototype)&&u!==o.prototype&&r(n,u),n}}function Oo(){if(Xi)return Ki;Xi=1;var t=Nr(),e=i(),r=st(),n=Br(),o=Ve(),a=vo(),u=wo(),s=So(),c=vt(),f=lt(),l=mt(),d=v(),p=To(),m=Rn(),y=Ao();return Ki=function(i,v,h){var g=-1!==i.indexOf("Map"),b=-1!==i.indexOf("Weak"),w=g?"set":"add",S=e[i],T=S&&S.prototype,A=S,O={},E=function(t){var e=r(T[t]);o(T,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return!(b&&!l(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return b&&!l(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return!(b&&!l(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(n(i,!c(S)||!(b||T.forEach&&!d(function(){(new S).entries().next()}))))A=h.getConstructor(v,i,g,w),a.enable();else if(n(i,!0)){var k=new A,x=k[w](b?{}:-0,1)!==k,I=d(function(){k.has(1)}),R=p(function(t){new S(t)}),P=!b&&d(function(){for(var t=new S,e=5;e--;)t[w](e,e);return!t.has(-0)});R||((A=v(function(t,e){s(t,T);var r=y(new S,t,A);return f(e)||u(e,r[w],{that:r,AS_ENTRIES:g}),r})).prototype=T,T.constructor=A),(I||P)&&(E("delete"),E("has"),g&&E("get")),(P||x)&&E(w),b&&T.clear&&delete T.clear}return O[i]=A,t({global:!0,constructor:!0,forced:A!==S},O),m(A,i),b||h.setStrong(A,i,g),A}}function Eo(){if(to)return Zi;to=1;var t=We(),e=Se();return Zi=function(r,n,i){return i.get&&t(i.get,n,{getter:!0}),i.set&&t(i.set,n,{setter:!0}),e.f(r,n,i)}}function ko(){if(ro)return eo;ro=1;var t=Ve();return eo=function(e,r,n){for(var i in r)t(e,i,r[i],n);return e}}function xo(){if(io)return no;io=1;var t=yt(),e=Eo(),r=oe(),n=m(),i=r("species");return no=function(r){var o=t(r);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})}}function Io(){if(ao)return oo;ao=1;var t=On(),e=Eo(),r=ko(),n=mo(),i=So(),o=lt(),a=wo(),u=jn(),s=_n(),c=xo(),f=m(),l=vo().fastKey,d=He(),p=d.set,v=d.getterFor;return oo={getConstructor:function(u,s,c,d){var m=u(function(e,r){i(e,y),p(e,{type:s,index:t(null),first:null,last:null,size:0}),f||(e.size=0),o(r)||a(r,e[d],{that:e,AS_ENTRIES:c})}),y=m.prototype,h=v(s),g=function(t,e,r){var n,i,o=h(t),a=b(t,e);return a?a.value=r:(o.last=a={index:i=l(e,!0),key:e,value:r,previous:n=o.last,next:null,removed:!1},o.first||(o.first=a),n&&(n.next=a),f?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},b=function(t,e){var r,n=h(t),i=l(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key===e)return r};return r(y,{clear:function(){for(var e=h(this),r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=null),r=r.next;e.first=e.last=null,e.index=t(null),f?e.size=0:this.size=0},delete:function(t){var e=this,r=h(e),n=b(e,t);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first===n&&(r.first=i),r.last===n&&(r.last=o),f?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=h(this),i=n(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!b(this,t)}}),r(y,c?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),f&&e(y,"size",{configurable:!0,get:function(){return h(this).size}}),m},setStrong:function(t,e,r){var n=e+" Iterator",i=v(e),o=v(n);u(t,e,function(t,e){p(this,{type:n,target:t,state:i(t),kind:e,last:null})},function(){for(var t=o(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?s("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=null,s(void 0,!0))},r?"entries":"values",!r,!0),c(e)}},oo}so||(so=1,uo||(uo=1,Oo()("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Io())));var Ro,Po,Co,Mo,jo,_o={};function Bo(){if(Po)return Ro;Po=1;var t=ti(),e=String;return Ro=function(r){if("Symbol"===t(r))throw new TypeError("Cannot convert a Symbol value to a string");return e(r)}}function No(){if(Mo)return Co;Mo=1;var t=st(),e=fr(),r=Bo(),n=dt(),i=t("".charAt),o=t("".charCodeAt),a=t("".slice),u=function(t){return function(u,s){var c,f,l=r(n(u)),d=e(s),p=l.length;return d<0||d>=p?t?"":void 0:(c=o(l,d))<55296||c>56319||d+1===p||(f=o(l,d+1))<56320||f>57343?t?i(l,d):c:t?a(l,d,d+2):f-56320+(c-55296<<10)+65536}};return Co={codeAt:u(!1),charAt:u(!0)}}!function(){if(jo)return _o;jo=1;var t=No().charAt,e=Bo(),r=He(),n=jn(),i=_n(),o="String Iterator",a=r.set,u=r.getterFor(o);n(String,"String",function(t){a(this,{type:o,string:e(t),index:0})},function(){var e,r=u(this),n=r.string,o=r.index;return o>=n.length?i(void 0,!0):(e=t(n,o),r.index+=e.length,i(e,!1))})}();var Uo,Do,Lo={};Do||(Do=1,function(){if(Uo)return Lo;Uo=1;var t=Nr(),e=i();t({global:!0,forced:e.globalThis!==e},{globalThis:e})}());var Fo,qo,zo,Ho,Wo,Vo,Go,$o,Yo,Qo={};function Jo(){return qo?Fo:(qo=1,Fo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})}function Ko(){if(Ho)return zo;Ho=1;var t=se()("span").classList,e=t&&t.constructor&&t.constructor.prototype;return zo=e===Object.prototype?void 0:e}function Xo(){if(Vo)return Wo;Vo=1;var t=mo(),e=st(),r=ft(),n=re(),i=pr(),o=bi(),a=e([].push),u=function(e){var u=1===e,s=2===e,c=3===e,f=4===e,l=6===e,d=7===e,p=5===e||l;return function(v,m,y,h){for(var g,b,w=n(v),S=r(w),T=i(S),A=t(m,y),O=0,E=h||o,k=u?E(v,T):s||d?E(v,0):void 0;T>O;O++)if((p||O in S)&&(b=A(g=S[O],O,w),e))if(u)k[O]=b;else if(b)switch(e){case 3:return!0;case 5:return g;case 6:return O;case 2:a(k,g)}else switch(e){case 4:return!1;case 7:a(k,g)}return l?-1:c||f?f:k}};return Wo={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}}!function(){if(Yo)return Qo;Yo=1;var t=i(),e=Jo(),r=Ko(),n=function(){if($o)return Go;$o=1;var t=Xo().forEach,e=Dr()("forEach");return Go=e?[].forEach:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)},Go}(),o=Te(),a=function(t){if(t&&t.forEach!==n)try{o(t,"forEach",n)}catch(e){t.forEach=n}};for(var u in e)e[u]&&a(t[u]&&t[u].prototype);a(r)}();var Zo,ta={};!function(){if(Zo)return ta;Zo=1;var t=i(),e=Jo(),r=Ko(),n=Bn(),o=Te(),a=Rn(),u=oe()("iterator"),s=n.values,c=function(t,r){if(t){if(t[u]!==s)try{o(t,u,s)}catch(e){t[u]=s}if(a(t,r,!0),e[r])for(var i in n)if(t[i]!==n[i])try{o(t,i,n[i])}catch(e){t[i]=n[i]}}};for(var f in e)c(t[f]&&t[f].prototype,f);c(r,"DOMTokenList")}(),function(t){var e=!(!t.starmusConfig||!t.starmusConfig.debug);function r(){if(e)try{(console.log||function(){}).apply(console,arguments)}catch(t){}}var n="function"==typeof Set,i={},o={};void 0===t.StarmusHooks&&(t.StarmusHooks={}),t.StarmusHooks.subscribe=function(t,e){var r,o;return i[t]||(i[t]=n?new Set:[]),r=i[t],o=e,n?r.add(o):-1===r.indexOf(o)&&r.push(o),function(){i[t]&&function(t,e){if(n)t.delete(e);else{var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}(i[t],e)}},t.StarmusHooks.dispatch=function(t,e,a){e=e||{};var u=t+"::"+((a=a||{}).instanceId||"");if(o[u])r("Prevented recursive dispatch:",t);else{o[u]=!0;try{var s=i[t];if(!s)return;!function(t,e){if(n)t.forEach(e);else for(var r=t.slice(),i=0;i<r.length;i++)e(r[i])}(s,function(r){try{r(e,a)}catch(e){console.error("Error executing handler for command "+t+":",e)}})}finally{delete o[u]}}},t.StarmusHooks.debugLog=r}("undefined"!=typeof window?window:globalThis);var ea="undefined"!=typeof window?window:globalThis,ra=ea.StarmusHooks&&ea.StarmusHooks.debugLog||function(){};ea.StarmusHooks&&ea.StarmusHooks.dispatch,ea.StarmusHooks&&ea.StarmusHooks.subscribe,"undefined"!=typeof module&&module.exports&&(module.exports={debugLog:ra,subscribe:ea.StarmusHooks.subscribe,dispatch:ea.StarmusHooks.dispatch});var na,ia={};function oa(t){var e={instanceId:null,env:{},tier:null,status:"uninitialized",error:null,source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""},calibration:{phase:null,message:"",volumePercent:0,complete:!1,gain:1},recorder:{duration:0,amplitude:0,isPlaying:!1,isPaused:!1},submission:{progress:0,isQueued:!1}};function r(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function n(t,e){var n=r(t);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}var i=n(e,t||{}),o=[];return{getState:function(){return i},dispatch:function(t){i=function(t,i){if(!i||!i.type)return t;switch(!t.instanceId&&i.payload&&i.payload.instanceId&&(t=n(t,{instanceId:i.payload.instanceId})),i.type){case"starmus/tier-ready":return t.tier?t:n(t,{tier:i.payload&&i.payload.tier?i.payload.tier:t.tier});case"starmus/init":return n(t,n(i.payload||{},{status:"idle",error:null}));case"starmus/ui/step-continue":return n(t,{status:"ready_to_record",error:null});case"starmus/calibration-start":return n(t,{status:"calibrating"});case"starmus/calibration-update":return n(t,{calibration:n(t.calibration,{message:i.message,volumePercent:i.volumePercent})});case"starmus/calibration-complete":return n(t,{status:"ready",calibration:n(t.calibration,n(i.calibration||{},{complete:!0}))});case"starmus/mic-start":return n(t,{status:"recording",error:null,recorder:n(t.recorder,{duration:0,amplitude:0,isPaused:!1})});case"starmus/mic-pause":return n(t,{status:"paused",recorder:n(t.recorder,{isPaused:!0})});case"starmus/mic-resume":return n(t,{status:"recording",recorder:n(t.recorder,{isPaused:!1})});case"starmus/mic-stop":return n(t,{status:"processing"});case"starmus/recorder-tick":return n(t,{recorder:n(t.recorder,{duration:i.duration,amplitude:i.amplitude})});case"starmus/recording-available":return n(t,{status:"ready_to_submit",source:n(t.source,{kind:"blob",blob:i.payload.blob,fileName:i.payload.fileName})});case"starmus/recorder-playback-state":return n(t,{recorder:n(t.recorder,{isPlaying:i.isPlaying})});case"starmus/transcript-update":return n(t,{source:n(t.source,{transcript:i.transcript})});case"starmus/transcript-interim":return n(t,{source:n(t.source,{interimTranscript:i.interim})});case"starmus/env-update":return n(t,{env:n(t.env,i.payload||{}),tier:i.tier||t.tier});case"starmus/file-attached":return n(t,{status:"ready_to_submit",source:{kind:"file",file:i.file,fileName:i.file.name}});case"starmus/submit-start":return n(t,{status:"submitting",error:null});case"starmus/submit-progress":return n(t,{submission:n(t.submission,{progress:i.progress})});case"starmus/submit-complete":return n(t,{status:"complete",submission:{progress:1,isQueued:!1}});case"starmus/submit-queued":return n(t,{status:"complete",submission:{progress:0,isQueued:!0}});case"starmus/error":return n(t,{error:i.error||i.payload});case"starmus/reset":return n(r(e),{instanceId:t.instanceId,env:t.env,tier:t.tier,status:"idle",source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""}});default:return t}}(i,t);for(var a=0;a<o.length;a++)try{o[a](i)}catch(t){console.error(t)}},subscribe:function(t){return-1===o.indexOf(t)&&o.push(t),function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}}}}function aa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ua(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function sa(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){ua(o,n,i,a,u,"next",t)}function u(t){ua(o,n,i,a,u,"throw",t)}a(void 0)})}}function ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fa(t,e,r){return e&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ga(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function la(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wa(t))||e){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function da(t,e,r){return(e=ga(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function va(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var s=n&&n.prototype instanceof u?n:u,c=Object.create(s.prototype);return ma(c,"_invoke",function(r,n,i){var o,u,s,c=0,f=i||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return o=e,u=0,s=t,d.n=r,a}};function p(r,n){for(u=r,s=n,e=0;!l&&c&&!i&&e<f.length;e++){var i,o=f[e],p=d.p,v=o[2];r>3?(i=v===n)&&(s=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=r<2&&p<o[1])?(u=0,d.v=n,d.n=o[1]):p<v&&(i=r<3||o[0]>n||n>v)&&(o[4]=r,o[5]=n,d.n=v,u=0))}if(i||r>1)return a;throw l=!0,n}return function(i,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),u=f,s=v;(e=u<2?t:s)||!l;){o||(u?u<3?(u>1&&(d.n=-1),p(u,s)):d.n=s:d.v=s);try{if(c=2,o){if(u||(i="next"),e=o[i]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=t}else if((e=(l=d.n<0)?s:r.call(n,d))!==a)break}catch(e){o=t,u=1,s=e}finally{c=1}}return{value:e,done:l}}}(r,i,o),!0),c}var a={};function u(){}function s(){}function c(){}e=Object.getPrototypeOf;var f=[][n]?e(e([][n]())):(ma(e={},n,function(){return this}),e),l=c.prototype=u.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ma(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return s.prototype=c,ma(l,"constructor",c),ma(c,"constructor",s),s.displayName="GeneratorFunction",ma(c,i,"GeneratorFunction"),ma(l),ma(l,i,"Generator"),ma(l,n,function(){return this}),ma(l,"toString",function(){return"[object Generator]"}),(va=function(){return{w:o,m:d}})()}function ma(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}ma=function(t,e,r,n){function o(e,r){ma(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(o("next",0),o("throw",1),o("return",2))},ma(t,e,r,n)}function ya(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(typeof t+" is not iterable")}function ha(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e);else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,i=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(t,e)||wa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ga(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function wa(t,e){if(t){if("string"==typeof t)return aa(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aa(t,e):void 0}}!function(){if(na)return ia;na=1;var t=m(),e=Le().EXISTS,r=st(),n=Eo(),i=Function.prototype,o=r(i.toString),a=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=r(a.exec);t&&!e&&n(i,"name",{configurable:!0,get:function(){try{return u(a,o(this))[1]}catch(t){return""}}})}(),function(t){var e={instanceId:null,env:{},tier:null,status:"uninitialized",error:null,source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""},calibration:{phase:null,message:"",volumePercent:0,complete:!1,gain:1},recorder:{duration:0,amplitude:0,isPlaying:!1,isPaused:!1},submission:{progress:0,isQueued:!1}};function r(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function n(t,e){var n=r(t);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function i(t){var i=n(e,t||{}),o=[];return{getState:function(){return i},dispatch:function(t){i=function(t,i){if(!i||!i.type)return t;switch(!t.instanceId&&i.payload&&i.payload.instanceId&&(t=n(t,{instanceId:i.payload.instanceId})),i.type){case"starmus/tier-ready":return t.tier?t:n(t,{tier:i.payload&&i.payload.tier?i.payload.tier:t.tier});case"starmus/init":return n(t,n(i.payload||{},{status:"idle",error:null}));case"starmus/ui/step-continue":return n(t,{status:"ready_to_record",error:null});case"starmus/calibration-start":return n(t,{status:"calibrating"});case"starmus/calibration-update":return n(t,{calibration:n(t.calibration,{message:i.message,volumePercent:i.volumePercent})});case"starmus/calibration-complete":return n(t,{status:"ready",calibration:n(t.calibration,n(i.calibration||{},{complete:!0}))});case"starmus/mic-start":return n(t,{status:"recording",error:null,recorder:n(t.recorder,{duration:0,amplitude:0,isPaused:!1})});case"starmus/mic-pause":return n(t,{status:"paused",recorder:n(t.recorder,{isPaused:!0})});case"starmus/mic-resume":return n(t,{status:"recording",recorder:n(t.recorder,{isPaused:!1})});case"starmus/mic-stop":return n(t,{status:"processing"});case"starmus/recorder-tick":return n(t,{recorder:n(t.recorder,{duration:i.duration,amplitude:i.amplitude})});case"starmus/recording-available":return n(t,{status:"ready_to_submit",source:n(t.source,{kind:"blob",blob:i.payload.blob,fileName:i.payload.fileName})});case"starmus/recorder-playback-state":return n(t,{recorder:n(t.recorder,{isPlaying:i.isPlaying})});case"starmus/transcript-update":return n(t,{source:n(t.source,{transcript:i.transcript})});case"starmus/transcript-interim":return n(t,{source:n(t.source,{interimTranscript:i.interim})});case"starmus/env-update":return n(t,{env:n(t.env,i.payload||{}),tier:i.tier||t.tier});case"starmus/file-attached":return n(t,{status:"ready_to_submit",source:{kind:"file",file:i.file,fileName:i.file.name}});case"starmus/submit-start":return n(t,{status:"submitting",error:null});case"starmus/submit-progress":return n(t,{submission:n(t.submission,{progress:i.progress})});case"starmus/submit-complete":return n(t,{status:"complete",submission:{progress:1,isQueued:!1}});case"starmus/submit-queued":return n(t,{status:"complete",submission:{progress:0,isQueued:!0}});case"starmus/error":return n(t,{error:i.error||i.payload});case"starmus/reset":return n(r(e),{instanceId:t.instanceId,env:t.env,tier:t.tier,status:"idle",source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""}});default:return t}}(i,t);for(var a=0;a<o.length;a++)try{o[a](i)}catch(t){console.error(t)}},subscribe:function(t){return-1===o.indexOf(t)&&o.push(t),function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}}}}"undefined"!=typeof module&&module.exports?module.exports={createStore:i}:"undefined"!=typeof exports?exports.createStore=i:(t.StarmusStore=t.StarmusStore||{},t.StarmusStore.createStore=i)}("undefined"!=typeof window?window:globalThis),"undefined"!=typeof window&&(window.StarmusStore=window.StarmusStore||{},window.StarmusStore.createStore=oa),"undefined"!=typeof module&&module.exports&&(module.exports={createStore:oa}),"undefined"!=typeof exports&&(exports.createStore=oa);var Sa,Ta={};!function(){if(Sa)return Ta;Sa=1;var t=Nr(),e=v(),r=Xn(),n=mt(),i=re(),o=pr(),a=hi(),u=ri(),s=bi(),c=ni(),f=oe(),l=bt(),d=f("isConcatSpreadable"),p=l>=51||!e(function(){var t=[];return t[d]=!1,t.concat()[0]!==t}),m=function(t){if(!n(t))return!1;var e=t[d];return void 0!==e?!!e:r(t)};t({target:"Array",proto:!0,arity:1,forced:!p||!c("concat")},{concat:function(t){var e,r,n,c,f,l=i(this),d=s(l,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(m(f=-1===e?l:arguments[e]))for(c=o(f),a(p+c),r=0;r<c;r++,p++)r in f&&u(d,p,f[r]);else a(p+1),u(d,p++,f);return d.length=p,d}})}();var Aa,Oa={};!function(){if(Aa)return Oa;Aa=1;var t=Nr(),e=st(),r=ft(),n=pt(),i=Dr(),o=e([].join);t({target:"Array",proto:!0,forced:r!==Object||!i("join",",")},{join:function(t){return o(n(this),void 0===t?",":t)}})}();var Ea,ka,xa,Ia,Ra,Pa,Ca,Ma={};function ja(){if(ka)return Ea;ka=1;var t=Ot(),e=re(),r=ft(),n=pr(),i=TypeError,o="Reduce of empty array with no initial value",a=function(a){return function(u,s,c,f){var l=e(u),d=r(l),p=n(l);if(t(s),0===p&&c<2)throw new i(o);var v=a?p-1:0,m=a?-1:1;if(c<2)for(;;){if(v in d){f=d[v],v+=m;break}if(v+=m,a?v<0:p<=v)throw new i(o)}for(;a?v>=0:p>v;v+=m)v in d&&(f=s(f,d[v],v,l));return f}};return Ea={left:a(!1),right:a(!0)}}function _a(){if(Ia)return xa;Ia=1;var t=i(),e=gt(),r=ct(),n=function(t){return e.slice(0,t.length)===t};return xa=n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&"string"==typeof Bun.version?"BUN":t.Deno&&"object"==typeof Deno.version?"DENO":"process"===r(t.process)?"NODE":t.window&&t.document?"BROWSER":"REST"}function Ba(){if(Pa)return Ra;Pa=1;var t=_a();return Ra="NODE"===t}!function(){if(Ca)return Ma;Ca=1;var t=Nr(),e=ja().left,r=Dr(),n=bt();t({target:"Array",proto:!0,forced:!Ba()&&n>79&&n<83||!r("reduce")},{reduce:function(t){var r=arguments.length;return e(this,t,r,r>1?arguments[1]:void 0)}})}();var Na,Ua,Da,La={};!function(){if(Da)return La;Da=1;var t=Nr(),e=function(){if(Ua)return Na;Ua=1;var t=m(),e=v(),r=st(),n=xn(),i=Tn(),o=pt(),a=r(at().f),u=r([].push),s=t&&e(function(){var t=Object.create(null);return t[2]=2,!a(t,2)}),c=function(e){return function(r){for(var c,f=o(r),l=i(f),d=s&&null===n(f),p=l.length,v=0,m=[];p>v;)c=l[v++],t&&!(d?c in f:a(f,c))||u(m,e?[c,f[c]]:f[c]);return m}};return Na={entries:c(!0),values:c(!1)}}().entries;t({target:"Object",stat:!0},{entries:function(t){return e(t)}})}();var Fa,qa={};!function(){if(Fa)return qa;Fa=1;var t=Nr(),e=re(),r=Tn();t({target:"Object",stat:!0,forced:v()(function(){r(1)})},{keys:function(t){return r(e(t))}})}();var za,Ha,Wa,Va,Ga,$a,Ya,Qa,Ja,Ka,Xa,Za,tu,eu,ru,nu,iu,ou,au,uu,su,cu,fu,lu,du,pu,vu,mu,yu,hu,gu,bu,wu={};function Su(){if(Ha)return za;Ha=1;var t=i();return za=t}function Tu(){if(Va)return Wa;Va=1;var t=ei(),e=At(),r=TypeError;return Wa=function(n){if(t(n))return n;throw new r(e(n)+" is not a constructor")}}function Au(){if($a)return Ga;$a=1;var t=we(),e=Tu(),r=lt(),n=oe()("species");return Ga=function(i,o){var a,u=t(i).constructor;return void 0===u||r(a=t(u)[n])?o:e(a)}}function Ou(){if(Qa)return Ya;Qa=1;var t=y(),e=Function.prototype,r=e.apply,n=e.call;return Ya="object"==typeof Reflect&&Reflect.apply||(t?n.bind(r):function(){return n.apply(r,arguments)}),Ya}function Eu(){if(Ka)return Ja;Ka=1;var t=TypeError;return Ja=function(e,r){if(e<r)throw new t("Not enough arguments");return e}}function ku(){if(Za)return Xa;Za=1;var t=gt();return Xa=/(?:ipad|iphone|ipod).*applewebkit/i.test(t)}function xu(){if(eu)return tu;eu=1;var t,e,r,n,o=i(),a=Ou(),u=mo(),s=vt(),c=ne(),f=v(),l=An(),d=ii(),p=se(),m=Eu(),y=ku(),h=Ba(),g=o.setImmediate,b=o.clearImmediate,w=o.process,S=o.Dispatch,T=o.Function,A=o.MessageChannel,O=o.String,E=0,k={},x="onreadystatechange";f(function(){t=o.location});var I=function(t){if(c(k,t)){var e=k[t];delete k[t],e()}},R=function(t){return function(){I(t)}},P=function(t){I(t.data)},C=function(e){o.postMessage(O(e),t.protocol+"//"+t.host)};return g&&b||(g=function(t){m(arguments.length,1);var r=s(t)?t:T(t),n=d(arguments,1);return k[++E]=function(){a(r,void 0,n)},e(E),E},b=function(t){delete k[t]},h?e=function(t){w.nextTick(R(t))}:S&&S.now?e=function(t){S.now(R(t))}:A&&!y?(n=(r=new A).port2,r.port1.onmessage=P,e=u(n.postMessage,n)):o.addEventListener&&s(o.postMessage)&&!o.importScripts&&t&&"file:"!==t.protocol&&!f(C)?(e=C,o.addEventListener("message",P,!1)):e=x in p("script")?function(t){l.appendChild(p("script"))[x]=function(){l.removeChild(this),I(t)}}:function(t){setTimeout(R(t),0)}),tu={set:g,clear:b}}function Iu(){if(nu)return ru;nu=1;var t=i(),e=m(),r=Object.getOwnPropertyDescriptor;return ru=function(n){if(!e)return t[n];var i=r(t,n);return i&&i.value}}function Ru(){if(ou)return iu;ou=1;var t=function(){this.head=null,this.tail=null};return t.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},iu=t}function Pu(){if(lu)return fu;lu=1;var t,e,r,n,o,a=i(),u=Iu(),s=mo(),c=xu().set,f=Ru(),l=ku(),d=function(){if(uu)return au;uu=1;var t=gt();return au=/ipad|iphone|ipod/i.test(t)&&"undefined"!=typeof Pebble}(),p=function(){if(cu)return su;cu=1;var t=gt();return su=/web0s(?!.*chrome)/i.test(t)}(),v=Ba(),m=a.MutationObserver||a.WebKitMutationObserver,y=a.document,h=a.process,g=a.Promise,b=u("queueMicrotask");if(!b){var w=new f,S=function(){var e,r;for(v&&(e=h.domain)&&e.exit();r=w.get();)try{r()}catch(e){throw w.head&&t(),e}e&&e.enter()};l||v||p||!m||!y?!d&&g&&g.resolve?((n=g.resolve(void 0)).constructor=g,o=s(n.then,n),t=function(){o(S)}):v?t=function(){h.nextTick(S)}:(c=s(c,a),t=function(){c(S)}):(e=!0,r=y.createTextNode(""),new m(S).observe(r,{characterData:!0}),t=function(){r.data=e=!e}),b=function(e){w.head||t(),w.add(e)}}return fu=b}function Cu(){return pu||(pu=1,du=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}),du}function Mu(){return mu?vu:(mu=1,vu=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}})}function ju(){if(hu)return yu;hu=1;var t=i();return yu=t.Promise}function _u(){if(bu)return gu;bu=1;var t=i(),e=ju(),r=vt(),n=Br(),o=Fe(),a=oe(),u=_a(),s=Xt(),c=bt(),f=e&&e.prototype,l=a("species"),d=!1,p=r(t.PromiseRejectionEvent),v=n("Promise",function(){var t=o(e),r=t!==String(e);if(!r&&66===c)return!0;if(s&&(!f.catch||!f.finally))return!0;if(!c||c<51||!/native code/.test(t)){var n=new e(function(t){t(1)}),i=function(t){t(function(){},function(){})};if((n.constructor={})[l]=i,!(d=n.then(function(){})instanceof i))return!0}return!(r||"BROWSER"!==u&&"DENO"!==u||p)});return gu={CONSTRUCTOR:v,REJECTION_EVENT:p,SUBCLASSING:d}}var Bu,Nu,Uu={};function Du(){if(Bu)return Uu;Bu=1;var t=Ot(),e=TypeError,r=function(r){var n,i;this.promise=new r(function(t,r){if(void 0!==n||void 0!==i)throw new e("Bad Promise constructor");n=t,i=r}),this.resolve=t(n),this.reject=t(i)};return Uu.f=function(t){return new r(t)},Uu}var Lu,Fu,qu,zu={};function Hu(){if(Fu)return Lu;Fu=1;var t=ju(),e=To(),r=_u().CONSTRUCTOR;return Lu=r||!e(function(e){t.all(e).then(void 0,function(){})})}var Wu,Vu={};var Gu,$u={};var Yu,Qu={};var Ju,Ku,Xu,Zu,ts={};function es(){if(Ku)return Ju;Ku=1;var t=we(),e=mt(),r=Du();return Ju=function(n,i){if(t(n),e(i)&&i.constructor===n)return i;var o=r.f(n);return(0,o.resolve)(i),o.promise}}Zu||(Zu=1,function(){if(Nu)return wu;Nu=1;var t,e,r,n,o=Nr(),a=Xt(),u=Ba(),s=i(),c=Su(),f=h(),l=Ve(),d=Mn(),p=Rn(),v=xo(),m=Ot(),y=vt(),g=mt(),b=So(),w=Au(),S=xu().set,T=Pu(),A=Cu(),O=Mu(),E=Ru(),k=He(),x=ju(),I=_u(),R=Du(),P="Promise",C=I.CONSTRUCTOR,M=I.REJECTION_EVENT,j=I.SUBCLASSING,_=k.getterFor(P),B=k.set,N=x&&x.prototype,U=x,D=N,L=s.TypeError,F=s.document,q=s.process,z=R.f,H=z,W=!!(F&&F.createEvent&&s.dispatchEvent),V="unhandledrejection",G=function(t){var e;return!(!g(t)||!y(e=t.then))&&e},$=function(t,e){var r,n,i,o=e.value,a=1===e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{u?(a||(2===e.rejection&&X(e),e.rejection=1),!0===u?r=o:(l&&l.enter(),r=u(o),l&&(l.exit(),i=!0)),r===t.promise?c(new L("Promise-chain cycle")):(n=G(r))?f(n,r,s,c):s(r)):c(o)}catch(t){l&&!i&&l.exit(),c(t)}},Y=function(t,e){t.notified||(t.notified=!0,T(function(){for(var r,n=t.reactions;r=n.get();)$(r,t);t.notified=!1,e&&!t.rejection&&J(t)}))},Q=function(t,e,r){var n,i;W?((n=F.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),s.dispatchEvent(n)):n={promise:e,reason:r},!M&&(i=s["on"+t])?i(n):t===V&&A("Unhandled promise rejection",r)},J=function(t){f(S,s,function(){var e,r=t.facade,n=t.value;if(K(t)&&(e=O(function(){u?q.emit("unhandledRejection",n,r):Q(V,r,n)}),t.rejection=u||K(t)?2:1,e.error))throw e.value})},K=function(t){return 1!==t.rejection&&!t.parent},X=function(t){f(S,s,function(){var e=t.facade;u?q.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)})},Z=function(t,e,r){return function(n){t(e,n,r)}},tt=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,Y(t,!0))},et=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new L("Promise can't be resolved itself");var n=G(e);n?T(function(){var r={done:!1};try{f(n,e,Z(et,r,t),Z(tt,r,t))}catch(e){tt(r,e,t)}}):(t.value=e,t.state=1,Y(t,!1))}catch(e){tt({done:!1},e,t)}}};if(C&&(D=(U=function(e){b(this,D),m(e),f(t,this);var r=_(this);try{e(Z(et,r),Z(tt,r))}catch(t){tt(r,t)}}).prototype,(t=function(t){B(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:null})}).prototype=l(D,"then",function(t,e){var r=_(this),n=z(w(this,U));return r.parent=!0,n.ok=!y(t)||t,n.fail=y(e)&&e,n.domain=u?q.domain:void 0,0===r.state?r.reactions.add(n):T(function(){$(n,r)}),n.promise}),e=function(){var e=new t,r=_(e);this.promise=e,this.resolve=Z(et,r),this.reject=Z(tt,r)},R.f=z=function(t){return t===U||t===r?new e(t):H(t)},!a&&y(x)&&N!==Object.prototype)){n=N.then,j||l(N,"then",function(t,e){var r=this;return new U(function(t,e){f(n,r,t,e)}).then(t,e)},{unsafe:!0});try{delete N.constructor}catch(t){}d&&d(N,D)}o({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:U}),r=c.Promise,p(U,P,!1,!0),v(P)}(),function(){if(qu)return zu;qu=1;var t=Nr(),e=h(),r=Ot(),n=Du(),i=Mu(),o=wo();t({target:"Promise",stat:!0,forced:Hu()},{all:function(t){var a=this,u=n.f(a),s=u.resolve,c=u.reject,f=i(function(){var n=r(a.resolve),i=[],u=0,f=1;o(t,function(t){var r=u++,o=!1;f++,e(n,a,t).then(function(t){o||(o=!0,i[r]=t,--f||s(i))},c)}),--f||s(i)});return f.error&&c(f.value),u.promise}})}(),function(){if(Wu)return Vu;Wu=1;var t=Nr(),e=Xt(),r=_u().CONSTRUCTOR,n=ju(),i=yt(),o=vt(),a=Ve(),u=n&&n.prototype;if(t({target:"Promise",proto:!0,forced:r,real:!0},{catch:function(t){return this.then(void 0,t)}}),!e&&o(n)){var s=i("Promise").prototype.catch;u.catch!==s&&a(u,"catch",s,{unsafe:!0})}}(),function(){if(Gu)return $u;Gu=1;var t=Nr(),e=h(),r=Ot(),n=Du(),i=Mu(),o=wo();t({target:"Promise",stat:!0,forced:Hu()},{race:function(t){var a=this,u=n.f(a),s=u.reject,c=i(function(){var n=r(a.resolve);o(t,function(t){e(n,a,t).then(u.resolve,s)})});return c.error&&s(c.value),u.promise}})}(),function(){if(Yu)return Qu;Yu=1;var t=Nr(),e=Du();t({target:"Promise",stat:!0,forced:_u().CONSTRUCTOR},{reject:function(t){var r=e.f(this);return(0,r.reject)(t),r.promise}})}(),function(){if(Xu)return ts;Xu=1;var t=Nr(),e=yt(),r=Xt(),n=ju(),i=_u().CONSTRUCTOR,o=es(),a=e("Promise"),u=r&&!i;t({target:"Promise",stat:!0,forced:r||i},{resolve:function(t){return o(u&&this===a?n:this,t)}})}());var rs,ns={};!function(){if(rs)return ns;rs=1;var t=Nr(),e=Xt(),r=ju(),n=v(),i=yt(),o=vt(),a=Au(),u=es(),s=Ve(),c=r&&r.prototype;if(t({target:"Promise",proto:!0,real:!0,forced:!!r&&n(function(){c.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=a(this,i("Promise")),r=o(t);return this.then(r?function(r){return u(e,t()).then(function(){return r})}:t,r?function(r){return u(e,t()).then(function(){throw r})}:t)}}),!e&&o(r)){var f=i("Promise").prototype.finally;c.finally!==f&&s(c,"finally",f,{unsafe:!0})}}();var is,os,as,us,ss,cs,fs,ls,ds,ps,vs,ms={};function ys(){if(os)return is;os=1;var t=we();return is=function(){var e=t(this),r="";return e.hasIndices&&(r+="d"),e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.unicodeSets&&(r+="v"),e.sticky&&(r+="y"),r}}function hs(){if(ps)return ds;ps=1;var t,e,r=h(),n=st(),o=Bo(),a=ys(),u=function(){if(us)return as;us=1;var t=v(),e=i().RegExp,r=t(function(){var t=e("a","y");return t.lastIndex=2,null!==t.exec("abcd")}),n=r||t(function(){return!e("a","y").sticky}),o=r||t(function(){var t=e("^r","gy");return t.lastIndex=2,null!==t.exec("str")});return as={BROKEN_CARET:o,MISSED_STICKY:n,UNSUPPORTED_Y:r}}(),s=ee(),c=On(),f=He().get,l=function(){if(cs)return ss;cs=1;var t=v(),e=i().RegExp;return ss=t(function(){var t=e(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})}(),d=function(){if(ls)return fs;ls=1;var t=v(),e=i().RegExp;return fs=t(function(){var t=e("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})}(),p=s("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,y=m,g=n("".charAt),b=n("".indexOf),w=n("".replace),S=n("".slice),T=(e=/b*/g,r(m,t=/a/,"a"),r(m,e,"a"),0!==t.lastIndex||0!==e.lastIndex),A=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];return(T||O||A||l||d)&&(y=function(t){var e,n,i,u,s,l,d,v=this,h=f(v),E=o(t),k=h.raw;if(k)return k.lastIndex=v.lastIndex,e=r(y,k,E),v.lastIndex=k.lastIndex,e;var x=h.groups,I=A&&v.sticky,R=r(a,v),P=v.source,C=0,M=E;if(I&&(R=w(R,"y",""),-1===b(R,"g")&&(R+="g"),M=S(E,v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==g(E,v.lastIndex-1))&&(P="(?: "+P+")",M=" "+M,C++),n=new RegExp("^(?:"+P+")",R)),O&&(n=new RegExp("^"+P+"$(?!\\s)",R)),T&&(i=v.lastIndex),u=r(m,I?n:v,M),I?u?(u.input=S(u.input,C),u[0]=S(u[0],C),u.index=v.lastIndex,v.lastIndex+=u[0].length):v.lastIndex=0:T&&u&&(v.lastIndex=v.global?u.index+u[0].length:i),O&&u&&u.length>1&&r(p,u[0],n,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(u[s]=void 0)}),u&&x)for(u.groups=l=c(null),s=0;s<x.length;s++)l[(d=x[s])[0]]=u[d[1]];return u}),ds=y}function gs(){if(vs)return ms;vs=1;var t=Nr(),e=hs();return t({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e}),ms}gs();var bs,ws,Ss,Ts,As,Os,Es,ks,xs,Is,Rs,Ps,Cs,Ms={};function js(){if(Ts)return Ss;Ts=1;var t=No().charAt;return Ss=function(e,r,n){return r+(n?t(e,r).length:1)}}function _s(){if(Os)return As;Os=1;var t=st(),e=re(),r=Math.floor,n=t("".charAt),i=t("".replace),o=t("".slice),a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;return As=function(t,s,c,f,l,d){var p=c+t.length,v=f.length,m=u;return void 0!==l&&(l=e(l),m=a),i(d,m,function(e,i){var a;switch(n(i,0)){case"$":return"$";case"&":return t;case"`":return o(s,0,c);case"'":return o(s,p);case"<":a=l[o(i,1,-1)];break;default:var u=+i;if(0===u)return e;if(u>v){var d=r(u/10);return 0===d?e:d<=v?void 0===f[d-1]?n(i,1):f[d-1]+n(i,1):e}a=f[u-1]}return void 0===a?"":a})}}function Bs(){if(Is)return xs;Is=1;var t=h(),e=ne(),r=ht(),n=function(){if(ks)return Es;ks=1;var t=i(),e=v(),r=t.RegExp,n=!e(function(){var t=!0;try{r(".","d")}catch(e){t=!1}var e={},n="",i=t?"dgimsy":"gimsy",o=function(t,r){Object.defineProperty(e,t,{get:function(){return n+=r,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var u in t&&(a.hasIndices="d"),a)o(u,a[u]);return Object.getOwnPropertyDescriptor(r.prototype,"flags").get.call(e)!==i||n!==i});return Es={correct:n}}(),o=ys(),a=RegExp.prototype;return xs=n.correct?function(t){return t.flags}:function(i){return n.correct||!r(a,i)||e(i,"flags")?i.flags:t(o,i)}}!function(){if(Cs)return Ms;Cs=1;var t=Ou(),e=h(),r=st(),n=function(){if(ws)return bs;ws=1,gs();var t=h(),e=Ve(),r=hs(),n=v(),i=oe(),o=Te(),a=i("species"),u=RegExp.prototype;return bs=function(s,c,f,l){var d=i(s),p=!n(function(){var t={};return t[d]=function(){return 7},7!==""[s](t)}),v=p&&!n(function(){var t=!1,e=/a/;if("split"===s){var r={};r[a]=function(){return e},(e={constructor:r,flags:""})[d]=/./[d]}return e.exec=function(){return t=!0,null},e[d](""),!t});if(!p||!v||f){var m=/./[d],y=c(d,""[s],function(e,n,i,o,a){var s=n.exec;return s===r||s===u.exec?p&&!a?{done:!0,value:t(m,n,i,o)}:{done:!0,value:t(e,i,n,o)}:{done:!1}});e(String.prototype,s,y[0]),e(u,d,y[1])}l&&o(u[d],"sham",!0)}}(),i=v(),o=we(),a=vt(),u=mt(),s=fr(),c=dr(),f=Bo(),l=dt(),d=js(),p=Et(),m=_s(),y=Bs(),g=function(){if(Ps)return Rs;Ps=1;var t=h(),e=we(),r=vt(),n=ct(),i=hs(),o=TypeError;return Rs=function(a,u){var s=a.exec;if(r(s)){var c=t(s,a,u);return null!==c&&e(c),c}if("RegExp"===n(a))return t(i,a,u);throw new o("RegExp#exec called on incompatible receiver")}}(),b=oe()("replace"),w=Math.max,S=Math.min,T=r([].concat),A=r([].push),O=r("".indexOf),E=r("".slice),k=function(t){return void 0===t?t:String(t)},x="$0"==="a".replace(/./,"$0"),I=!!/./[b]&&""===/./[b]("a","$0");n("replace",function(r,n,i){var v=I?"$":"$0";return[function(t,r){var i=l(this),o=u(t)?p(t,b):void 0;return o?e(o,t,i,r):e(n,f(i),t,r)},function(e,r){var u=o(this),l=f(e);if("string"==typeof r&&-1===O(r,v)&&-1===O(r,"$<")){var p=i(n,u,l,r);if(p.done)return p.value}var h=a(r);h||(r=f(r));var b,x=f(y(u)),I=-1!==O(x,"g");I&&(b=-1!==O(x,"u"),u.lastIndex=0);for(var R,P=[];null!==(R=g(u,l))&&(A(P,R),I);){""===f(R[0])&&(u.lastIndex=d(l,c(u.lastIndex),b))}for(var C="",M=0,j=0;j<P.length;j++){for(var _,B=f((R=P[j])[0]),N=w(S(s(R.index),l.length),0),U=[],D=1;D<R.length;D++)A(U,k(R[D]));var L=R.groups;if(h){var F=T([B],U,N,l);void 0!==L&&A(F,L),_=f(t(r,void 0,F))}else _=m(B,l,N,U,L,r);N>=M&&(C+=E(l,M,N)+_,M=N+B.length)}return C+E(l,M)}]},!!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!x||I)}();var Ns=window.StarmusHooks.debugLog,Us={chunkSize:1048576,retryDelays:[0,3e3,5e3,1e4,2e4,6e4],maxChunkRetries:3},Ds=function(){return window.starmusConfig||{}};function Ls(t){return(t=(t="string"==typeof t?t:String(t)).replace(/[\r\n\t]/g," ")).length>500?t.slice(0,497)+"...":t}function Fs(t){return t&&"object"===ba(t)?t:{}}function qs(t,e,r,n,i,o){return zs.apply(this,arguments)}function zs(){return(zs=sa(va().m(function t(e,r,n,i,o,a){var u,s,c,f,l,d,p,v,m,y,h,g,b;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if(l=Ds(),d=(null===(u=window.tus)||void 0===u?void 0:u.Upload)&&(null===(s=l.endpoints)||void 0===s?void 0:s.tusUpload),p=null===(c=l.endpoints)||void 0===c?void 0:c.chunkedUpload,v=null===(f=l.endpoints)||void 0===f?void 0:f.directUpload,!d){t.n=4;break}return t.p=1,t.n=2,Hs(e,r,n,i,o,a);case 2:return m=t.v,t.a(2,{method:"tus",url:m});case 3:t.p=3,g=t.v,Ns("[Priority] TUS failed:",g.message);case 4:if(!p){t.n=8;break}return t.p=5,t.n=6,Ws(e,r,n,i,o,a);case 6:return y=t.v,t.a(2,{method:"chunked_rest",result:y});case 7:t.p=7,b=t.v,Ns("[Priority] Chunked REST failed:",b.message);case 8:if(!v){t.n=10;break}return t.n=9,Vs(e,r,n,i,o,a);case 9:return h=t.v,t.a(2,{method:"fallback_post",result:h});case 10:throw new Error("All upload methods failed or missing endpoints");case 11:return t.a(2)}},t,null,[[5,7],[1,3]])}))).apply(this,arguments)}function Hs(t,e,r,n,i,o){var a,u;if(null===(a=window.tus)||void 0===a||!a.Upload)throw new Error("TUS library not present");var s=window.starmusTus||{},c=s.endpoint||(null===(u=Ds().endpoints)||void 0===u?void 0:u.tusUpload);if(!c)throw new Error("TUS endpoint missing");var f=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pa(Object(r),!0).forEach(function(e){da(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pa(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({filename:Ls(e),filetype:t.type||"audio/webm"},Object.entries(Fs(r)).reduce(function(t,e){var r=ha(e,2),n=r[0],i=r[1];return t[n]=Ls(i),t},{}));return n&&(f.starmus_meta=Ls(JSON.stringify(n))),new Promise(function(e,r){var n,a={endpoint:c,chunkSize:s.chunkSize||Us.chunkSize,retryDelays:s.retryDelays||Us.retryDelays,metadata:f,fingerprint:function(t){return["starmus",i,t.size,t.lastModified||""].join("-")},onProgress:function(t,e){"function"==typeof o&&o(t,e)},onError:r,onSuccess:function(){return sa(va().m(function r(){var i,o,u,c;return va().w(function(r){for(;;)switch(r.p=r.n){case 0:if(Ns("[TUS] Success:",n.url),u=(null===(i=window.tus)||void 0===i||null===(i=i.defaultOptions)||void 0===i?void 0:i.removeFingerprint)||(null===(o=window.tus)||void 0===o||null===(o=o.Upload)||void 0===o||null===(o=o.prototype)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.removeFingerprint),!s.removeFingerprintOnSuccess||!u){r.n=5;break}return r.p=1,r.n=2,window.tus.defaultOptions.fingerprint(t,a);case 2:return c=r.v,r.n=3,u(c);case 3:r.n=5;break;case 4:r.p=4,r.v;case 5:e(n.url);case 6:return r.a(2)}},r,null,[[1,4]])}))()}};(n=new window.tus.Upload(t,a)).findPreviousUploads().then(function(t){return t.length&&n.resumeFromPreviousUpload(t[0])}).finally(function(){return n.start()})})}function Ws(t,e,r,n,i,o){var a,u,s=Ds(),c=null===(a=s.endpoints)||void 0===a?void 0:a.chunkedUpload,f=s.nonce||"";if(!c)throw new Error("Chunked REST endpoint missing");if(!f)throw new Error("Nonce missing");var l,d,p,v=Fs(r),m=s.chunkSize||Us.chunkSize,y=Math.ceil(t.size/m),h=window.localStorage||window.sessionStorage,g=(l=i,d=e,p=t.size,"starmus_chunked_".concat(l,"_").concat(d,"_").concat(p)),b=h.getItem(g)||null,w=null!==(u=s.maxChunkRetries)&&void 0!==u?u:Us.maxChunkRetries;return new Promise(function(){var r=sa(va().m(function r(i,a){var u,s,l,d,p,S,T;return va().w(function(r){for(;;)switch(r.p=r.n){case 0:S=function(r,i,a){return new Promise(function(u,s){var l=new FormData;l.append("audio_chunk",i,"".concat(e,".part").concat(r)),l.append("chunk_index",r),l.append("total_chunks",y),b?l.append("upload_id",b):l.append("create_upload_id","1"),Object.entries(v).forEach(function(t){var e=ha(t,2),r=e[0],n=e[1];return l.append(r,n)}),n&&l.append("_starmus_meta",JSON.stringify(n));var d=new XMLHttpRequest;d.open("POST",c,!0),d.setRequestHeader("X-WP-Nonce",f),d.upload.onprogress=function(e){return"function"==typeof o&&e.lengthComputable&&o(a+e.loaded,t.size)},d.onload=function(){if(d.status<200||d.status>=300)return s(new Error("Chunk ".concat(r," failed: ").concat(d.status)));try{var t=JSON.parse(d.responseText);!b&&t.upload_id&&(b=t.upload_id,h.setItem(g,b)),u(t)}catch(t){s(new Error("Invalid JSON response"))}},d.onerror=function(){return s(new Error("Network error"))},d.send(l)})},r.p=1,u=va().m(function e(){var r,n,i,o,a,u;return va().w(function(e){for(;;)switch(e.p=e.n){case 0:r=0,n=!1,i=s*m,o=Math.min(i+m,t.size),a=t.slice(i,o);case 1:if(n||!(r<w)){e.n=7;break}return r++,e.p=2,e.n=3,S(s,a,i);case 3:n=!0,e.n=6;break;case 4:if(e.p=4,u=e.v,r!==w){e.n=5;break}throw u;case 5:return e.n=6,new Promise(function(t){return setTimeout(t,300*r*r)});case 6:e.n=1;break;case 7:return e.a(2)}},e,null,[[2,4]])}),s=0;case 2:if(!(s<y)){r.n=4;break}return r.d(ya(u()),3);case 3:s++,r.n=2;break;case 4:return(l=new FormData).append("upload_id",b),l.append("finalize","1"),r.n=5,fetch(c,{method:"POST",headers:{"X-WP-Nonce":f},body:l});case 5:if((d=r.v).ok){r.n=6;break}throw new Error("Finalization failed: ".concat(d.status));case 6:return r.n=7,d.json();case 7:p=r.v,h.removeItem(g),i(p),r.n=9;break;case 8:r.p=8,T=r.v,a(T);case 9:return r.a(2)}},r,null,[[1,8]])}));return function(t,e){return r.apply(this,arguments)}}())}function Vs(t,e,r,n,i,o){var a,u=Ds(),s=null===(a=u.endpoints)||void 0===a?void 0:a.directUpload,c=u.nonce||"";if(!s)throw new Error("Direct upload endpoint missing");var f=Fs(r);return new Promise(function(r,i){var a=new FormData;Object.entries(f).forEach(function(t){var e=ha(t,2),r=e[0],n=e[1];return a.append(r,n)}),a.append("audio_file",t,e),null!=n&&n.transcript&&a.append("_starmus_transcript",n.transcript),null!=n&&n.calibration&&a.append("_starmus_calibration",JSON.stringify(n.calibration)),null!=n&&n.env&&a.append("_starmus_env",JSON.stringify(n.env));var u=new XMLHttpRequest;u.open("POST",s,!0),u.setRequestHeader("X-WP-Nonce",c),u.upload.onprogress=function(t){return"function"==typeof o&&t.lengthComputable&&o(t.loaded,t.total)},u.onload=function(){if(u.status<200||u.status>=300)return i(new Error("Upload failed: ".concat(u.status)));try{r(JSON.parse(u.responseText))}catch(t){i(new Error("Invalid JSON response"))}},u.onerror=function(){return i(new Error("Network error"))},u.send(a)})}var Gs={uploadWithTus:Hs,uploadWithChunkedRest:Ws,uploadDirect:Vs,uploadWithPriority:qs,estimateUploadTime:function(t,e){var r,n=(null==e?void 0:e.downlink)||(null!==(r={"slow-2g":.05,"2g":.15,"3g":.75,"4g":8}[null==e?void 0:e.effectiveType])&&void 0!==r?r:.5);return n=Math.min(n,10),Math.ceil(t/(1e6*n/8)*1.5)},formatUploadEstimate:function(t){return isFinite(t)?t<60?"~".concat(t,"s"):"~".concat(Math.ceil(t/60)," min"):"Calculating..."}};"undefined"!=typeof window&&(window.StarmusTus=Gs);var $s,Ys={};!function(){if($s)return Ys;$s=1;var t=Nr(),e=vr().includes,r=v(),n=En();t({target:"Array",proto:!0,forced:r(function(){return!Array(1).includes()})},{includes:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")}();var Qs,Js;Js||(Js=1,Qs||(Qs=1,Oo()("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Io())));var Ks,Xs,Zs,tc,ec,rc={};function nc(){if(Xs)return Ks;Xs=1;var t=st();return Ks=t(1.1.valueOf)}function ic(){if(tc)return Zs;tc=1;var t=fr(),e=Bo(),r=dt(),n=RangeError;return Zs=function(i){var o=e(r(this)),a="",u=t(i);if(u<0||u===1/0)throw new n("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(o+=o))1&u&&(a+=o);return a}}!function(){if(ec)return rc;ec=1;var t=Nr(),e=st(),r=fr(),n=nc(),i=ic(),o=v(),a=RangeError,u=String,s=Math.floor,c=e(i),f=e("".slice),l=e(1.1.toFixed),d=function(t,e,r){return 0===e?r:e%2==1?d(t,e-1,r*t):d(t*t,e/2,r)},p=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=s(i/1e7)},m=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=s(n/e),n=n%e*1e7},y=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=u(t[e]);r=""===r?n:r+c("0",7-n.length)+n}return r};t({target:"Number",proto:!0,forced:o(function(){return"0.000"!==l(8e-5,3)||"1"!==l(.9,0)||"1.25"!==l(1.255,2)||"1000000000000000128"!==l(0xde0b6b3a7640080,0)})||!o(function(){l({})})},{toFixed:function(t){var e,i,o,s,l=n(this),v=r(t),h=[0,0,0,0,0,0],g="",b="0";if(v<0||v>20)throw new a("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return u(l);if(l<0&&(g="-",l=-l),l>1e-21)if(i=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(l*d(2,69,1))-69)<0?l*d(2,-e,1):l/d(2,e,1),i*=4503599627370496,(e=52-e)>0){for(p(h,0,i),o=v;o>=7;)p(h,1e7,0),o-=7;for(p(h,d(10,o,1),0),o=e-1;o>=23;)m(h,1<<23),o-=23;m(h,1<<o),p(h,1,1),m(h,2),b=y(h)}else p(h,0,i),p(h,1<<-e,0),b=y(h)+c("0",v);return b=v>0?g+((s=b.length)<=v?"0."+c("0",v-s)+b:f(b,0,s-v)+"."+f(b,s-v)):g+b}})}();var oc,ac={};!function(){if(oc)return ac;oc=1;var t=Le().PROPER,e=Ve(),r=we(),n=Bo(),i=v(),o=Bs(),a="toString",u=RegExp.prototype,s=u[a],c=i(function(){return"/a/b"!==s.call({source:"a",flags:"b"})}),f=t&&s.name!==a;(c||f)&&e(u,a,function(){var t=r(this);return"/"+n(t.source)+"/"+n(o(t))},{unsafe:!0})}();var uc,sc,cc,fc,lc,dc,pc,vc={};function mc(){if(fc)return cc;fc=1;var t=function(){if(sc)return uc;sc=1;var t=mt(),e=ct(),r=oe()("match");return uc=function(n){var i;return t(n)&&(void 0!==(i=n[r])?!!i:"RegExp"===e(n))}}(),e=TypeError;return cc=function(r){if(t(r))throw new e("The method doesn't accept regular expressions");return r}}!function(){if(pc)return vc;pc=1;var t=Nr(),e=st(),r=mc(),n=dt(),i=Bo(),o=function(){if(dc)return lc;dc=1;var t=oe()("match");return lc=function(e){var r=/./;try{"/./"[e](r)}catch(n){try{return r[t]=!1,"/./"[e](r)}catch(t){}}return!1}}(),a=e("".indexOf);t({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~a(i(n(this)),i(r(t)),arguments.length>1?arguments[1]:void 0)}})}();var yc={dbName:"StarmusSubmissions",storeName:"pendingSubmissions",dbVersion:1,maxRetries:10,retryDelays:[0,5e3,1e4,3e4,6e4,12e4,3e5,6e5,12e5,18e5],maxBlobSize:41943040},hc=new(function(){return fa(function t(){ca(this,t),this.db=null,this.isProcessing=!1},[{key:"init",value:(o=sa(va().m(function t(){var e=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(window.indexedDB){t.n=1;break}return console.error("[Offline] IndexedDB not supported â offline queue disabled."),t.a(2);case 1:return t.a(2,new Promise(function(t){var r=indexedDB.open(yc.dbName,yc.dbVersion);r.onerror=function(e){ra("[Offline] DB open failed",e),t()},r.onblocked=function(){ra("[Offline] DB open blocked â close other tabs")},r.onsuccess=function(r){e.db=r.target.result,e.db.onversionchange=function(){e.db.close(),ra("[Offline] DB version change â closed connection")},ra("[Offline] IndexedDB ready"),t()},r.onupgradeneeded=function(t){var e=t.target.result;if(!e.objectStoreNames.contains(yc.storeName)){var r=e.createObjectStore(yc.storeName,{keyPath:"id"});r.createIndex("timestamp","timestamp",{unique:!1}),r.createIndex("retryCount","retryCount",{unique:!1}),ra("[Offline] Created object store",yc.storeName)}}}))}},t)})),function(){return o.apply(this,arguments)})},{key:"add",value:(i=sa(va().m(function t(e,r,n,i,o){var a,u,s,c=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}throw new Error("IndexedDB not initialized");case 1:if(a="starmus-offline-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,10)),u=r.size>yc.maxBlobSize?null:"function"==typeof structuredClone?structuredClone(r):new Blob([r],{type:r.type})){t.n=2;break}throw new Error("Blob too large for offline storage (".concat((r.size/1024/1024).toFixed(2),"MB)"));case 2:return s={id:a,instanceId:e,fileName:n,timestamp:Date.now(),audioBlob:u,formFields:i||{},metadata:o||{},retryCount:0,lastAttempt:null,error:null},t.a(2,new Promise(function(t,e){var r=c.db.transaction([yc.storeName],"readwrite");r.objectStore(yc.storeName).add(s),r.oncomplete=function(){ra("[Offline] Queued submission",a),t(a)},r.onerror=function(t){var r=t.target.error;"QuotaExceededError"===(null==r?void 0:r.name)?e(new Error("IndexedDB quota exceeded â cannot queue submission offline.")):e(r)}}))}},t,this)})),function(t,e,r,n,o){return i.apply(this,arguments)})},{key:"getAll",value:(n=sa(va().m(function t(){var e=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.a(2,[]);case 1:return t.a(2,new Promise(function(t,r){var n=e.db.transaction([yc.storeName],"readonly").objectStore(yc.storeName).getAll();n.onsuccess=function(){return t(n.result||[])},n.onerror=function(){return r(n.error)}}))}},t,this)})),function(){return n.apply(this,arguments)})},{key:"remove",value:(r=sa(va().m(function t(e){var r=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.a(2);case 1:return t.a(2,new Promise(function(t,n){var i=r.db.transaction([yc.storeName],"readwrite");i.objectStore(yc.storeName).delete(e),i.oncomplete=function(){ra("[Offline] Removed from queue",e),t()},i.onerror=function(t){return n(t.target.error)}}))}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"_updateRetry",value:(e=sa(va().m(function t(e,r,n){var i=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.a(2);case 1:return t.a(2,new Promise(function(t,o){var a=i.db.transaction([yc.storeName],"readwrite"),u=a.objectStore(yc.storeName),s=u.get(e);s.onsuccess=function(){var t=s.result;t&&(t.retryCount=r,t.lastAttempt=Date.now(),t.error=n||null,u.put(t))},a.oncomplete=t,a.onerror=function(){return o(a.error)}}))}},t,this)})),function(t,r,n){return e.apply(this,arguments)})},{key:"processQueue",value:(t=sa(va().m(function t(){var e,r,n,i,o,a,u=this;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!this.isProcessing&&navigator.onLine){t.n=1;break}return t.a(2);case 1:return this.isProcessing=!0,ra("[Offline] Processing queue..."),t.p=2,t.n=3,this.getAll();case 3:e=t.v,ra("[Offline] Pending submissions:",e.length),r=la(e),t.p=4,i=va().m(function t(){var e,r,i,o,a,s,c,f,l,d,p;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=n.value,r=e.id,i=e.audioBlob,o=e.fileName,a=e.formFields,s=e.metadata,c=e.retryCount,f=e.instanceId,!(c>=yc.maxRetries)){t.n=1;break}return ra("[Offline] Max retries reached for",r),t.a(2,0);case 1:return t.p=1,ra("[Offline] Attempt ".concat(c+1," for"),r),t.n=2,qs({blob:i,fileName:o,formFields:a,metadata:s,instanceId:f,background:!0});case 2:return t.n=3,u.remove(r);case 3:ra("[Offline] Upload succeeded:",r),t.n=7;break;case 4:if(t.p=4,p=t.v,l=(null==p?void 0:p.message)||"Unknown upload error",ra("[Offline] Upload failed:",r,l),!(l.includes("400")||l.includes("Invalid JSON")||l.includes("QuotaExceeded"))){t.n=5;break}return ra("[Offline] Non-retryable error â leaving item in queue"),t.a(2,0);case 5:return t.n=6,u._updateRetry(r,c+1,l);case 6:return d=yc.retryDelays[Math.min(c,yc.retryDelays.length-1)],ra("[Offline] Retrying ".concat(r," after ").concat(d,"ms...")),t.n=7,new Promise(function(t){return setTimeout(t,d)});case 7:return t.a(2)}},t,null,[[1,4]])}),r.s();case 5:if((n=r.n()).done){t.n=8;break}return t.d(ya(i()),6);case 6:if(0!==t.v){t.n=7;break}return t.a(3,7);case 7:t.n=5;break;case 8:t.n=10;break;case 9:t.p=9,o=t.v,r.e(o);case 10:return t.p=10,r.f(),t.f(10);case 11:t.n=13;break;case 12:t.p=12,a=t.v,console.error("[Offline] Fatal queue processing error",a);case 13:return t.p=13,this.isProcessing=!1,t.f(13);case 14:return t.a(2)}},t,this,[[4,9,10,11],[2,12,13,14]])})),function(){return t.apply(this,arguments)})},{key:"setupNetworkListeners",value:function(){var t=this;window.addEventListener("online",function(){ra("[Offline] Online â resuming queue"),t.processQueue()}),window.addEventListener("offline",function(){ra("[Offline] Offline â pausing queue")}),setInterval(function(){navigator.onLine&&t.processQueue().catch(function(t){return ra("[Offline] Retry loop error",t)})},6e4)}}]);var t,e,r,n,i,o}());function gc(){return bc.apply(this,arguments)}function bc(){return(bc=sa(va().m(function t(){return va().w(function(t){for(;;)switch(t.n){case 0:if(hc.db){t.n=2;break}return t.n=1,hc.init();case 1:hc.setupNetworkListeners();case 2:return t.a(2,hc)}},t)}))).apply(this,arguments)}function wc(t,e,r,n,i){return Sc.apply(this,arguments)}function Sc(){return(Sc=sa(va().m(function t(e,r,n,i,o){var a;return va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,gc();case 1:return a=t.v,t.a(2,a.add(e,r,n,i,o))}},t)}))).apply(this,arguments)}function Tc(){return(Tc=sa(va().m(function t(){var e;return va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,gc();case 1:return e=t.v,t.n=2,e.getAll();case 2:return t.a(2,t.v.length)}},t)}))).apply(this,arguments)}function Ac(){return gc()}"undefined"!=typeof window&&(window.initOffline=Ac),"undefined"!=typeof module&&module.exports&&(module.exports={getOfflineQueue:gc,queueSubmission:wc,getPendingCount:function(){return Tc.apply(this,arguments)},initOffline:Ac});var Oc,Ec,kc;function xc(){if(Ec)return Oc;Ec=1;var t=i().isFinite;return Oc=Number.isFinite||function(e){return"number"==typeof e&&t(e)}}kc||(kc=1,Nr()({target:"Number",stat:!0},{isFinite:xc()}));var Ic,Rc,Pc,Cc,Mc,jc={};!function(){if(Mc)return jc;Mc=1;var t=Nr(),e=function(){if(Rc)return Ic;Rc=1;var t=st(),e=dr(),r=Bo(),n=ic(),i=dt(),o=t(n),a=t("".slice),u=Math.ceil,s=function(t){return function(n,s,c){var f,l,d=r(i(n)),p=e(s),v=d.length,m=void 0===c?" ":r(c);return p<=v||""===m?d:((l=o(m,u((f=p-v)/m.length))).length>f&&(l=a(l,0,f)),t?d+l:l+d)}};return Ic={start:s(!1),end:s(!0)}}().start;t({target:"String",proto:!0,forced:function(){if(Cc)return Pc;Cc=1;var t=gt();return Pc=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(t)}()},{padStart:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})}();var _c=!1;function Bc(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}function Nc(t,e){var r=t.status,n=t.error,i=t.source,o=void 0===i?{}:i,a=t.submission,u=void 0===a?{}:a,s=t.calibration,c=void 0===s?{}:s,f=t.recorder,l=void 0===f?{}:f,d=t.instanceId;if("C"===t.tier||!0===t.fallbackActive)return["recordBtn","pauseBtn","resumeBtn","stopBtn","recorderContainer"].forEach(function(t){e[t]&&(e[t].style.display="none")}),void(e.fallbackContainer&&(e.fallbackContainer.style.display="block"));if(e.step1&&e.step2){if("uninitialized"===r)return e.step1.style.display="block",void(e.step2.style.display="none");var p="idle"!==r&&"uninitialized"!==r;e.step1.style.display=p?"none":"block",e.step2.style.display=p?"block":"none"}if(e.timer||e.timerElapsed){var v=function(t){if(!Number.isFinite(t))return"00m 00s";var e=Math.floor(t/60),r=Math.floor(t%60);return"".concat(e.toString().padStart(2,"0"),"m ").concat(r.toString().padStart(2,"0"),"s")}(l.duration||0);e.timerElapsed?e.timerElapsed.textContent=v:e.timer&&(e.timer.textContent=v),e.timer&&("recording"===r?e.timer.classList.add("starmus-timer--recording"):e.timer.classList.remove("starmus-timer--recording"))}if(e.durationProgress){var m=l.duration||0,y="recording"===r||"paused"===r||"calibrating"===r;if(e.durationProgress.parentElement&&(e.durationProgress.parentElement.style.display=y?"block":"none"),y){var h=Math.min(100,m/1200*100);e.durationProgress.style.setProperty("--starmus-recording-progress","".concat(h,"%")),e.durationProgress.setAttribute("aria-valuenow",Math.floor(m)),m>=1020?e.durationProgress.setAttribute("data-level","danger"):m>=900?e.durationProgress.setAttribute("data-level","warning"):e.durationProgress.setAttribute("data-level","safe"),m>=1200&&"recording"===r&&window.CommandBus&&window.CommandBus.dispatch("stop-mic",{},{instanceId:d})}}if(e.volumeMeter){var g="recording"===r||"paused"===r||"calibrating"===r;if(e.volumeMeter.parentElement&&(e.volumeMeter.parentElement.style.display=g?"block":"none"),g){var b=Math.max(0,Math.min(100,"calibrating"===r?c.volumePercent||0:l.amplitude||0));e.volumeMeter.style.setProperty("--starmus-audio-level","".concat(b,"%"));var w=b/100;w<.6?e.volumeMeter.setAttribute("data-level","safe"):w<.85?e.volumeMeter.setAttribute("data-level","hot"):e.volumeMeter.setAttribute("data-level","clip"),"recording"===r&&function(t,e){if(t>=.85&&!_c){_c=!0;var r=e.messageBox||document.querySelector("[data-starmus-message-box]");r&&(r.textContent="â ï¸ Your microphone is too loud. Move back 6â12 inches or speak softer for a cleaner recording.",r.style.display="block",r.setAttribute("role","alert"),r.setAttribute("aria-live","assertive"),setTimeout(function(){r.style.display="none",r.removeAttribute("role"),r.removeAttribute("aria-live")},6e3))}}(w,e)}else e.volumeMeter.style.setProperty("--starmus-audio-level","0%"),e.volumeMeter.removeAttribute("data-level")}var S="recording"===r,T="paused"===r,A="ready"===r,O="calibrating"===r,E="ready_to_submit"===r,k=c&&!0===c.complete,x=S||T||O;if(e.recordBtn&&(e.recordBtn.style.display=A&&k&&!x&&!E?"inline-flex":"none"),e.pauseBtn&&(e.pauseBtn.style.display=S?"inline-flex":"none"),e.resumeBtn&&(e.resumeBtn.style.display=T?"inline-flex":"none"),e.stopBtn&&(e.stopBtn.style.display=x?"inline-flex":"none",e.stopBtn.disabled=O,e.stopBtn.innerHTML=O?'<span class="dashicons dashicons-update"></span> Calibrating...':'<span class="dashicons dashicons-media-default"></span> Stop'),e.submitBtn&&(e.submitBtn.disabled="ready_to_submit"!==r,e.submitBtn.textContent="submitting"===r?"Uploadingâ¦":"Submit Recording"),e.transcriptBox){var I,R,P=(null===(I=o.transcript)||void 0===I?void 0:I.length)>0,C=(null===(R=o.interimTranscript)||void 0===R?void 0:R.length)>0;P||C?(e.transcriptBox.style.display="block",e.transcriptBox.innerHTML=(P?'<span class="starmus-transcript--final">'.concat(Bc(o.transcript),"</span>"):"")+(C?' <span class="starmus-transcript--interim">'.concat(Bc(o.interimTranscript),"</span>"):"")):e.transcriptBox.style.display="none"}if(e.statusEl){var M=e.statusEl,j="",_="starmus-status";if(n)j=n.message||"An error occurred.",_+=" starmus-status--error";else switch(r){case"ready":j="Mic calibrated. Click Start Recording.",_+=" starmus-status--success";break;case"recording":j="Recording...",_+=" starmus-status--recording";break;case"paused":j="Paused â Resume or Stop.";break;case"submitting":j="Uploading ".concat(Math.round(100*u.progress),"%");break;case"complete":j="Upload successful!",_+=" starmus-status--success";break;default:j=""}M.className=_,M.textContent=j,M.style.display=j?"block":"none"}}function Uc(t,e){var r,n,i,o,a,u;console.log("[StarmusUI] initInstance called with elements:",{recordBtn:!!e.recordBtn,setupMicBtn:!!e.setupMicBtn,volumeMeter:!!e.volumeMeter,timer:!!e.timer,elementKeys:Object.keys(e)});var s=t.getState().instanceId,c=window.CommandBus||window.StarmusHooks;function f(t){if(!c)return console.warn("[StarmusUI] No CommandBus detected.");console.log("[StarmusUI] Dispatching:",t),c.dispatch(t,{},{instanceId:s})}console.log("[StarmusUI] CommandBus found:",!!c,"Instance ID:",s),console.log("[StarmusUI] Attaching event listeners..."),e.recordBtn?(console.log("[StarmusUI] Record button element:",e.recordBtn),console.log("[StarmusUI] Button disabled:",e.recordBtn.disabled),console.log("[StarmusUI] Button style display:",getComputedStyle(e.recordBtn).display),console.log("[StarmusUI] Button style visibility:",getComputedStyle(e.recordBtn).visibility),console.log("[StarmusUI] Button style pointer-events:",getComputedStyle(e.recordBtn).pointerEvents),e.recordBtn.addEventListener("click",function(t){console.log("[StarmusUI] Record button clicked! Event:",t),console.log("[StarmusUI] Button disabled at click time:",e.recordBtn.disabled),f("start-recording")}),console.log("[StarmusUI] Record button listener attached")):console.log("[StarmusUI] No record button found!"),null===(r=e.pauseBtn)||void 0===r||r.addEventListener("click",function(){return f("pause-mic")}),null===(n=e.resumeBtn)||void 0===n||n.addEventListener("click",function(){return f("resume-mic")}),null===(i=e.stopBtn)||void 0===i||i.addEventListener("click",function(){return f("stop-mic")}),null===(o=e.submitBtn)||void 0===o||o.addEventListener("click",function(){return f("submit")}),null===(a=e.resetBtn)||void 0===a||a.addEventListener("click",function(){return f("reset")}),null===(u=e.setupMicBtn)||void 0===u||u.addEventListener("click",function(){return f("setup-mic")}),e.fileInput&&e.fileInput.addEventListener("change",function(t){var e,r=null===(e=t.target.files)||void 0===e?void 0:e[0];r&&c.dispatch("file-attached",{file:r},{instanceId:s})});var l=t.subscribe(function(t){return Nc(t,e)});return Nc(t.getState(),e),l}"undefined"!=typeof window&&(window.initUI=Uc);var Dc,Lc,Fc,qc,zc,Hc,Wc,Vc={};function Gc(){return Lc?Dc:(Lc=1,Dc="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff")}function $c(){if(qc)return Fc;qc=1;var t=st(),e=dt(),r=Bo(),n=Gc(),i=t("".replace),o=RegExp("^["+n+"]+"),a=RegExp("(^|[^"+n+"])["+n+"]+$"),u=function(t){return function(n){var u=r(e(n));return 1&t&&(u=i(u,o,"")),2&t&&(u=i(u,a,"$1")),u}};return Fc={start:u(1),end:u(2),trim:u(3)}}!function(){if(Wc)return Vc;Wc=1;var t=Nr(),e=$c().trim,r=function(){if(Hc)return zc;Hc=1;var t=Le().PROPER,e=v(),r=Gc();return zc=function(n){return e(function(){return!!r[n]()||"âÂá "!=="âÂá "[n]()||t&&r[n].name!==n})}}();t({target:"String",proto:!0,forced:r("trim")},{trim:function(){return e(this)}})}();var Yc=window.StarmusHooks||{},Qc=Yc.subscribe||function(){},Jc=Yc.debugLog||function(){};function Kc(t,e,r){function n(n){var i=t.getState(),o=i.source||{},a=i.calibration||{},u=i.env||r||{};if("submitting"!==i.status){var s=o.blob||o.file,c=o.fileName||o.file&&o.file.name||"recording.webm";if(s){var f={transcript:(o.transcript||"").trim()||null,calibration:a.complete?JSON.parse(JSON.stringify(a)):null,env:u};t.dispatch({type:"starmus/submit-start"}),Promise.resolve().then(function(){if(!navigator.onLine)throw new Error("OFFLINE_FAST_PATH");return Jc("[Upload] Starting Priority Upload Pipeline..."),qs({blob:s,fileName:c,formFields:n,metadata:f,instanceId:e,onProgress:l})}).then(function(e){Jc("[Upload] Upload Succeeded via",e.method,e),t.dispatch({type:"starmus/submit-complete",payload:e})}).catch(function(r){var i=r&&r.message&&-1!==r.message.indexOf("not configured");"OFFLINE_FAST_PATH"!==r.message&&i?t.dispatch({type:"starmus/error",payload:{message:r.message||"Upload failed."}}):(Jc("[Upload] Upload failed/offline. Attempting offline queue..."),wc(e,s,c,n,f).then(function(e){t.dispatch({type:"starmus/submit-queued",submissionId:e})}).catch(function(e){console.error("[Upload] Offline save failed:",e),t.dispatch({type:"starmus/error",payload:{message:"Upload failed and could not be saved offline."}})}))})}else t.dispatch({type:"starmus/error",payload:{message:"Please record or attach audio before submitting."}})}function l(e,r){t.dispatch({type:"starmus/submit-progress",progress:e/r})}}return Qc("submit",function(t,r){r&&r.instanceId===e&&n(t.formFields||{})}),Qc("reset",function(r,n){n&&n.instanceId===e&&t.dispatch({type:"starmus/reset"})}),{handleSubmit:n}}"undefined"!=typeof window&&(window.initCore=Kc),"undefined"!=typeof module&&module.exports&&(module.exports={initCore:Kc});var Xc,Zc,tf,ef,rf,nf,of,af,uf,sf,cf,ff,lf,df,pf,vf,mf,yf,hf,gf={};function bf(){return Zc?Xc:(Zc=1,Xc="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView)}function wf(){if(ef)return tf;ef=1;var t=fr(),e=dr(),r=RangeError;return tf=function(n){if(void 0===n)return 0;var i=t(n),o=e(i);if(i!==o)throw new r("Wrong length or index");return o}}function Sf(){if(sf)return uf;sf=1;var t=nf?rf:(nf=1,rf=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1}),e=function(){if(af)return of;af=1;var t=4503599627370496;return of=function(e){return e+t-t}}(),r=Math.abs;return uf=function(n,i,o,a){var u=+n,s=r(u),c=t(u);if(s<a)return c*e(s/a/i)*a*i;var f=(1+i/2220446049250313e-31)*s,l=f-(f-s);return l>o||l!=l?c*(1/0):c*l}}function Tf(){if(df)return lf;df=1;var t=Array,e=Math.abs,r=Math.pow,n=Math.floor,i=Math.log,o=Math.LN2;return lf={pack:function(a,u,s){var c,f,l,d=t(s),p=8*s-u-1,v=(1<<p)-1,m=v>>1,y=23===u?r(2,-24)-r(2,-77):0,h=a<0||0===a&&1/a<0?1:0,g=0;for((a=e(a))!=a||a===1/0?(f=a!=a?1:0,c=v):(c=n(i(a)/o),a*(l=r(2,-c))<1&&(c--,l*=2),(a+=c+m>=1?y/l:y*r(2,1-m))*l>=2&&(c++,l/=2),c+m>=v?(f=0,c=v):c+m>=1?(f=(a*l-1)*r(2,u),c+=m):(f=a*r(2,m-1)*r(2,u),c=0));u>=8;)d[g++]=255&f,f/=256,u-=8;for(c=c<<u|f,p+=u;p>0;)d[g++]=255&c,c/=256,p-=8;return d[g-1]|=128*h,d},unpack:function(t,e){var n,i=t.length,o=8*i-e-1,a=(1<<o)-1,u=a>>1,s=o-7,c=i-1,f=t[c--],l=127&f;for(f>>=7;s>0;)l=256*l+t[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;)n=256*n+t[c--],s-=8;if(0===l)l=1-u;else{if(l===a)return n?NaN:f?-1/0:1/0;n+=r(2,e),l-=u}return(f?-1:1)*n*r(2,l-e)}}}function Af(){if(vf)return pf;vf=1;var t=re(),e=lr(),r=pr();return pf=function(n){for(var i=t(this),o=r(i),a=arguments.length,u=e(a>1?arguments[1]:void 0,o),s=a>2?arguments[2]:void 0,c=void 0===s?o:e(s,o);c>u;)i[u++]=n;return i},pf}function Of(){if(yf)return mf;yf=1;var t=i(),e=st(),r=m(),n=bf(),o=Le(),a=Te(),u=Eo(),s=ko(),c=v(),f=So(),l=fr(),d=dr(),p=wf(),y=function(){if(ff)return cf;ff=1;var t=Sf();return cf=Math.fround||function(e){return t(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}}(),h=Tf(),g=xn(),b=Mn(),w=Af(),S=ii(),T=Ao(),A=_r(),O=Rn(),E=He(),k=o.PROPER,x=o.CONFIGURABLE,I="ArrayBuffer",R="DataView",P="prototype",C="Wrong index",M=E.getterFor(I),j=E.getterFor(R),_=E.set,B=t[I],N=B,U=N&&N[P],D=t[R],L=D&&D[P],F=Object.prototype,q=t.Array,z=t.RangeError,H=e(w),W=e([].reverse),V=h.pack,G=h.unpack,$=function(t){return[255&t]},Y=function(t){return[255&t,t>>8&255]},Q=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},J=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},K=function(t){return V(y(t),23,4)},X=function(t){return V(t,52,8)},Z=function(t,e,r){u(t[P],e,{configurable:!0,get:function(){return r(this)[e]}})},tt=function(t,e,r,n){var i=j(t),o=p(r),a=!!n;if(o+e>i.byteLength)throw new z(C);var u=i.bytes,s=o+i.byteOffset,c=S(u,s,s+e);return a?c:W(c)},et=function(t,e,r,n,i,o){var a=j(t),u=p(r),s=n(+i),c=!!o;if(u+e>a.byteLength)throw new z(C);for(var f=a.bytes,l=u+a.byteOffset,d=0;d<e;d++)f[l+d]=s[c?d:e-d-1]};if(n){var rt=k&&B.name!==I;c(function(){B(1)})&&c(function(){new B(-1)})&&!c(function(){return new B,new B(1.5),new B(NaN),1!==B.length||rt&&!x})?rt&&x&&a(B,"name",I):((N=function(t){return f(this,U),T(new B(p(t)),this,N)})[P]=U,U.constructor=N,A(N,B)),b&&g(L)!==F&&b(L,F);var nt=new D(new N(2)),it=e(L.setInt8);nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||s(L,{setInt8:function(t,e){it(this,t,e<<24>>24)},setUint8:function(t,e){it(this,t,e<<24>>24)}},{unsafe:!0})}else U=(N=function(t){f(this,U);var e=p(t);_(this,{type:I,bytes:H(q(e),0),byteLength:e}),r||(this.byteLength=e,this.detached=!1)})[P],L=(D=function(t,e,n){f(this,L),f(t,U);var i=M(t),o=i.byteLength,a=l(e);if(a<0||a>o)throw new z("Wrong offset");if(a+(n=void 0===n?o-a:d(n))>o)throw new z("Wrong length");_(this,{type:R,buffer:t,byteLength:n,byteOffset:a,bytes:i.bytes}),r||(this.buffer=t,this.byteLength=n,this.byteOffset=a)})[P],r&&(Z(N,"byteLength",M),Z(D,"buffer",j),Z(D,"byteLength",j),Z(D,"byteOffset",j)),s(L,{getInt8:function(t){return tt(this,1,t)[0]<<24>>24},getUint8:function(t){return tt(this,1,t)[0]},getInt16:function(t){var e=tt(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=tt(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return J(tt(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return J(tt(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return G(tt(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return G(tt(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){et(this,1,t,$,e)},setUint8:function(t,e){et(this,1,t,$,e)},setInt16:function(t,e){et(this,2,t,Y,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){et(this,2,t,Y,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){et(this,4,t,Q,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){et(this,4,t,Q,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){et(this,4,t,K,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){et(this,8,t,X,e,arguments.length>2&&arguments[2])}});return O(N,I),O(D,R),mf={ArrayBuffer:N,DataView:D}}!function(){if(hf)return gf;hf=1;var t=Nr(),e=i(),r=Of(),n=xo(),o="ArrayBuffer",a=r[o];t({global:!0,constructor:!0,forced:e[o]!==a},{ArrayBuffer:a}),n(o)}();var Ef,kf={};!function(){if(Ef)return kf;Ef=1;var t=Nr(),e=Ur(),r=v(),n=Of(),i=we(),o=lr(),a=dr(),u=n.ArrayBuffer,s=n.DataView,c=s.prototype,f=e(u.prototype.slice),l=e(c.getUint8),d=e(c.setUint8);t({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r(function(){return!new u(2).slice(1,void 0).byteLength})},{slice:function(t,e){if(f&&void 0===e)return f(i(this),t);for(var r=i(this).byteLength,n=o(t,r),c=o(void 0===e?r:e,r),p=new u(a(c-n)),v=new s(this),m=new s(p),y=0;n<c;)d(m,y++,l(v,n++));return p}})}();var xf,If,Rf,Pf={};!function(){if(Rf)return Pf;Rf=1;var t=Nr(),e=function(){if(If)return xf;If=1;var t=i(),e=v(),r=st(),n=Bo(),o=$c().trim,a=Gc(),u=r("".charAt),s=t.parseFloat,c=t.Symbol,f=c&&c.iterator,l=1/s(a+"-0")!=-1/0||f&&!e(function(){s(Object(f))});return xf=l?function(t){var e=o(n(t)),r=s(e);return 0===r&&"-"===u(e,0)?-0:r}:s}();t({global:!0,forced:parseFloat!==e},{parseFloat:e})}();var Cf,Mf,jf,_f,Bf,Nf,Uf,Df,Lf,Ff,qf,zf,Hf,Wf,Vf,Gf,$f,Yf,Qf,Jf,Kf,Xf,Zf={exports:{}};function tl(){if(Mf)return Cf;Mf=1;var t,e,r,n=bf(),o=m(),a=i(),u=vt(),s=mt(),c=ne(),f=ti(),l=At(),d=Te(),p=Ve(),v=Eo(),y=ht(),h=xn(),g=Mn(),b=oe(),w=ie(),S=He(),T=S.enforce,A=S.get,O=a.Int8Array,E=O&&O.prototype,k=a.Uint8ClampedArray,x=k&&k.prototype,I=O&&h(O),R=E&&h(E),P=Object.prototype,C=a.TypeError,M=b("toStringTag"),j=w("TYPED_ARRAY_TAG"),_="TypedArrayConstructor",B=n&&!!g&&"Opera"!==f(a.opera),N=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},L=function(t){var e=h(t);if(s(e)){var r=A(e);return r&&c(r,_)?r[_]:L(e)}},F=function(t){if(!s(t))return!1;var e=f(t);return c(U,e)||c(D,e)};for(t in U)(r=(e=a[t])&&e.prototype)?T(r)[_]=e:B=!1;for(t in D)(r=(e=a[t])&&e.prototype)&&(T(r)[_]=e);if((!B||!u(I)||I===Function.prototype)&&(I=function(){throw new C("Incorrect invocation")},B))for(t in U)a[t]&&g(a[t],I);if((!B||!R||R===P)&&(R=I.prototype,B))for(t in U)a[t]&&g(a[t].prototype,R);if(B&&h(x)!==R&&g(x,R),o&&!c(R,M))for(t in N=!0,v(R,M,{configurable:!0,get:function(){return s(this)?this[j]:void 0}}),U)a[t]&&d(a[t],j,t);return Cf={NATIVE_ARRAY_BUFFER_VIEWS:B,TYPED_ARRAY_TAG:N&&j,aTypedArray:function(t){if(F(t))return t;throw new C("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!g||y(I,t)))return t;throw new C(l(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(o){if(r)for(var i in U){var u=a[i];if(u&&c(u.prototype,t))try{delete u.prototype[t]}catch(r){try{u.prototype[t]=e}catch(t){}}}R[t]&&!r||p(R,t,r?e:B&&E[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(o){if(g){if(r)for(n in U)if((i=a[n])&&c(i,t))try{delete i[t]}catch(t){}if(I[t]&&!r)return;try{return p(I,t,r?e:B&&I[t]||e)}catch(t){}}for(n in U)!(i=a[n])||i[t]&&!r||p(i,t,e)}},getTypedArrayConstructor:L,isView:function(t){if(!s(t))return!1;var e=f(t);return"DataView"===e||c(U,e)||c(D,e)},isTypedArray:F,TypedArray:I,TypedArrayPrototype:R}}function el(){if(Nf)return Bf;Nf=1;var t=mt(),e=Math.floor;return Bf=Number.isInteger||function(r){return!t(r)&&isFinite(r)&&e(r)===r}}function rl(){if(Df)return Uf;Df=1;var t=fr(),e=RangeError;return Uf=function(r){var n=t(r);if(n<0)throw new e("The argument can't be less than 0");return n}}function nl(){if(Ff)return Lf;Ff=1;var t=rl(),e=RangeError;return Lf=function(r,n){var i=t(r);if(i%n)throw new e("Wrong offset");return i}}function il(){if(zf)return qf;zf=1;var t=Math.round;return qf=function(e){var r=t(e);return r<0?0:r>255?255:255&r}}function ol(){if(Wf)return Hf;Wf=1;var t=ti();return Hf=function(e){var r=t(e);return"BigInt64Array"===r||"BigUint64Array"===r}}function al(){if(Gf)return Vf;Gf=1;var t=ae(),e=TypeError;return Vf=function(r){var n=t(r,"number");if("number"==typeof n)throw new e("Can't convert number to bigint");return BigInt(n)}}function ul(){if(Yf)return $f;Yf=1;var t=mo(),e=h(),r=Tu(),n=re(),i=pr(),o=go(),a=ho(),u=yo(),s=ol(),c=tl().aTypedArrayConstructor,f=al();return $f=function(l){var d,p,v,m,y,h,g,b,w=r(this),S=n(l),T=arguments.length,A=T>1?arguments[1]:void 0,O=void 0!==A,E=a(S);if(E&&!u(E))for(b=(g=o(S,E)).next,S=[];!(h=e(b,g)).done;)S.push(h.value);for(O&&T>2&&(A=t(A,arguments[2])),p=i(S),v=new(c(w))(p),m=s(v),d=0;p>d;d++)y=O?A(S[d],d):S[d],v[d]=m?f(y):+y;return v},$f}function sl(){if(Jf)return Qf;Jf=1;var t=pr();return Qf=function(e,r,n){for(var i=0,o=arguments.length>2?n:t(r),a=new e(o);o>i;)a[i]=r[i++];return a},Qf}function cl(){if(Kf)return Zf.exports;Kf=1;var t=Nr(),e=i(),r=h(),n=m(),o=function(){if(_f)return jf;_f=1;var t=i(),e=v(),r=To(),n=tl().NATIVE_ARRAY_BUFFER_VIEWS,o=t.ArrayBuffer,a=t.Int8Array;return jf=!n||!e(function(){a(1)})||!e(function(){new a(-1)})||!r(function(t){new a,new a(null),new a(1.5),new a(t)},!0)||e(function(){return 1!==new a(new o(2),1,void 0).length})}(),a=tl(),u=Of(),s=So(),c=ut(),f=Te(),l=el(),d=dr(),p=wf(),y=nl(),g=il(),b=ue(),w=ne(),S=ti(),T=mt(),A=Tt(),O=On(),E=ht(),k=Mn(),x=hr().f,I=ul(),R=Xo().forEach,P=xo(),C=Eo(),M=Se(),j=fe(),_=sl(),B=He(),N=Ao(),U=B.get,D=B.set,L=B.enforce,F=M.f,q=j.f,z=e.RangeError,H=u.ArrayBuffer,W=H.prototype,V=u.DataView,G=a.NATIVE_ARRAY_BUFFER_VIEWS,$=a.TYPED_ARRAY_TAG,Y=a.TypedArray,Q=a.TypedArrayPrototype,J=a.isTypedArray,K="BYTES_PER_ELEMENT",X="Wrong length",Z=function(t,e){C(t,e,{configurable:!0,get:function(){return U(this)[e]}})},tt=function(t){var e;return E(W,t)||"ArrayBuffer"===(e=S(t))||"SharedArrayBuffer"===e},et=function(t,e){return J(t)&&!A(e)&&e in t&&l(+e)&&e>=0},rt=function(t,e){return e=b(e),et(t,e)?c(2,t[e]):q(t,e)},nt=function(t,e,r){return e=b(e),!(et(t,e)&&T(r)&&w(r,"value"))||w(r,"get")||w(r,"set")||r.configurable||w(r,"writable")&&!r.writable||w(r,"enumerable")&&!r.enumerable?F(t,e,r):(t[e]=r.value,t)};return n?(G||(j.f=rt,M.f=nt,Z(Q,"buffer"),Z(Q,"byteOffset"),Z(Q,"byteLength"),Z(Q,"length")),t({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:rt,defineProperty:nt}),Zf.exports=function(n,i,a){var u=n.match(/\d+/)[0]/8,c=n+(a?"Clamped":"")+"Array",l="get"+n,v="set"+n,m=e[c],h=m,b=h&&h.prototype,w={},S=function(t,e){F(t,e,{get:function(){return function(t,e){var r=U(t);return r.view[l](e*u+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var n=U(t);n.view[v](e*u+n.byteOffset,a?g(r):r,!0)}(this,e,t)},enumerable:!0})};G?o&&(h=i(function(t,e,n,i){return s(t,b),N(T(e)?tt(e)?void 0!==i?new m(e,y(n,u),i):void 0!==n?new m(e,y(n,u)):new m(e):J(e)?_(h,e):r(I,h,e):new m(p(e)),t,h)}),k&&k(h,Y),R(x(m),function(t){t in h||f(h,t,m[t])}),h.prototype=b):(h=i(function(t,e,n,i){s(t,b);var o,a,c,f=0,l=0;if(T(e)){if(!tt(e))return J(e)?_(h,e):r(I,h,e);o=e,l=y(n,u);var v=e.byteLength;if(void 0===i){if(v%u)throw new z(X);if((a=v-l)<0)throw new z(X)}else if((a=d(i)*u)+l>v)throw new z(X);c=a/u}else c=p(e),o=new H(a=c*u);for(D(t,{buffer:o,byteOffset:l,byteLength:a,length:c,view:new V(o)});f<c;)S(t,f++)}),k&&k(h,Y),b=h.prototype=O(Q)),b.constructor!==h&&f(b,"constructor",h),L(b).TypedArrayConstructor=h,$&&f(b,$,c);var A=h!==m;w[c]=h,t({global:!0,constructor:!0,forced:A,sham:!G},w),K in h||f(h,K,u),K in b||f(b,K,u),P(c)}):Zf.exports=function(){},Zf.exports}Xf||(Xf=1,cl()("Float32",function(t){return function(e,r,n){return t(this,e,r,n)}}));var fl,ll,dl,pl={};!function(){if(dl)return pl;dl=1;var t=st(),e=tl(),r=function(){if(ll)return fl;ll=1;var t=re(),e=lr(),r=pr(),n=wi(),i=Math.min;return fl=[].copyWithin||function(o,a){var u=t(this),s=r(u),c=e(o,s),f=e(a,s),l=arguments.length>2?arguments[2]:void 0,d=i((void 0===l?s:e(l,s))-f,s-c),p=1;for(f<c&&c<f+d&&(p=-1,f+=d-1,c+=d-1);d-- >0;)f in u?u[c]=u[f]:n(u,c),c+=p,f+=p;return u},fl}(),n=t(r),i=e.aTypedArray;(0,e.exportTypedArrayMethod)("copyWithin",function(t,e){return n(i(this),t,e,arguments.length>2?arguments[2]:void 0)})}();var vl,ml={};!function(){if(vl)return ml;vl=1;var t=tl(),e=Xo().every,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("every",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var yl,hl={};!function(){if(yl)return hl;yl=1;var t=tl(),e=Af(),r=al(),n=ti(),i=h(),o=st(),a=v(),u=t.aTypedArray,s=t.exportTypedArrayMethod,c=o("".slice);s("fill",function(t){var o=arguments.length;u(this);var a="Big"===c(n(this),0,3)?r(t):+t;return i(e,this,a,o>1?arguments[1]:void 0,o>2?arguments[2]:void 0)},a(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}))}();var gl,bl,wl,Sl={};!function(){if(wl)return Sl;wl=1;var t=tl(),e=Xo().filter,r=function(){if(bl)return gl;bl=1;var t=sl(),e=tl().getTypedArrayConstructor;return gl=function(r,n){return t(e(r),n)}}(),n=t.aTypedArray;(0,t.exportTypedArrayMethod)("filter",function(t){var i=e(n(this),t,arguments.length>1?arguments[1]:void 0);return r(this,i)})}();var Tl,Al={};!function(){if(Tl)return Al;Tl=1;var t=tl(),e=Xo().find,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("find",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var Ol,El={};!function(){if(Ol)return El;Ol=1;var t=tl(),e=Xo().findIndex,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("findIndex",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var kl,xl={};!function(){if(kl)return xl;kl=1;var t=tl(),e=Xo().forEach,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("forEach",function(t){e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var Il,Rl={};!function(){if(Il)return Rl;Il=1;var t=tl(),e=vr().includes,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("includes",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var Pl,Cl={};!function(){if(Pl)return Cl;Pl=1;var t=tl(),e=vr().indexOf,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("indexOf",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var Ml,jl={};!function(){if(Ml)return jl;Ml=1;var t=i(),e=v(),r=st(),n=tl(),o=Bn(),a=oe()("iterator"),u=t.Uint8Array,s=r(o.values),c=r(o.keys),f=r(o.entries),l=n.aTypedArray,d=n.exportTypedArrayMethod,p=u&&u.prototype,m=!e(function(){p[a].call([1])}),y=!!p&&p.values&&p[a]===p.values&&"values"===p.values.name,h=function(){return s(l(this))};d("entries",function(){return f(l(this))},m),d("keys",function(){return c(l(this))},m),d("values",h,m||!y,{name:"values"}),d(a,h,m||!y,{name:"values"})}();var _l,Bl={};!function(){if(_l)return Bl;_l=1;var t=tl(),e=st(),r=t.aTypedArray,n=t.exportTypedArrayMethod,i=e([].join);n("join",function(t){return i(r(this),t)})}();var Nl,Ul,Dl,Ll={};!function(){if(Dl)return Ll;Dl=1;var t=tl(),e=Ou(),r=function(){if(Ul)return Nl;Ul=1;var t=Ou(),e=pt(),r=fr(),n=pr(),i=Dr(),o=Math.min,a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0,s=i("lastIndexOf");return Nl=u||!s?function(i){if(u)return t(a,this,arguments)||0;var s=e(this),c=n(s);if(0===c)return-1;var f=c-1;for(arguments.length>1&&(f=o(f,r(arguments[1]))),f<0&&(f=c+f);f>=0;f--)if(f in s&&s[f]===i)return f||0;return-1}:a,Nl}(),n=t.aTypedArray;(0,t.exportTypedArrayMethod)("lastIndexOf",function(t){var i=arguments.length;return e(r,n(this),i>1?[t,arguments[1]]:[t])})}();var Fl,ql={};!function(){if(Fl)return ql;Fl=1;var t=tl(),e=Xo().map,r=t.aTypedArray,n=t.getTypedArrayConstructor;(0,t.exportTypedArrayMethod)("map",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0,function(t,e){return new(n(t))(e)})})}();var zl,Hl={};!function(){if(zl)return Hl;zl=1;var t=tl(),e=ja().left,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("reduce",function(t){var n=arguments.length;return e(r(this),t,n,n>1?arguments[1]:void 0)})}();var Wl,Vl={};!function(){if(Wl)return Vl;Wl=1;var t=tl(),e=ja().right,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("reduceRight",function(t){var n=arguments.length;return e(r(this),t,n,n>1?arguments[1]:void 0)})}();var Gl,$l={};!function(){if(Gl)return $l;Gl=1;var t=tl(),e=t.aTypedArray,r=t.exportTypedArrayMethod,n=Math.floor;r("reverse",function(){for(var t,r=this,i=e(r).length,o=n(i/2),a=0;a<o;)t=r[a],r[a++]=r[--i],r[i]=t;return r})}();var Yl,Ql={};!function(){if(Yl)return Ql;Yl=1;var t=i(),e=h(),r=tl(),n=pr(),o=nl(),a=re(),u=v(),s=t.RangeError,c=t.Int8Array,f=c&&c.prototype,l=f&&f.set,d=r.aTypedArray,p=r.exportTypedArrayMethod,m=!u(function(){var t=new Uint8ClampedArray(2);return e(l,t,{length:1,0:3},1),3!==t[1]}),y=m&&r.NATIVE_ARRAY_BUFFER_VIEWS&&u(function(){var t=new c(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]});p("set",function(t){d(this);var r=o(arguments.length>1?arguments[1]:void 0,1),i=a(t);if(m)return e(l,this,i,r);var u=this.length,c=n(i),f=0;if(c+r>u)throw new s("Wrong length");for(;f<c;)this[r+f]=i[f++]},!m||y)}();var Jl,Kl={};!function(){if(Jl)return Kl;Jl=1;var t=tl(),e=v(),r=ii(),n=t.aTypedArray,i=t.getTypedArrayConstructor;(0,t.exportTypedArrayMethod)("slice",function(t,e){for(var o=r(n(this),t,e),a=i(this),u=0,s=o.length,c=new a(s);s>u;)c[u]=o[u++];return c},e(function(){new Int8Array(1).slice()}))}();var Xl,Zl={};!function(){if(Xl)return Zl;Xl=1;var t=tl(),e=Xo().some,r=t.aTypedArray;(0,t.exportTypedArrayMethod)("some",function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0)})}();var td,ed,rd,nd,id,od,ad,ud,sd,cd={};!function(){if(sd)return cd;sd=1;var t=i(),e=Ur(),r=v(),n=Ot(),o=function(){if(ed)return td;ed=1;var t=ii(),e=Math.floor,r=function(n,i){var o=n.length;if(o<8)for(var a,u,s=1;s<o;){for(u=s,a=n[s];u&&i(n[u-1],a)>0;)n[u]=n[--u];u!==s++&&(n[u]=a)}else for(var c=e(o/2),f=r(t(n,0,c),i),l=r(t(n,c),i),d=f.length,p=l.length,v=0,m=0;v<d||m<p;)n[v+m]=v<d&&m<p?i(f[v],l[m])<=0?f[v++]:l[m++]:v<d?f[v++]:l[m++];return n};return td=r}(),a=tl(),u=function(){if(nd)return rd;nd=1;var t=gt().match(/firefox\/(\d+)/i);return rd=!!t&&+t[1]}(),s=function(){if(od)return id;od=1;var t=gt();return id=/MSIE|Trident/.test(t)}(),c=bt(),f=function(){if(ud)return ad;ud=1;var t=gt().match(/AppleWebKit\/(\d+)\./);return ad=!!t&&+t[1]}(),l=a.aTypedArray,d=a.exportTypedArrayMethod,p=t.Uint16Array,m=p&&e(p.prototype.sort),y=!(!m||r(function(){m(new p(2),null)})&&r(function(){m(new p(2),{})})),h=!!m&&!r(function(){if(c)return c<74;if(u)return u<67;if(s)return!0;if(f)return f<602;var t,e,r=new p(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(m(r,function(t,e){return(t/4|0)-(e/4|0)}),t=0;t<516;t++)if(r[t]!==n[t])return!0});d("sort",function(t){return void 0!==t&&n(t),h?m(this,t):o(l(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))},!h||y)}();var fd,ld={};!function(){if(fd)return ld;fd=1;var t=tl(),e=dr(),r=lr(),n=t.aTypedArray,i=t.getTypedArrayConstructor;(0,t.exportTypedArrayMethod)("subarray",function(t,o){var a=n(this),u=a.length,s=r(t,u);return new(i(a))(a.buffer,a.byteOffset+s*a.BYTES_PER_ELEMENT,e((void 0===o?u:r(o,u))-s))})}();var dd,pd={};!function(){if(dd)return pd;dd=1;var t=i(),e=Ou(),r=tl(),n=v(),o=ii(),a=t.Int8Array,u=r.aTypedArray,s=r.exportTypedArrayMethod,c=[].toLocaleString,f=!!a&&n(function(){c.call(new a(1))});s("toLocaleString",function(){return e(c,f?o(u(this)):u(this),o(arguments))},n(function(){return[1,2].toLocaleString()!==new a([1,2]).toLocaleString()})||!n(function(){a.prototype.toLocaleString.call([1,2])}))}();var vd,md={};!function(){if(vd)return md;vd=1;var t=tl().exportTypedArrayMethod,e=v(),r=i(),n=st(),o=r.Uint8Array,a=o&&o.prototype||{},u=[].toString,s=n([].join);e(function(){u.call({})})&&(u=function(){return s(this)});var c=a.toString!==u;t("toString",u,c)}(),function(t){var e=t.StarmusHooks,r=e&&e.debugLog||function(){},n={},i=null;function o(t,r,n){try{e&&"function"==typeof e.dispatch&&e.dispatch("starmus_event",{instanceId:t,event:r,severity:n.severity||"info",message:n.message||"",data:n.data||{}})}catch(t){console.warn("[Starmus] Telemetry emit failed:",t)}}function a(){var e=t.AudioContext||t.webkitAudioContext;if(!e)throw new Error("AudioContext not supported");if((!i||"closed"===i.state)&&(i=new e({latencyHint:"interactive"}),r("[Recorder] Created AudioContext, state:",i.state),"function"!=typeof i.createMediaStreamSource))throw new Error("AudioContext lacks createMediaStreamSource");return i}function u(t){var e=a(),n=e.createMediaStreamSource(t);try{var i=function(t){var e=t.createMediaStreamDestination||t.createMediaStreamAudioDestination;if("function"!=typeof e)throw new Error("MediaStreamDestination not supported");var r=e.call(t);if(!r||!r.stream)throw new Error("Destination stream invalid");return r}(e),o=e.createBiquadFilter();o.type="highpass",o.frequency.value=85;var u=e.createDynamicsCompressor();u.threshold.value=-20,u.knee.value=40,u.ratio.value=12,u.attack.value=0,u.release.value=.25;var s=e.createAnalyser();return s.fftSize=2048,n.connect(o),o.connect(u),u.connect(s),s.connect(i),{audioContext:e,destinationStream:i.stream,analyser:s,nodes:[n,o,u,s,i],fallbackActive:!1}}catch(i){r("[Recorder] Audio graph failed â fallback to raw stream:",i.message);var c=e.createAnalyser();return c.fftSize=2048,n.connect(c),{audioContext:e,destinationStream:t,analyser:c,nodes:[n,c],fallbackActive:!0}}}t.initStarmusRecorder=function(i,s){var c=i.getState&&i.getState().tier||"A";r("[Recorder]["+s+"] Tier:",c),e.subscribe("setup-mic",function(t,e){if(e&&e.instanceId===s){if(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia){var r="Microphone not supported.";return o(s,"E_RECORDER_UNSUPPORTED",{severity:"error",message:r}),void i.dispatch({type:"starmus/error",payload:{message:r,retryable:!1}})}navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){return o(s,"E_MIC_ACCESS",{severity:"info",message:"Mic access granted"}),i.dispatch({type:"starmus/calibration-start"}),(e=t,r=function(t,e){i.dispatch({type:"starmus/calibration-update",message:t,volumePercent:e})},new Promise(function(t){var n;try{n=a()}catch(e){return void t({gain:1,snr:1,noiseFloor:0,speechLevel:0,timestamp:(new Date).toISOString()})}var i=n.createAnalyser();i.fftSize=2048;var o=n.createMediaStreamSource(e);o.connect(i);var u=new Float32Array(i.fftSize),s=[],c=Date.now();!function e(){if("running"===n.state){i.getFloatTimeDomainData(u);for(var a=0,f=0;f<u.length;f++)a+=u[f]*u[f];var l=Math.sqrt(a/u.length);if(isFinite(l)){if(s.push(l),r){var d=Math.min(100,2e3*l);r("Calibratingâ¦",d,!1)}if(Date.now()-c<15e3)requestAnimationFrame(e);else{var p=Math.max(1,Math.floor(s.length/3)),v=s.slice(0,p),m=s.slice(p,2*p),y=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e/t.length},h=y(v),g=y(m),b=g/Math.max(h,1e-6),w=b<3?6:Math.max(1,Math.min(4,.1/Math.max(g,1e-6))),S={gain:parseFloat(w.toFixed(3)),snr:parseFloat(b.toFixed(3)),noiseFloor:parseFloat(h.toFixed(6)),speechLevel:parseFloat(g.toFixed(6)),timestamp:(new Date).toISOString()};try{o.disconnect()}catch(t){}try{i.disconnect()}catch(t){}r&&r("Mic calibrated",null,!0),t(S)}}else requestAnimationFrame(e)}else requestAnimationFrame(e)}()})).then(function(e){try{t.getTracks().forEach(function(t){t.stop()})}catch(t){}i.dispatch({type:"starmus/calibration-complete",calibration:e})});var e,r}).catch(function(t){var e=t&&"NotAllowedError"===t.name?"Microphone permission denied.":"Failed to access microphone.";o(s,"E_MIC_ACCESS",{severity:"error",message:e,data:{error:t.message}}),i.dispatch({type:"starmus/error",payload:{message:e,retryable:!0}})})}}),e.subscribe("start-recording",function(e,a){if(a&&a.instanceId===s){var c=i.getState();"calibrating"!==c.status?c.calibration&&!0===c.calibration.complete?navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){var a,c=u(e),f=c.destinationStream,l=c.analyser;"suspended"===c.audioContext.state&&c.audioContext.resume().catch(function(){}),(a=f,new Promise(function(t){var e=a.getAudioTracks&&a.getAudioTracks()||[];if(e.length){var r=e[0];if("live"!==r.readyState){var n=0,i=setInterval(function(){("live"===r.readyState||n>100)&&(clearInterval(i),t()),n+=1},50);setTimeout(function(){clearInterval(i),t()},5e3)}else t()}else t()})).then(function(){if((f.getAudioTracks&&f.getAudioTracks()||[]).length){var a,u=[];try{a=new t.MediaRecorder(f,{})}catch(t){r("[Recorder] MediaRecorder creation failed:",t);try{e.getTracks().forEach(function(t){t.stop()})}catch(t){}return void i.dispatch({type:"starmus/error",payload:{message:"Unable to start recording",retryable:!0}})}var d={mediaRecorder:a,rawStream:e,processedStream:f,audioContext:c.audioContext,analyser:l,nodes:c.nodes,fallbackActive:c.fallbackActive};n[s]=d,a.ondataavailable=function(t){t.data&&t.data.size>0&&u.push(t.data)},a.onstop=function(){if(n[s]===d){try{d.audioContext&&d.audioContext.close&&d.audioContext.close()}catch(t){}var t=new Blob(u,{type:a.mimeType||"audio/webm"}),r="starmus-recording-"+Date.now()+".webm";i.dispatch({type:"starmus/recording-available",payload:{blob:t,fileName:r}});try{e.getTracks().forEach(function(t){t.stop()})}catch(t){}try{f.getTracks().forEach(function(t){t.stop()})}catch(t){}d.nodes.forEach(function(t){try{t.disconnect()}catch(t){}}),delete n[s]}},a.onerror=function(t){r("[Recorder] MediaRecorder error:",t),o(s,"E_RECORDER_ERROR",{severity:"error",message:t.message}),i.dispatch({type:"starmus/error",payload:{message:"Recording error",retryable:!0}})};try{if("inactive"!==a.state)throw new Error("MediaRecorder not in inactive state");a.start(3e3),i.dispatch({type:"starmus/mic-start"})}catch(t){r("[Recorder] mediaRecorder.start failed:",t);try{e.getTracks().forEach(function(t){t.stop()})}catch(t){}return delete n[s],i.dispatch({type:"starmus/error",payload:{message:"Cannot start recording",retryable:!0}}),void o(s,"E_RECORDER_START_FAIL",{severity:"error",message:t.message})}var p=new Float32Array(l.fftSize);d.startTime=Date.now(),d.rafId=requestAnimationFrame(function t(){var e=n[s];if(e&&e.mediaRecorder&&("recording"===e.mediaRecorder.state||"paused"===e.mediaRecorder.state)){try{e.analyser.getFloatTimeDomainData(p);for(var r=0,o=0;o<p.length;o++)r+=p[o]*p[o];var a=Math.sqrt(r/p.length),u=Math.min(100,Math.max(0,4e3*a)),c=(Date.now()-d.startTime)/1e3;i.dispatch({type:"starmus/recorder-tick",duration:c,amplitude:u})}catch(t){}d.rafId=requestAnimationFrame(t)}})}else{try{e.getTracks().forEach(function(t){t.stop()})}catch(t){}i.dispatch({type:"starmus/error",payload:{message:"Invalid audio stream",retryable:!0}})}})}).catch(function(t){var e="Could not access microphone.";o(s,"E_MIC_ACCESS",{severity:"error",message:e,data:{error:t.message}}),i.dispatch({type:"starmus/error",payload:{message:e,retryable:!0}})}):i.dispatch({type:"starmus/error",payload:{message:"Microphone not available.",retryable:!1}}):i.dispatch({type:"starmus/error",payload:{message:"Please setup your microphone first.",retryable:!0}}):i.dispatch({type:"starmus/error",payload:{message:"Please wait for calibration to complete.",retryable:!0}})}}),e.subscribe("stop-mic",function(t,e){if(e&&e.instanceId===s){var r=n[s];if(r&&r.mediaRecorder&&"recording"===r.mediaRecorder.state){i.dispatch({type:"starmus/mic-stop"});try{r.mediaRecorder.stop()}catch(t){}}}}),e.subscribe("pause-mic",function(t,e){if(e&&e.instanceId===s){var r=n[s];r&&r.mediaRecorder&&"recording"===r.mediaRecorder.state&&"function"==typeof r.mediaRecorder.pause&&(i.dispatch({type:"starmus/mic-pause"}),r.mediaRecorder.pause())}}),e.subscribe("resume-mic",function(t,e){if(e&&e.instanceId===s){var r=n[s];r&&r.mediaRecorder&&"paused"===r.mediaRecorder.state&&"function"==typeof r.mediaRecorder.resume&&(i.dispatch({type:"starmus/mic-resume"}),r.mediaRecorder.resume())}}),e.subscribe("reset",function(t,e){if(e&&e.instanceId===s){var r=n[s];if(r){try{r.mediaRecorder&&"inactive"!==r.mediaRecorder.state&&r.mediaRecorder.stop()}catch(t){}r.rafId&&cancelAnimationFrame(r.rafId),r.rawStream&&r.rawStream.getTracks().forEach(function(t){t.stop()}),r.processedStream&&r.processedStream.getTracks().forEach(function(t){t.stop()}),r.nodes&&r.nodes.forEach(function(t){try{t.disconnect()}catch(t){}}),delete n[s]}}})}}("undefined"!=typeof window?window:globalThis);var yd=("undefined"!=typeof window?window:globalThis).initStarmusRecorder;function hd(t,e){return yd(t,e)}"undefined"!=typeof window&&(window.initRecorder=yd,window.initStarmusRecorder=yd),"undefined"!=typeof window&&(window.initRecorder=hd,window.initStarmusRecorder=hd);var gd=window.StarmusHooks||window.CommandBus,bd=gd&&gd.debugLog?gd.debugLog:function(){},wd=function(){return fa(function t(e,r,n){ca(this,t),this.peaks=e,this.container=document.getElementById(r),this.data=Array.isArray(n)?n:[],this.activeTokenIndex=-1,this.isUserScrolling=!1,this.scrollTimeout=null,this.boundOnTimeUpdate=null,this.boundOnSeeked=null,this.boundOnClick=null,this.boundOnScroll=null,this.init()},[{key:"init",value:function(){this.container?(this.render(),this.bindEvents()):console.warn("[StarmusTranscript] Container not found. Transcript sync disabled.")}},{key:"render",value:function(){var t=this,e=document.createDocumentFragment();this.data.forEach(function(r,n){var i=document.createElement("span");i.textContent=r.text,i.className="starmus-word",i.dataset.index=n,i.dataset.start=r.start,i.dataset.end=r.end,"confidence"in r&&r.confidence<.8&&(i.dataset.confidence="low",i.title="Low confidence: ".concat(Math.round(100*r.confidence),"%")),e.appendChild(i),n<t.data.length-1&&e.appendChild(document.createTextNode(" "))}),this.container.innerHTML="",this.container.appendChild(e),this.activeTokenIndex=-1}},{key:"bindEvents",value:function(){var t=this;this.boundOnClick=function(e){var r=e.target;if(r.classList.contains("starmus-word")){var n=parseFloat(r.dataset.start);t.peaks&&t.peaks.player&&"function"==typeof t.peaks.player.seek&&(t.peaks.player.seek(n),gd&&"function"==typeof gd.dispatch&&gd.dispatch("starmus/transcript/seek",{time:n},{instanceId:t.peaks.instanceId}))}},this.container.addEventListener("click",this.boundOnClick),this.boundOnScroll=function(){t.isUserScrolling=!0,t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.scrollTimeout=setTimeout(function(){t.isUserScrolling=!1},1e3)},this.container.addEventListener("scroll",this.boundOnScroll);var e=this.peaks&&this.peaks.player&&this.peaks.player.getMediaElement?this.peaks.player.getMediaElement():null;e&&"function"==typeof e.addEventListener?(this.boundOnTimeUpdate=function(){var r=e.currentTime;"number"!=typeof r||isNaN(r)||t.syncHighlight(r)},e.addEventListener("timeupdate",this.boundOnTimeUpdate),this.boundOnSeeked=function(){var r=e.currentTime;"number"!=typeof r||isNaN(r)||t.syncHighlight(r)},e.addEventListener("seeked",this.boundOnSeeked)):bd("[StarmusTranscript] Player media element not found â sync disabled")}},{key:"findTokenIndex",value:function(t){if("number"!=typeof t||0===this.data.length)return-1;for(var e=0,r=this.data.length-1;e<=r;){var n=e+r>>1,i=this.data[n];if(t>=i.start&&t<=i.end)return n;t<i.start?r=n-1:e=n+1}return-1}},{key:"syncHighlight",value:function(t){var e=this.findTokenIndex(t);-1===e?this.clearHighlight():e!==this.activeTokenIndex&&this.updateDOM(e)}},{key:"updateDOM",value:function(t){var e=this.container.querySelectorAll(".starmus-word");this.activeTokenIndex>=0&&e[this.activeTokenIndex]&&e[this.activeTokenIndex].classList.remove("is-active"),this.activeTokenIndex=t;var r=e[t];r&&(r.classList.add("is-active"),this.isUserScrolling||this.scrollToWord(r))}},{key:"clearHighlight",value:function(){var t=this.container.querySelector(".starmus-word.is-active");t&&t.classList.remove("is-active"),this.activeTokenIndex=-1}},{key:"scrollToWord",value:function(t){t.scrollIntoView&&t.scrollIntoView({block:"center",behavior:"smooth"})}},{key:"updateData",value:function(t){this.data=Array.isArray(t)?t:[],this.render(),this.unbindEvents(),this.bindEvents()}},{key:"unbindEvents",value:function(){if(this.container){this.boundOnClick&&this.container.removeEventListener("click",this.boundOnClick),this.boundOnScroll&&this.container.removeEventListener("scroll",this.boundOnScroll);var t=this.peaks&&this.peaks.player&&this.peaks.player.getMediaElement?this.peaks.player.getMediaElement():null;t&&"function"==typeof t.removeEventListener&&(this.boundOnTimeUpdate&&t.removeEventListener("timeupdate",this.boundOnTimeUpdate),this.boundOnSeeked&&t.removeEventListener("seeked",this.boundOnSeeked))}}},{key:"destroy",value:function(){this.unbindEvents(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.container&&(this.container.innerHTML=""),this.data=[],this.activeTokenIndex=-1,this.isUserScrolling=!1}}])}();function Sd(t,e,r){return new wd(t,e,r)}"undefined"!=typeof window&&(window.StarmusTranscript=wd,window.StarmusTranscriptController={StarmusTranscript:wd,init:Sd}),"undefined"!=typeof module&&module.exports&&(module.exports={StarmusTranscript:wd,init:Sd});var Td,Ad={};!function(){if(Td)return Ad;Td=1;var t=Nr(),e=m(),r=Se().f;t({target:"Object",stat:!0,forced:Object.defineProperty!==r,sham:!e},{defineProperty:r})}(),function(t){if(t.Starmus=t.Starmus||{},t.STARMUS_EDITOR_DATA?(t.STARMUS_BOOTSTRAP=t.STARMUS_EDITOR_DATA,t.STARMUS_BOOTSTRAP.pageType="editor"):t.STARMUS_RERECORDER_DATA?(t.STARMUS_BOOTSTRAP=t.STARMUS_RERECORDER_DATA,t.STARMUS_BOOTSTRAP.pageType="rerecorder"):t.STARMUS_RECORDER_DATA&&(t.STARMUS_BOOTSTRAP=t.STARMUS_RECORDER_DATA,t.STARMUS_BOOTSTRAP.pageType="recorder"),t.Starmus_DisableOptionalNodes=!0,t.Starmus_DisableOptionalNodes){var e=(t.AudioContext||t.webkitAudioContext||{}).prototype;e&&(e.createConstantSource&&(e.createConstantSource=function(){throw new Error("ConstantSourceNode disabled")}),e.createIIRFilter&&(e.createIIRFilter=function(){throw new Error("IIRFilterNode disabled")}))}!function(t){try{if("function"==typeof t.Peaks||"object"===ba(t.Peaks))return void(t.Starmus.Peaks=t.Peaks);Object.defineProperty(t,"Peaks",{get:function(){return t.Starmus.Peaks},set:function(e){t.Starmus.Peaks=e},configurable:!0})}catch(t){console.warn("[Starmus] Peaks.js exposure failed:",t)}}(t);var r=t.StarmusHooks,n=t.createStore,i=t.initUI,o=t.initCore,a=t.initOffline;function u(e,r){try{t.StarmusHooks&&"function"==typeof t.StarmusHooks.doAction&&t.StarmusHooks.doAction("starmus_event",{instanceId:r.instanceId||null,event:e,severity:r.severity||"info",message:r.message||"",data:r.data||{}})}catch(t){console.warn("[Starmus] Global telemetry emit failed:",t)}}function s(){try{return navigator.deviceMemory||null}catch(t){return null}}function c(){try{return navigator.hardwareConcurrency||null}catch(t){return null}}function f(){return(f=sa(va().m(function t(e){var r,n;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if("C"!==e){t.n=1;break}return t.a(2,"C");case 1:if(!navigator.storage||!navigator.storage.estimate){t.n=6;break}return t.p=2,t.n=3,navigator.storage.estimate();case 3:if(r=t.v,!((n=(r.quota||0)/1024/1024)&&n<80)){t.n=4;break}return t.a(2,"C");case 4:t.n=6;break;case 5:t.p=5,t.v;case 6:if(!navigator.permissions||!navigator.permissions.query){t.n=11;break}return t.p=7,t.n=8,navigator.permissions.query({name:"microphone"});case 8:if("denied"!==t.v.state){t.n=9;break}return t.a(2,"C");case 9:t.n=11;break;case 10:t.p=10,t.v;case 11:return t.a(2,e)}},t,null,[[7,10],[2,5]])}))).apply(this,arguments)}function l(){try{var e=!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia),r="function"==typeof t.MediaRecorder,n=!(!t.AudioContext&&!t.webkitAudioContext);return e&&r&&n}catch(t){return!1}}t.StarmusApp=t.StarmusApp||{},t.StarmusApp.isRecordingSupported=l,a().catch(function(t){console.error("[Starmus] Offline queue init failed:",t)});var d={};function p(e,p){if(r=t.StarmusHooks,n=t.createStore,i=t.initUI,o=t.initCore,a=t.initOffline,r&&n&&i&&o&&a||(console.error("[Starmus Integrator] Critical dependencies missing â cannot initialize."),console.error("Available:",{CommandBus:!!r,createStore:!!n,initUI:!!i,initCore:!!o,initOfflineQueue:!!a}),0)){var v=p.getAttribute("data-starmus-id");if(v||(v="starmus_"+Date.now()+"_"+Math.random().toString(16).slice(2),p.setAttribute("data-starmus-id",v)),d[v])return v;var m=function(t){var e=t.capabilities||{},r=t.network||{};if(/\bCrOS\b|Chrome OS/i.test(navigator.userAgent))return"A";if(!e.mediaRecorder||!e.webrtc)return"C";var n=s(),i=c();if(n&&n<1)return"C";if(i){if(1===i)return"C";if(2===i)return"B"}return/wv|Crosswalk|Android WebView|Opera Mini/i.test(navigator.userAgent)?"C":"2g"===r.effectiveType||"slow-2g"===r.effectiveType||n&&n<2?"B":"A"}(e);(function(t){return f.apply(this,arguments)})(m).then(function(r){console.log("[Starmus] Instance",v,"-> Tier",r),u("TIER_ASSIGN",{instanceId:v,severity:"info",message:"Tier "+r+" assigned",data:{tier:r}});var a=n({instanceId:v,env:e,tier:r});a.getState().tier||a.dispatch({type:"starmus/tier-ready",payload:{tier:r}});var s={step1:p.querySelector(".starmus-step-1"),step2:p.querySelector(".starmus-step-2"),continueBtn:p.querySelector('[data-starmus-action="continue"]'),messageBox:p.querySelector("[data-starmus-message-box]"),setupMicBtn:p.querySelector('[data-starmus-action="setup-mic"]'),recordBtn:p.querySelector('[data-starmus-action="record"]'),pauseBtn:p.querySelector('[data-starmus-action="pause"]'),resumeBtn:p.querySelector('[data-starmus-action="resume"]'),stopBtn:p.querySelector('[data-starmus-action="stop"]'),submitBtn:p.querySelector('[data-starmus-action="submit"]'),resetBtn:p.querySelector('[data-starmus-action="reset"]'),fileInput:p.querySelector('input[type="file"]'),statusEl:p.querySelector("[data-starmus-status]"),progressEl:p.querySelector("[data-starmus-progress]"),progressWrap:p.querySelector(".starmus-progress-wrap"),recorderContainer:p.querySelector("[data-starmus-recorder-container]"),fallbackContainer:p.querySelector("[data-starmus-fallback-container]"),timer:p.querySelector("[data-starmus-timer]"),timerElapsed:p.querySelector(".starmus-timer-elapsed"),volumeMeter:p.querySelector("[data-starmus-volume-meter]"),durationProgress:p.querySelector("[data-starmus-duration-progress]")};console.log("[Starmus] Elements collected for instance:",v,{recordBtn:!!s.recordBtn,setupMicBtn:!!s.setupMicBtn,volumeMeter:!!s.volumeMeter,timer:!!s.timer,formEl:!!p}),console.log("[Starmus] About to call initUI"),i(a,s),console.log("[Starmus] UI initialization complete"),o(a,v,e),"C"!==r&&l()?"function"==typeof t.initRecorder?t.initRecorder(a,v):(console.error("[Starmus] initRecorder function not available"),a.dispatch({type:"starmus/error",payload:{message:"Recorder init failed",retryable:!1}})):(s.recorderContainer&&(s.recorderContainer.style.display="none"),s.fallbackContainer&&(s.fallbackContainer.style.display="block"),a.dispatch({type:"starmus/tier-ready",payload:{tier:"C",fallbackActive:!0}})),document.addEventListener("sparxstar:environment-ready",function(t){var e=t.detail||{};console.log("[Starmus] Environment ready for instance:",v,"Event detail:",e),i(a,s),console.log("[Starmus] UI initialized for instance:",v,"Elements:",{recordBtn:!!s.recordBtn,volumeMeter:!!s.volumeMeter,timer:!!s.timer})},{once:!0}),d[v]={store:a,form:p,elements:s,tier:r}})}else console.error("[Starmus] Dependencies not available - cannot initialize")}function v(t){var e=t.detail||{},r=document.querySelectorAll('form[data-starmus="recorder"]');if(r&&0!==r.length)for(var n=0;n<r.length;n++)p(e,r[n])}function m(){var e=function(){try{return navigator.connection||navigator.mozConnection||navigator.webkitConnection||null}catch(t){return null}}()||{},r={browser:{userAgent:navigator.userAgent},device:{type:/mobile|android|iphone|ipad/i.test(navigator.userAgent)?"mobile":"desktop",memory:s(),concurrency:c()},capabilities:{webrtc:!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia),mediaRecorder:!!t.MediaRecorder,indexedDB:!!t.indexedDB},network:{effectiveType:e.effectiveType||"unknown",downlink:e.downlink||null,saveData:e.saveData||!1}};u("E_ENV_FALLBACK_INIT",{severity:"warning",message:"Fallback env used",data:{fallbackEnv:r}}),v({detail:r})}var y=!1,h=null;document.addEventListener("sparxstar:environment-ready",function(t){y=!0,h&&(clearTimeout(h),h=null),v(t)}),h=setTimeout(function(){y||(console.warn("[Starmus] environment-ready not fired; using fallback."),m())},2e3),t.Starmus.instances=d}("undefined"!=typeof window?window:globalThis),"undefined"!=typeof module&&module.exports&&(module.exports=global.Starmus),window.createStore=oa,window.initCore=Kc,window.initUI=Uc,window.initRecorder=hd,window.StarmusTus=Gs,window.StarmusTranscriptController=wd,window.StarmusOfflineQueue=gc,window.StarmusQueueSubmission=wc,window.initOffline=Ac,window.StarmusIntegrator=!0,window.StarmusRecorder=hd,window.initStarmusRecorder=hd,console.log("[Starmus] Runtime globals wired");export{wd as StarmusTranscript,Gs as StarmusTus,oa as createStore,gc as getOfflineQueue,Kc as initCore,Ac as initOffline,hd as initRecorder,Uc as initUI,wc as queueSubmission};
