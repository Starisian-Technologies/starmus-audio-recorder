var t,r,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={};function i(){if(r)return t;r=1;var n=function(t){return t&&t.Math===Math&&t};return t=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}var o,a,u,c,s,f,l,d,p={};function v(){return a?o:(a=1,o=function(t){try{return!!t()}catch(t){return!0}})}function y(){if(c)return u;c=1;var t=v();return u=!t(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})}function m(){if(f)return s;f=1;var t=v();return s=!t(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})}function h(){if(d)return l;d=1;var t=m(),r=Function.prototype.call;return l=t?r.bind(r):function(){return r.apply(r,arguments)},l}var g,b,w,S,T,A,O,E,k,x,R,I,P,C,M,j,_,N,D,L,B,U,F,q,z,H,W,V,G,$,Y,Q,J,K,X,Z,tt,rt,et,nt,it,ot={};function at(){if(g)return ot;g=1;var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,e=r&&!t.call({1:2},1);return ot.f=e?function(t){var e=r(this,t);return!!e&&e.enumerable}:t,ot}function ut(){return w?b:(w=1,b=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}})}function ct(){if(T)return S;T=1;var t=m(),r=Function.prototype,e=r.call,n=t&&r.bind.bind(e,e);return S=t?n:function(t){return function(){return e.apply(t,arguments)}},S}function st(){if(O)return A;O=1;var t=ct(),r=t({}.toString),e=t("".slice);return A=function(t){return e(r(t),8,-1)}}function ft(){if(k)return E;k=1;var t=ct(),r=v(),e=st(),n=Object,i=t("".split);return E=r(function(){return!n("z").propertyIsEnumerable(0)})?function(t){return"String"===e(t)?i(t,""):n(t)}:n}function lt(){return R?x:(R=1,x=function(t){return null==t})}function dt(){if(P)return I;P=1;var t=lt(),r=TypeError;return I=function(e){if(t(e))throw new r("Can't call method on "+e);return e}}function pt(){if(M)return C;M=1;var t=ft(),r=dt();return C=function(e){return t(r(e))}}function vt(){if(_)return j;_=1;var t="object"==typeof document&&document.all;return j=void 0===t&&void 0!==t?function(r){return"function"==typeof r||r===t}:function(t){return"function"==typeof t}}function yt(){if(D)return N;D=1;var t=vt();return N=function(r){return"object"==typeof r?null!==r:t(r)}}function mt(){if(B)return L;B=1;var t=i(),r=vt();return L=function(e,n){return arguments.length<2?(i=t[e],r(i)?i:void 0):t[e]&&t[e][n];var i},L}function ht(){if(F)return U;F=1;var t=ct();return U=t({}.isPrototypeOf)}function gt(){if(z)return q;z=1;var t=i().navigator,r=t&&t.userAgent;return q=r?String(r):""}function bt(){if(W)return H;W=1;var t,r,e=i(),n=gt(),o=e.process,a=e.Deno,u=o&&o.versions||a&&a.version,c=u&&u.v8;return c&&(r=(t=c.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!r&&n&&(!(t=n.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=n.match(/Chrome\/(\d+)/))&&(r=+t[1]),H=r}function wt(){if(G)return V;G=1;var t=bt(),r=v(),e=i().String;return V=!!Object.getOwnPropertySymbols&&!r(function(){var r=Symbol("symbol detection");return!e(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&t&&t<41})}function St(){if(Y)return $;Y=1;var t=wt();return $=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function Tt(){if(J)return Q;J=1;var t=mt(),r=vt(),e=ht(),n=St(),i=Object;return Q=n?function(t){return"symbol"==typeof t}:function(n){var o=t("Symbol");return r(o)&&e(o.prototype,i(n))}}function At(){if(X)return K;X=1;var t=String;return K=function(r){try{return t(r)}catch(t){return"Object"}}}function Ot(){if(tt)return Z;tt=1;var t=vt(),r=At(),e=TypeError;return Z=function(n){if(t(n))return n;throw new e(r(n)+" is not a function")}}function Et(){if(et)return rt;et=1;var t=Ot(),r=lt();return rt=function(e,n){var i=e[n];return r(i)?void 0:t(i)}}function kt(){if(it)return nt;it=1;var t=h(),r=vt(),e=yt(),n=TypeError;return nt=function(i,o){var a,u;if("string"===o&&r(a=i.toString)&&!e(u=t(a,i)))return u;if(r(a=i.valueOf)&&!e(u=t(a,i)))return u;if("string"!==o&&r(a=i.toString)&&!e(u=t(a,i)))return u;throw new n("Can't convert object to primitive value")}}var xt,Rt,It,Pt,Ct,Mt,jt,_t,Nt,Dt,Lt,Bt,Ut,Ft,qt,zt,Ht,Wt,Vt,Gt,$t,Yt,Qt,Jt,Kt={exports:{}};function Xt(){return Rt?xt:(Rt=1,xt=!1)}function Zt(){if(Pt)return It;Pt=1;var t=i(),r=Object.defineProperty;return It=function(e,n){try{r(t,e,{value:n,configurable:!0,writable:!0})}catch(r){t[e]=n}return n}}function tr(){if(Ct)return Kt.exports;Ct=1;var t=Xt(),r=i(),e=Zt(),n="__core-js_shared__",o=Kt.exports=r[n]||e(n,{});return(o.versions||(o.versions=[])).push({version:"3.47.0",mode:t?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Kt.exports}function rr(){if(jt)return Mt;jt=1;var t=tr();return Mt=function(r,e){return t[r]||(t[r]=e||{})}}function er(){if(Nt)return _t;Nt=1;var t=dt(),r=Object;return _t=function(e){return r(t(e))}}function nr(){if(Lt)return Dt;Lt=1;var t=ct(),r=er(),e=t({}.hasOwnProperty);return Dt=Object.hasOwn||function(t,n){return e(r(t),n)}}function ir(){if(Ut)return Bt;Ut=1;var t=ct(),r=0,e=Math.random(),n=t(1.1.toString);return Bt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+n(++r+e,36)}}function or(){if(qt)return Ft;qt=1;var t=i(),r=rr(),e=nr(),n=ir(),o=wt(),a=St(),u=t.Symbol,c=r("wks"),s=a?u.for||u:u&&u.withoutSetter||n;return Ft=function(t){return e(c,t)||(c[t]=o&&e(u,t)?u[t]:s("Symbol."+t)),c[t]}}function ar(){if(Ht)return zt;Ht=1;var t=h(),r=yt(),e=Tt(),n=Et(),i=kt(),o=or(),a=TypeError,u=o("toPrimitive");return zt=function(o,c){if(!r(o)||e(o))return o;var s,f=n(o,u);if(f){if(void 0===c&&(c="default"),s=t(f,o,c),!r(s)||e(s))return s;throw new a("Can't convert object to primitive value")}return void 0===c&&(c="number"),i(o,c)}}function ur(){if(Vt)return Wt;Vt=1;var t=ar(),r=Tt();return Wt=function(e){var n=t(e,"string");return r(n)?n:n+""}}function cr(){if($t)return Gt;$t=1;var t=i(),r=yt(),e=t.document,n=r(e)&&r(e.createElement);return Gt=function(t){return n?e.createElement(t):{}}}function sr(){if(Qt)return Yt;Qt=1;var t=y(),r=v(),e=cr();return Yt=!t&&!r(function(){return 7!==Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})}function fr(){if(Jt)return p;Jt=1;var t=y(),r=h(),e=at(),n=ut(),i=pt(),o=ur(),a=nr(),u=sr(),c=Object.getOwnPropertyDescriptor;return p.f=t?c:function(t,s){if(t=i(t),s=o(s),u)try{return c(t,s)}catch(t){}if(a(t,s))return n(!r(e.f,t,s),t[s])},p}var lr,dr,pr,vr,yr,mr,hr,gr={};function br(){if(dr)return lr;dr=1;var t=y(),r=v();return lr=t&&r(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})}function wr(){if(vr)return pr;vr=1;var t=yt(),r=String,e=TypeError;return pr=function(n){if(t(n))return n;throw new e(r(n)+" is not an object")}}function Sr(){if(yr)return gr;yr=1;var t=y(),r=sr(),e=br(),n=wr(),i=ur(),o=TypeError,a=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",s="configurable",f="writable";return gr.f=t?e?function(t,r,e){if(n(t),r=i(r),n(e),"function"==typeof t&&"prototype"===r&&"value"in e&&f in e&&!e[f]){var o=u(t,r);o&&o[f]&&(t[r]=e.value,e={configurable:s in e?e[s]:o[s],enumerable:c in e?e[c]:o[c],writable:!1})}return a(t,r,e)}:a:function(t,e,u){if(n(t),e=i(e),n(u),r)try{return a(t,e,u)}catch(t){}if("get"in u||"set"in u)throw new o("Accessors not supported");return"value"in u&&(t[e]=u.value),t},gr}function Tr(){if(hr)return mr;hr=1;var t=y(),r=Sr(),e=ut();return mr=t?function(t,n,i){return r.f(t,n,e(1,i))}:function(t,r,e){return t[r]=e,t}}var Ar,Or,Er,kr,xr,Rr,Ir,Pr,Cr,Mr,jr,_r,Nr,Dr,Lr,Br={exports:{}};function Ur(){if(Or)return Ar;Or=1;var t=y(),r=nr(),e=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,i=r(e,"name"),o=i&&"something"===function(){}.name,a=i&&(!t||t&&n(e,"name").configurable);return Ar={EXISTS:i,PROPER:o,CONFIGURABLE:a}}function Fr(){if(kr)return Er;kr=1;var t=ct(),r=vt(),e=tr(),n=t(Function.toString);return r(e.inspectSource)||(e.inspectSource=function(t){return n(t)}),Er=e.inspectSource}function qr(){if(Pr)return Ir;Pr=1;var t=rr(),r=ir(),e=t("keys");return Ir=function(t){return e[t]||(e[t]=r(t))}}function zr(){return Mr?Cr:(Mr=1,Cr={})}function Hr(){if(_r)return jr;_r=1;var t,r,e,n=function(){if(Rr)return xr;Rr=1;var t=i(),r=vt(),e=t.WeakMap;return xr=r(e)&&/native code/.test(String(e))}(),o=i(),a=yt(),u=Tr(),c=nr(),s=tr(),f=qr(),l=zr(),d="Object already initialized",p=o.TypeError,v=o.WeakMap;if(n||s.state){var y=s.state||(s.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,t=function(t,r){if(y.has(t))throw new p(d);return r.facade=t,y.set(t,r),r},r=function(t){return y.get(t)||{}},e=function(t){return y.has(t)}}else{var m=f("state");l[m]=!0,t=function(t,r){if(c(t,m))throw new p(d);return r.facade=t,u(t,m,r),r},r=function(t){return c(t,m)?t[m]:{}},e=function(t){return c(t,m)}}return jr={set:t,get:r,has:e,enforce:function(n){return e(n)?r(n):t(n,{})},getterFor:function(t){return function(e){var n;if(!a(e)||(n=r(e)).type!==t)throw new p("Incompatible receiver, "+t+" required");return n}}}}function Wr(){if(Nr)return Br.exports;Nr=1;var t=ct(),r=v(),e=vt(),n=nr(),i=y(),o=Ur().CONFIGURABLE,a=Fr(),u=Hr(),c=u.enforce,s=u.get,f=String,l=Object.defineProperty,d=t("".slice),p=t("".replace),m=t([].join),h=i&&!r(function(){return 8!==l(function(){},"length",{value:8}).length}),g=String(String).split("String"),b=Br.exports=function(t,r,e){"Symbol("===d(f(r),0,7)&&(r="["+p(f(r),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(r="get "+r),e&&e.setter&&(r="set "+r),(!n(t,"name")||o&&t.name!==r)&&(i?l(t,"name",{value:r,configurable:!0}):t.name=r),h&&e&&n(e,"arity")&&t.length!==e.arity&&l(t,"length",{value:e.arity});try{e&&n(e,"constructor")&&e.constructor?i&&l(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=c(t);return n(a,"source")||(a.source=m(g,"string"==typeof r?r:"")),t};return Function.prototype.toString=b(function(){return e(this)&&s(this).source||a(this)},"toString"),Br.exports}function Vr(){if(Lr)return Dr;Lr=1;var t=vt(),r=Sr(),e=Wr(),n=Zt();return Dr=function(i,o,a,u){u||(u={});var c=u.enumerable,s=void 0!==u.name?u.name:o;if(t(a)&&e(a,s,u),u.global)c?i[o]=a:n(o,a);else{try{u.unsafe?i[o]&&(c=!0):delete i[o]}catch(t){}c?i[o]=a:r.f(i,o,{value:a,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return i}}var Gr,$r,Yr,Qr,Jr,Kr,Xr,Zr,te,re,ee,ne,ie,oe,ae,ue,ce,se={};function fe(){if(Qr)return Yr;Qr=1;var t=function(){if($r)return Gr;$r=1;var t=Math.ceil,r=Math.floor;return Gr=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}}();return Yr=function(r){var e=+r;return e!=e||0===e?0:t(e)}}function le(){if(Kr)return Jr;Kr=1;var t=fe(),r=Math.max,e=Math.min;return Jr=function(n,i){var o=t(n);return o<0?r(o+i,0):e(o,i)}}function de(){if(Zr)return Xr;Zr=1;var t=fe(),r=Math.min;return Xr=function(e){var n=t(e);return n>0?r(n,9007199254740991):0}}function pe(){if(re)return te;re=1;var t=de();return te=function(r){return t(r.length)}}function ve(){if(ne)return ee;ne=1;var t=pt(),r=le(),e=pe(),n=function(n){return function(i,o,a){var u=t(i),c=e(u);if(0===c)return!n&&-1;var s,f=r(a,c);if(n&&o!=o){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((n||f in u)&&u[f]===o)return n||f||0;return!n&&-1}};return ee={includes:n(!0),indexOf:n(!1)}}function ye(){if(oe)return ie;oe=1;var t=ct(),r=nr(),e=pt(),n=ve().indexOf,i=zr(),o=t([].push);return ie=function(t,a){var u,c=e(t),s=0,f=[];for(u in c)!r(i,u)&&r(c,u)&&o(f,u);for(;a.length>s;)r(c,u=a[s++])&&(~n(f,u)||o(f,u));return f}}function me(){return ue?ae:(ue=1,ae=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function he(){if(ce)return se;ce=1;var t=ye(),r=me().concat("length","prototype");return se.f=Object.getOwnPropertyNames||function(e){return t(e,r)},se}var ge,be,we,Se,Te,Ae,Oe,Ee,ke,xe,Re,Ie,Pe,Ce,Me={};function je(){if(we)return be;we=1;var t=mt(),r=ct(),e=he(),n=(ge||(ge=1,Me.f=Object.getOwnPropertySymbols),Me),i=wr(),o=r([].concat);return be=t("Reflect","ownKeys")||function(t){var r=e.f(i(t)),a=n.f;return a?o(r,a(t)):r}}function _e(){if(Te)return Se;Te=1;var t=nr(),r=je(),e=fr(),n=Sr();return Se=function(i,o,a){for(var u=r(o),c=n.f,s=e.f,f=0;f<u.length;f++){var l=u[f];t(i,l)||a&&t(a,l)||c(i,l,s(o,l))}}}function Ne(){if(Oe)return Ae;Oe=1;var t=v(),r=vt(),e=/#|\.prototype\./,n=function(e,n){var c=o[i(e)];return c===u||c!==a&&(r(n)?t(n):!!n)},i=n.normalize=function(t){return String(t).replace(e,".").toLowerCase()},o=n.data={},a=n.NATIVE="N",u=n.POLYFILL="P";return Ae=n}function De(){if(ke)return Ee;ke=1;var t=i(),r=fr().f,e=Tr(),n=Vr(),o=Zt(),a=_e(),u=Ne();return Ee=function(i,c){var s,f,l,d,p,v=i.target,y=i.global,m=i.stat;if(s=y?t:m?t[v]||o(v,{}):t[v]&&t[v].prototype)for(f in c){if(d=c[f],l=i.dontCallGetSet?(p=r(s,f))&&p.value:s[f],!u(y?f:v+(m?".":"#")+f,i.forced)&&void 0!==l){if(typeof d==typeof l)continue;a(d,l)}(i.sham||l&&l.sham)&&e(d,"sham",!0),n(s,f,d,i)}}}function Le(){if(Re)return xe;Re=1;var t=st(),r=ct();return xe=function(e){if("Function"===t(e))return r(e)}}function Be(){if(Pe)return Ie;Pe=1;var t=v();return Ie=function(r,e){var n=[][r];return!!n&&t(function(){n.call(null,e||function(){return 1},1)})}}!function(){if(Ce)return n;Ce=1;var t=De(),r=Le(),e=ve().indexOf,i=Be(),o=r([].indexOf),a=!!o&&1/o([1],1,-0)<0;t({target:"Array",proto:!0,forced:a||!i("indexOf")},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return a?o(this,t,r)||0:e(this,t,r)}})}();var Ue,Fe,qe,ze,He,We,Ve,Ge,$e,Ye,Qe,Je,Ke,Xe,Ze,tn,rn,en,nn,on,an,un,cn,sn,fn,ln,dn,pn,vn,yn,mn,hn,gn,bn,wn,Sn={};function Tn(){if(Fe)return Ue;Fe=1;var t=ye(),r=me();return Ue=Object.keys||function(e){return t(e,r)}}function An(){if(He)return ze;He=1;var t=mt();return ze=t("document","documentElement")}function On(){if(Ve)return We;Ve=1;var t,r=wr(),e=function(){if(qe)return Sn;qe=1;var t=y(),r=br(),e=Sr(),n=wr(),i=pt(),o=Tn();return Sn.f=t&&!r?Object.defineProperties:function(t,r){n(t);for(var a,u=i(r),c=o(r),s=c.length,f=0;s>f;)e.f(t,a=c[f++],u[a]);return t},Sn}(),n=me(),i=zr(),o=An(),a=cr(),u=qr(),c="prototype",s="script",f=u("IE_PROTO"),l=function(){},d=function(t){return"<"+s+">"+t+"</"+s+">"},p=function(t){t.write(d("")),t.close();var r=t.parentWindow.Object;return t=null,r},v=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var r,e,i;v="undefined"!=typeof document?document.domain&&t?p(t):(e=a("iframe"),i="java"+s+":",e.style.display="none",o.appendChild(e),e.src=String(i),(r=e.contentWindow.document).open(),r.write(d("document.F=Object")),r.close(),r.F):p(t);for(var u=n.length;u--;)delete v[c][n[u]];return v()};return i[f]=!0,We=Object.create||function(t,n){var i;return null!==t?(l[c]=r(t),i=new l,l[c]=null,i[f]=t):i=v(),void 0===n?i:e.f(i,n)}}function En(){if($e)return Ge;$e=1;var t=or(),r=On(),e=Sr().f,n=t("unscopables"),i=Array.prototype;return void 0===i[n]&&e(i,n,{configurable:!0,value:r(null)}),Ge=function(t){i[n][t]=!0}}function kn(){return Qe?Ye:(Qe=1,Ye={})}function xn(){if(Ze)return Xe;Ze=1;var t=nr(),r=vt(),e=er(),n=qr(),i=function(){if(Ke)return Je;Ke=1;var t=v();return Je=!t(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})}(),o=n("IE_PROTO"),a=Object,u=a.prototype;return Xe=i?a.getPrototypeOf:function(n){var i=e(n);if(t(i,o))return i[o];var c=i.constructor;return r(c)&&i instanceof c?c.prototype:i instanceof a?u:null}}function Rn(){if(rn)return tn;rn=1;var t,r,e,n=v(),i=vt(),o=yt(),a=On(),u=xn(),c=Vr(),s=or(),f=Xt(),l=s("iterator"),d=!1;return[].keys&&("next"in(e=[].keys())?(r=u(u(e)))!==Object.prototype&&(t=r):d=!0),!o(t)||n(function(){var r={};return t[l].call(r)!==r})?t={}:f&&(t=a(t)),i(t[l])||c(t,l,function(){return this}),tn={IteratorPrototype:t,BUGGY_SAFARI_ITERATORS:d}}function In(){if(nn)return en;nn=1;var t=Sr().f,r=nr(),e=or()("toStringTag");return en=function(n,i,o){n&&!o&&(n=n.prototype),n&&!r(n,e)&&t(n,e,{configurable:!0,value:i})}}function Pn(){if(fn)return sn;fn=1;var t=yt();return sn=function(r){return t(r)||null===r}}function Cn(){if(dn)return ln;dn=1;var t=Pn(),r=String,e=TypeError;return ln=function(n){if(t(n))return n;throw new e("Can't set "+r(n)+" as a prototype")}}function Mn(){if(vn)return pn;vn=1;var t=function(){if(cn)return un;cn=1;var t=ct(),r=Ot();return un=function(e,n,i){try{return t(r(Object.getOwnPropertyDescriptor(e,n)[i]))}catch(t){}}}(),r=yt(),e=dt(),n=Cn();return pn=Object.setPrototypeOf||("__proto__"in{}?function(){var i,o=!1,a={};try{(i=t(Object.prototype,"__proto__","set"))(a,[]),o=a instanceof Array}catch(t){}return function(t,a){return e(t),n(a),r(t)?(o?i(t,a):t.__proto__=a,t):t}}():void 0)}function jn(){if(mn)return yn;mn=1;var t=De(),r=h(),e=Xt(),n=Ur(),i=vt(),o=function(){if(an)return on;an=1;var t=Rn().IteratorPrototype,r=On(),e=ut(),n=In(),i=kn(),o=function(){return this};return on=function(a,u,c,s){var f=u+" Iterator";return a.prototype=r(t,{next:e(+!s,c)}),n(a,f,!1,!0),i[f]=o,a}}(),a=xn(),u=Mn(),c=In(),s=Tr(),f=Vr(),l=or(),d=kn(),p=Rn(),v=n.PROPER,y=n.CONFIGURABLE,m=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,b=l("iterator"),w="keys",S="values",T="entries",A=function(){return this};return yn=function(n,l,p,h,O,E,k){o(p,l,h);var x,R,I,P=function(t){if(t===O&&N)return N;if(!g&&t&&t in j)return j[t];switch(t){case w:case S:case T:return function(){return new p(this,t)}}return function(){return new p(this)}},C=l+" Iterator",M=!1,j=n.prototype,_=j[b]||j["@@iterator"]||O&&j[O],N=!g&&_||P(O),D="Array"===l&&j.entries||_;if(D&&(x=a(D.call(new n)))!==Object.prototype&&x.next&&(e||a(x)===m||(u?u(x,m):i(x[b])||f(x,b,A)),c(x,C,!0,!0),e&&(d[C]=A)),v&&O===S&&_&&_.name!==S&&(!e&&y?s(j,"name",S):(M=!0,N=function(){return r(_,this)})),O)if(R={values:P(S),keys:E?N:P(w),entries:P(T)},k)for(I in R)(g||M||!(I in j))&&f(j,I,R[I]);else t({target:l,proto:!0,forced:g||M},R);return e&&!k||j[b]===N||f(j,b,N,{name:O}),d[l]=N,R}}function _n(){return gn?hn:(gn=1,hn=function(t,r){return{value:t,done:r}})}function Nn(){if(wn)return bn;wn=1;var t=pt(),r=En(),e=kn(),n=Hr(),i=Sr().f,o=jn(),a=_n(),u=Xt(),c=y(),s="Array Iterator",f=n.set,l=n.getterFor(s);bn=o(Array,"Array",function(r,e){f(this,{type:s,target:t(r),index:0,kind:e})},function(){var t=l(this),r=t.target,e=t.index++;if(!r||e>=r.length)return t.target=null,a(void 0,!0);switch(t.kind){case"keys":return a(e,!1);case"values":return a(r[e],!1)}return a([e,r[e]],!1)},"values");var d=e.Arguments=e.Array;if(r("keys"),r("values"),r("entries"),!u&&c&&"values"!==d.name)try{i(d,"name",{value:"values"})}catch(t){}return bn}Nn();var Dn,Ln,Bn,Un,Fn,qn,zn,Hn,Wn,Vn,Gn,$n,Yn,Qn,Jn,Kn={};function Xn(){if(Ln)return Dn;Ln=1;var t=st();return Dn=Array.isArray||function(r){return"Array"===t(r)}}function Zn(){if(Un)return Bn;Un=1;var t={};return t[or()("toStringTag")]="z",Bn="[object z]"===String(t)}function ti(){if(qn)return Fn;qn=1;var t=Zn(),r=vt(),e=st(),n=or()("toStringTag"),i=Object,o="Arguments"===e(function(){return arguments}());return Fn=t?e:function(t){var a,u,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(u=function(t,r){try{return t[r]}catch(t){}}(a=i(t),n))?u:o?e(a):"Object"===(c=e(a))&&r(a.callee)?"Arguments":c}}function ri(){if(Hn)return zn;Hn=1;var t=ct(),r=v(),e=vt(),n=ti(),i=mt(),o=Fr(),a=function(){},u=i("Reflect","construct"),c=/^\s*(?:class|function)\b/,s=t(c.exec),f=!c.test(a),l=function(t){if(!e(t))return!1;try{return u(a,[],t),!0}catch(t){return!1}},d=function(t){if(!e(t))return!1;switch(n(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!s(c,o(t))}catch(t){return!0}};return d.sham=!0,zn=!u||r(function(){var t;return l(l.call)||!l(Object)||!l(function(){t=!0})||t})?d:l}function ei(){if(Vn)return Wn;Vn=1;var t=y(),r=Sr(),e=ut();return Wn=function(n,i,o){t?r.f(n,i,e(0,o)):n[i]=o}}function ni(){if($n)return Gn;$n=1;var t=v(),r=or(),e=bt(),n=r("species");return Gn=function(r){return e>=51||!t(function(){var t=[];return(t.constructor={})[n]=function(){return{foo:1}},1!==t[r](Boolean).foo})}}function ii(){if(Qn)return Yn;Qn=1;var t=ct();return Yn=t([].slice)}!function(){if(Jn)return Kn;Jn=1;var t=De(),r=Xn(),e=ri(),n=yt(),i=le(),o=pe(),a=pt(),u=ei(),c=or(),s=ni(),f=ii(),l=s("slice"),d=c("species"),p=Array,v=Math.max;t({target:"Array",proto:!0,forced:!l},{slice:function(t,c){var s,l,y,m=a(this),h=o(m),g=i(t,h),b=i(void 0===c?h:c,h);if(r(m)&&(s=m.constructor,(e(s)&&(s===p||r(s.prototype))||n(s)&&null===(s=s[d]))&&(s=void 0),s===p||void 0===s))return f(m,g,b);for(l=new(void 0===s?p:s)(v(b-g,0)),y=0;g<b;g++,y++)g in m&&u(l,y,m[g]);return l.length=y,l}})}();var oi,ai,ui,ci,si,fi,li,di,pi,vi,yi,mi={};function hi(){if(ci)return ui;ci=1;var t=TypeError;return ui=function(r){if(r>9007199254740991)throw t("Maximum allowed index exceeded");return r}}function gi(){if(fi)return si;fi=1;var t=Xn(),r=ri(),e=yt(),n=or()("species"),i=Array;return si=function(o){var a;return t(o)&&(a=o.constructor,(r(a)&&(a===i||t(a.prototype))||e(a)&&null===(a=a[n]))&&(a=void 0)),void 0===a?i:a}}function bi(){if(di)return li;di=1;var t=gi();return li=function(r,e){return new(t(r))(0===e?0:e)}}function wi(){if(vi)return pi;vi=1;var t=At(),r=TypeError;return pi=function(e,n){if(!delete e[n])throw new r("Cannot delete property "+t(n)+" of "+t(e))}}!function(){if(yi)return mi;yi=1;var t=De(),r=er(),e=le(),n=fe(),i=pe(),o=function(){if(ai)return oi;ai=1;var t=y(),r=Xn(),e=TypeError,n=Object.getOwnPropertyDescriptor,i=t&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();return oi=i?function(t,i){if(r(t)&&!n(t,"length").writable)throw new e("Cannot set read only .length");return t.length=i}:function(t,r){return t.length=r}}(),a=hi(),u=bi(),c=ei(),s=wi(),f=ni()("splice"),l=Math.max,d=Math.min;t({target:"Array",proto:!0,forced:!f},{splice:function(t,f){var p,v,y,m,h,g,b=r(this),w=i(b),S=e(t,w),T=arguments.length;for(0===T?p=v=0:1===T?(p=0,v=w-S):(p=T-2,v=d(l(n(f),0),w-S)),a(w+p-v),y=u(b,v),m=0;m<v;m++)(h=S+m)in b&&c(y,m,b[h]);if(y.length=v,p<v){for(m=S;m<w-v;m++)g=m+p,(h=m+v)in b?b[g]=b[h]:s(b,g);for(m=w;m>w-v+p;m--)s(b,m-1)}else if(p>v)for(m=w-v;m>S;m--)g=m+p-1,(h=m+v-1)in b?b[g]=b[h]:s(b,g);for(m=0;m<p;m++)b[m+S]=arguments[m+2];return o(b,w-v+p),y}})}();var Si,Ti,Ai,Oi={};!function(){if(Ai)return Oi;Ai=1;var t=Zn(),r=Vr(),e=function(){if(Ti)return Si;Ti=1;var t=Zn(),r=ti();return Si=t?{}.toString:function(){return"[object "+r(this)+"]"}}();t||r(Object.prototype,"toString",e,{unsafe:!0})}();var Ei,ki,xi,Ri,Ii,Pi,Ci,Mi,ji,_i,Ni,Di,Li,Bi,Ui,Fi,qi,zi,Hi,Wi,Vi,Gi,$i,Yi,Qi,Ji,Ki,Xi,Zi,to,ro,eo,no,io,oo,ao,uo,co,so={exports:{}},fo={};function lo(){if(Ei)return fo;Ei=1;var t=st(),r=pt(),e=he().f,n=ii(),i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];return fo.f=function(o){return i&&"Window"===t(o)?function(t){try{return e(t)}catch(t){return n(i)}}(o):e(r(o))},fo}function po(){if(Ii)return Ri;Ii=1;var t=v(),r=yt(),e=st(),n=function(){if(xi)return ki;xi=1;var t=v();return ki=t(function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})}(),i=Object.isExtensible,o=t(function(){});return Ri=o||n?function(t){return!!r(t)&&((!n||"ArrayBuffer"!==e(t))&&(!i||i(t)))}:i}function vo(){if(Mi)return so.exports;Mi=1;var t=De(),r=ct(),e=zr(),n=yt(),i=nr(),o=Sr().f,a=he(),u=lo(),c=po(),s=ir(),f=function(){if(Ci)return Pi;Ci=1;var t=v();return Pi=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})}(),l=!1,d=s("meta"),p=0,y=function(t){o(t,d,{value:{objectID:"O"+p++,weakData:{}}})},m=so.exports={enable:function(){m.enable=function(){},l=!0;var e=a.f,n=r([].splice),i={};i[d]=1,e(i).length&&(a.f=function(t){for(var r=e(t),i=0,o=r.length;i<o;i++)if(r[i]===d){n(r,i,1);break}return r},t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(t,r){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,d)){if(!c(t))return"F";if(!r)return"E";y(t)}return t[d].objectID},getWeakData:function(t,r){if(!i(t,d)){if(!c(t))return!0;if(!r)return!1;y(t)}return t[d].weakData},onFreeze:function(t){return f&&l&&c(t)&&!i(t,d)&&y(t),t}};return e[d]=!0,so.exports}function yo(){if(_i)return ji;_i=1;var t=Le(),r=Ot(),e=m(),n=t(t.bind);return ji=function(t,i){return r(t),void 0===i?t:e?n(t,i):function(){return t.apply(i,arguments)}},ji}function mo(){if(Di)return Ni;Di=1;var t=or(),r=kn(),e=t("iterator"),n=Array.prototype;return Ni=function(t){return void 0!==t&&(r.Array===t||n[e]===t)}}function ho(){if(Bi)return Li;Bi=1;var t=ti(),r=Et(),e=lt(),n=kn(),i=or()("iterator");return Li=function(o){if(!e(o))return r(o,i)||r(o,"@@iterator")||n[t(o)]}}function go(){if(Fi)return Ui;Fi=1;var t=h(),r=Ot(),e=wr(),n=At(),i=ho(),o=TypeError;return Ui=function(a,u){var c=arguments.length<2?i(a):u;if(r(c))return e(t(c,a));throw new o(n(a)+" is not iterable")},Ui}function bo(){if(zi)return qi;zi=1;var t=h(),r=wr(),e=Et();return qi=function(n,i,o){var a,u;r(n);try{if(!(a=e(n,"return"))){if("throw"===i)throw o;return o}a=t(a,n)}catch(t){u=!0,a=t}if("throw"===i)throw o;if(u)throw a;return r(a),o}}function wo(){if(Wi)return Hi;Wi=1;var t=yo(),r=h(),e=wr(),n=At(),i=mo(),o=pe(),a=ht(),u=go(),c=ho(),s=bo(),f=TypeError,l=function(t,r){this.stopped=t,this.result=r},d=l.prototype;return Hi=function(p,v,y){var m,h,g,b,w,S,T,A=y&&y.that,O=!(!y||!y.AS_ENTRIES),E=!(!y||!y.IS_RECORD),k=!(!y||!y.IS_ITERATOR),x=!(!y||!y.INTERRUPTED),R=t(v,A),I=function(t){return m&&s(m,"normal"),new l(!0,t)},P=function(t){return O?(e(t),x?R(t[0],t[1],I):R(t[0],t[1])):x?R(t,I):R(t)};if(E)m=p.iterator;else if(k)m=p;else{if(!(h=c(p)))throw new f(n(p)+" is not iterable");if(i(h)){for(g=0,b=o(p);b>g;g++)if((w=P(p[g]))&&a(d,w))return w;return new l(!1)}m=u(p,h)}for(S=E?p.next:m.next;!(T=r(S,m)).done;){try{w=P(T.value)}catch(t){s(m,"throw",t)}if("object"==typeof w&&w&&a(d,w))return w}return new l(!1)}}function So(){if(Gi)return Vi;Gi=1;var t=ht(),r=TypeError;return Vi=function(e,n){if(t(n,e))return e;throw new r("Incorrect invocation")}}function To(){if(Yi)return $i;Yi=1;var t=or()("iterator"),r=!1;try{var e=0,n={next:function(){return{done:!!e++}},return:function(){r=!0}};n[t]=function(){return this},Array.from(n,function(){throw 2})}catch(t){}return $i=function(e,n){try{if(!n&&!r)return!1}catch(t){return!1}var i=!1;try{var o={};o[t]=function(){return{next:function(){return{done:i=!0}}}},e(o)}catch(t){}return i}}function Ao(){if(Ji)return Qi;Ji=1;var t=vt(),r=yt(),e=Mn();return Qi=function(n,i,o){var a,u;return e&&t(a=i.constructor)&&a!==o&&r(u=a.prototype)&&u!==o.prototype&&e(n,u),n}}function Oo(){if(Xi)return Ki;Xi=1;var t=De(),r=i(),e=ct(),n=Ne(),o=Vr(),a=vo(),u=wo(),c=So(),s=vt(),f=lt(),l=yt(),d=v(),p=To(),y=In(),m=Ao();return Ki=function(i,v,h){var g=-1!==i.indexOf("Map"),b=-1!==i.indexOf("Weak"),w=g?"set":"add",S=r[i],T=S&&S.prototype,A=S,O={},E=function(t){var r=e(T[t]);o(T,t,"add"===t?function(t){return r(this,0===t?0:t),this}:"delete"===t?function(t){return!(b&&!l(t))&&r(this,0===t?0:t)}:"get"===t?function(t){return b&&!l(t)?void 0:r(this,0===t?0:t)}:"has"===t?function(t){return!(b&&!l(t))&&r(this,0===t?0:t)}:function(t,e){return r(this,0===t?0:t,e),this})};if(n(i,!s(S)||!(b||T.forEach&&!d(function(){(new S).entries().next()}))))A=h.getConstructor(v,i,g,w),a.enable();else if(n(i,!0)){var k=new A,x=k[w](b?{}:-0,1)!==k,R=d(function(){k.has(1)}),I=p(function(t){new S(t)}),P=!b&&d(function(){for(var t=new S,r=5;r--;)t[w](r,r);return!t.has(-0)});I||((A=v(function(t,r){c(t,T);var e=m(new S,t,A);return f(r)||u(r,e[w],{that:e,AS_ENTRIES:g}),e})).prototype=T,T.constructor=A),(R||P)&&(E("delete"),E("has"),g&&E("get")),(P||x)&&E(w),b&&T.clear&&delete T.clear}return O[i]=A,t({global:!0,constructor:!0,forced:A!==S},O),y(A,i),b||h.setStrong(A,i,g),A}}function Eo(){if(to)return Zi;to=1;var t=Wr(),r=Sr();return Zi=function(e,n,i){return i.get&&t(i.get,n,{getter:!0}),i.set&&t(i.set,n,{setter:!0}),r.f(e,n,i)}}function ko(){if(eo)return ro;eo=1;var t=Vr();return ro=function(r,e,n){for(var i in e)t(r,i,e[i],n);return r}}function xo(){if(io)return no;io=1;var t=mt(),r=Eo(),e=or(),n=y(),i=e("species");return no=function(e){var o=t(e);n&&o&&!o[i]&&r(o,i,{configurable:!0,get:function(){return this}})}}function Ro(){if(ao)return oo;ao=1;var t=On(),r=Eo(),e=ko(),n=yo(),i=So(),o=lt(),a=wo(),u=jn(),c=_n(),s=xo(),f=y(),l=vo().fastKey,d=Hr(),p=d.set,v=d.getterFor;return oo={getConstructor:function(u,c,s,d){var y=u(function(r,e){i(r,m),p(r,{type:c,index:t(null),first:null,last:null,size:0}),f||(r.size=0),o(e)||a(e,r[d],{that:r,AS_ENTRIES:s})}),m=y.prototype,h=v(c),g=function(t,r,e){var n,i,o=h(t),a=b(t,r);return a?a.value=e:(o.last=a={index:i=l(r,!0),key:r,value:e,previous:n=o.last,next:null,removed:!1},o.first||(o.first=a),n&&(n.next=a),f?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},b=function(t,r){var e,n=h(t),i=l(r);if("F"!==i)return n.index[i];for(e=n.first;e;e=e.next)if(e.key===r)return e};return e(m,{clear:function(){for(var r=h(this),e=r.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=null),e=e.next;r.first=r.last=null,r.index=t(null),f?r.size=0:this.size=0},delete:function(t){var r=this,e=h(r),n=b(r,t);if(n){var i=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),e.first===n&&(e.first=i),e.last===n&&(e.last=o),f?e.size--:r.size--}return!!n},forEach:function(t){for(var r,e=h(this),i=n(t,arguments.length>1?arguments[1]:void 0);r=r?r.next:e.first;)for(i(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function(t){return!!b(this,t)}}),e(m,s?{get:function(t){var r=b(this,t);return r&&r.value},set:function(t,r){return g(this,0===t?0:t,r)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),f&&r(m,"size",{configurable:!0,get:function(){return h(this).size}}),y},setStrong:function(t,r,e){var n=r+" Iterator",i=v(r),o=v(n);u(t,r,function(t,r){p(this,{type:n,target:t,state:i(t),kind:r,last:null})},function(){for(var t=o(this),r=t.kind,e=t.last;e&&e.removed;)e=e.previous;return t.target&&(t.last=e=e?e.next:t.state.first)?c("keys"===r?e.key:"values"===r?e.value:[e.key,e.value],!1):(t.target=null,c(void 0,!0))},e?"entries":"values",!e,!0),s(r)}},oo}co||(co=1,uo||(uo=1,Oo()("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ro())));var Io,Po,Co,Mo,jo,_o={};function No(){if(Po)return Io;Po=1;var t=ti(),r=String;return Io=function(e){if("Symbol"===t(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}}function Do(){if(Mo)return Co;Mo=1;var t=ct(),r=fe(),e=No(),n=dt(),i=t("".charAt),o=t("".charCodeAt),a=t("".slice),u=function(t){return function(u,c){var s,f,l=e(n(u)),d=r(c),p=l.length;return d<0||d>=p?t?"":void 0:(s=o(l,d))<55296||s>56319||d+1===p||(f=o(l,d+1))<56320||f>57343?t?i(l,d):s:t?a(l,d,d+2):f-56320+(s-55296<<10)+65536}};return Co={codeAt:u(!1),charAt:u(!0)}}!function(){if(jo)return _o;jo=1;var t=Do().charAt,r=No(),e=Hr(),n=jn(),i=_n(),o="String Iterator",a=e.set,u=e.getterFor(o);n(String,"String",function(t){a(this,{type:o,string:r(t),index:0})},function(){var r,e=u(this),n=e.string,o=e.index;return o>=n.length?i(void 0,!0):(r=t(n,o),e.index+=r.length,i(r,!1))})}();var Lo,Bo,Uo={};Bo||(Bo=1,function(){if(Lo)return Uo;Lo=1;var t=De(),r=i();t({global:!0,forced:r.globalThis!==r},{globalThis:r})}());var Fo,qo,zo,Ho,Wo,Vo,Go,$o,Yo,Qo={};function Jo(){return qo?Fo:(qo=1,Fo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})}function Ko(){if(Ho)return zo;Ho=1;var t=cr()("span").classList,r=t&&t.constructor&&t.constructor.prototype;return zo=r===Object.prototype?void 0:r}function Xo(){if(Vo)return Wo;Vo=1;var t=yo(),r=ct(),e=ft(),n=er(),i=pe(),o=bi(),a=r([].push),u=function(r){var u=1===r,c=2===r,s=3===r,f=4===r,l=6===r,d=7===r,p=5===r||l;return function(v,y,m,h){for(var g,b,w=n(v),S=e(w),T=i(S),A=t(y,m),O=0,E=h||o,k=u?E(v,T):c||d?E(v,0):void 0;T>O;O++)if((p||O in S)&&(b=A(g=S[O],O,w),r))if(u)k[O]=b;else if(b)switch(r){case 3:return!0;case 5:return g;case 6:return O;case 2:a(k,g)}else switch(r){case 4:return!1;case 7:a(k,g)}return l?-1:s||f?f:k}};return Wo={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}}!function(){if(Yo)return Qo;Yo=1;var t=i(),r=Jo(),e=Ko(),n=function(){if($o)return Go;$o=1;var t=Xo().forEach,r=Be()("forEach");return Go=r?[].forEach:function(r){return t(this,r,arguments.length>1?arguments[1]:void 0)},Go}(),o=Tr(),a=function(t){if(t&&t.forEach!==n)try{o(t,"forEach",n)}catch(r){t.forEach=n}};for(var u in r)r[u]&&a(t[u]&&t[u].prototype);a(e)}();var Zo,ta={};!function(){if(Zo)return ta;Zo=1;var t=i(),r=Jo(),e=Ko(),n=Nn(),o=Tr(),a=In(),u=or()("iterator"),c=n.values,s=function(t,e){if(t){if(t[u]!==c)try{o(t,u,c)}catch(r){t[u]=c}if(a(t,e,!0),r[e])for(var i in n)if(t[i]!==n[i])try{o(t,i,n[i])}catch(r){t[i]=n[i]}}};for(var f in r)s(t[f]&&t[f].prototype,f);s(e,"DOMTokenList")}(),function(t){var r=!(!t.starmusConfig||!t.starmusConfig.debug);function e(){if(r)try{(console.log||function(){}).apply(console,arguments)}catch(t){}}var n="function"==typeof Set,i={},o={};void 0===t.StarmusHooks&&(t.StarmusHooks={}),t.StarmusHooks.subscribe=function(t,r){var e,o;return i[t]||(i[t]=n?new Set:[]),e=i[t],o=r,n?e.add(o):-1===e.indexOf(o)&&e.push(o),function(){i[t]&&function(t,r){if(n)t.delete(r);else{var e=t.indexOf(r);-1!==e&&t.splice(e,1)}}(i[t],r)}},t.StarmusHooks.dispatch=function(t,r,a){r=r||{};var u=t+"::"+((a=a||{}).instanceId||"");if(o[u])e("Prevented recursive dispatch:",t);else{o[u]=!0;try{var c=i[t];if(!c)return;!function(t,r){if(n)t.forEach(r);else for(var e=t.slice(),i=0;i<e.length;i++)r(e[i])}(c,function(e){try{e(r,a)}catch(r){console.error("Error executing handler for command "+t+":",r)}})}finally{delete o[u]}}},t.StarmusHooks.debugLog=e}("undefined"!=typeof window?window:globalThis);var ra="undefined"!=typeof window?window:globalThis,ea=ra.StarmusHooks&&ra.StarmusHooks.debugLog||function(){};ra.StarmusHooks&&ra.StarmusHooks.dispatch,ra.StarmusHooks&&ra.StarmusHooks.subscribe,"undefined"!=typeof module&&module.exports&&(module.exports={debugLog:ea,subscribe:ra.StarmusHooks.subscribe,dispatch:ra.StarmusHooks.dispatch});var na,ia={};function oa(t){var r={instanceId:null,env:{},tier:null,status:"uninitialized",error:null,source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""},calibration:{phase:null,message:"",volumePercent:0,complete:!1,gain:1},recorder:{duration:0,amplitude:0,isPlaying:!1,isPaused:!1},submission:{progress:0,isQueued:!1}};function e(t){var r={};for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function n(t,r){var n=e(t);for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n}var i=n(r,t||{}),o=[];return{getState:function(){return i},dispatch:function(t){i=function(t,i){if(!i||!i.type)return t;switch(!t.instanceId&&i.payload&&i.payload.instanceId&&(t=n(t,{instanceId:i.payload.instanceId})),i.type){case"starmus/tier-ready":return t.tier?t:n(t,{tier:i.payload&&i.payload.tier?i.payload.tier:t.tier});case"starmus/init":return n(t,n(i.payload||{},{status:"idle",error:null}));case"starmus/ui/step-continue":return n(t,{status:"ready_to_record",error:null});case"starmus/calibration-start":return n(t,{status:"calibrating"});case"starmus/calibration-update":return n(t,{calibration:n(t.calibration,{message:i.message,volumePercent:i.volumePercent})});case"starmus/calibration-complete":return n(t,{status:"ready",calibration:n(t.calibration,n(i.calibration||{},{complete:!0}))});case"starmus/mic-start":return n(t,{status:"recording",error:null,recorder:n(t.recorder,{duration:0,amplitude:0,isPaused:!1})});case"starmus/mic-pause":return n(t,{status:"paused",recorder:n(t.recorder,{isPaused:!0})});case"starmus/mic-resume":return n(t,{status:"recording",recorder:n(t.recorder,{isPaused:!1})});case"starmus/mic-stop":return n(t,{status:"processing"});case"starmus/recorder-tick":return n(t,{recorder:n(t.recorder,{duration:i.duration,amplitude:i.amplitude})});case"starmus/recording-available":return n(t,{status:"ready_to_submit",source:n(t.source,{kind:"blob",blob:i.payload.blob,fileName:i.payload.fileName})});case"starmus/recorder-playback-state":return n(t,{recorder:n(t.recorder,{isPlaying:i.isPlaying})});case"starmus/transcript-update":return n(t,{source:n(t.source,{transcript:i.transcript})});case"starmus/transcript-interim":return n(t,{source:n(t.source,{interimTranscript:i.interim})});case"starmus/env-update":return n(t,{env:n(t.env,i.payload||{}),tier:i.tier||t.tier});case"starmus/file-attached":return n(t,{status:"ready_to_submit",source:{kind:"file",file:i.file,fileName:i.file.name}});case"starmus/submit-start":return n(t,{status:"submitting",error:null});case"starmus/submit-progress":return n(t,{submission:n(t.submission,{progress:i.progress})});case"starmus/submit-complete":return n(t,{status:"complete",submission:{progress:1,isQueued:!1}});case"starmus/submit-queued":return n(t,{status:"complete",submission:{progress:0,isQueued:!0}});case"starmus/error":return n(t,{error:i.error||i.payload});case"starmus/reset":return n(e(r),{instanceId:t.instanceId,env:t.env,tier:t.tier,status:"idle",source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""}});default:return t}}(i,t);for(var a=0;a<o.length;a++)try{o[a](i)}catch(t){console.error(t)}},subscribe:function(t){return-1===o.indexOf(t)&&o.push(t),function(){var r=o.indexOf(t);-1!==r&&o.splice(r,1)}}}}function aa(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function ua(t,r,e,n,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,i)}function ca(t){return function(){var r=this,e=arguments;return new Promise(function(n,i){var o=t.apply(r,e);function a(t){ua(o,n,i,a,u,"next",t)}function u(t){ua(o,n,i,a,u,"throw",t)}a(void 0)})}}function sa(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fa(t,r,e){return r&&function(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ga(n.key),n)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function la(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=wa(t))||r){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw o}}}}function da(t,r,e){return(r=ga(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function pa(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,n)}return e}function va(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",i=e.toStringTag||"@@toStringTag";function o(e,n,i,o){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return ya(s,"_invoke",function(e,n,i){var o,u,c,s=0,f=i||[],l=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(r,e){return o=r,u=0,c=t,d.n=e,a}};function p(e,n){for(u=e,c=n,r=0;!l&&s&&!i&&r<f.length;r++){var i,o=f[r],p=d.p,v=o[2];e>3?(i=v===n)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=e<2&&p<o[1])?(u=0,d.v=n,d.n=o[1]):p<v&&(i=e<3||o[0]>n||n>v)&&(o[4]=e,o[5]=n,d.n=v,u=0))}if(i||e>1)return a;throw l=!0,n}return function(i,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,v),u=f,c=v;(r=u<2?t:c)||!l;){o||(u?u<3?(u>1&&(d.n=-1),p(u,c)):d.n=c:d.v=c);try{if(s=2,o){if(u||(i="next"),r=o[i]){if(!(r=r.call(o,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,u<2&&(u=0)}else 1===u&&(r=o.return)&&r.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=t}else if((r=(l=d.n<0)?c:e.call(n,d))!==a)break}catch(r){o=t,u=1,c=r}finally{s=1}}return{value:r,done:l}}}(e,i,o),!0),s}var a={};function u(){}function c(){}function s(){}r=Object.getPrototypeOf;var f=[][n]?r(r([][n]())):(ya(r={},n,function(){return this}),r),l=s.prototype=u.prototype=Object.create(f);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ya(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,ya(l,"constructor",s),ya(s,"constructor",c),c.displayName="GeneratorFunction",ya(s,i,"GeneratorFunction"),ya(l),ya(l,i,"Generator"),ya(l,n,function(){return this}),ya(l,"toString",function(){return"[object Generator]"}),(va=function(){return{w:o,m:d}})()}function ya(t,r,e,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}ya=function(t,r,e,n){function o(r,e){ya(t,r,function(t){return this._invoke(r,e,t)})}r?i?i(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:(o("next",0),o("throw",1),o("return",2))},ya(t,r,e,n)}function ma(t){if(null!=t){var r=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(typeof t+" is not iterable")}function ha(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o,a,u=[],c=!0,s=!1;try{if(o=(e=e.call(t)).next,0===r);else for(;!(c=(n=o.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){s=!0,i=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw i}}return u}}(t,r)||wa(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ga(t){var r=function(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof r?r:r+""}function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function wa(t,r){if(t){if("string"==typeof t)return aa(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?aa(t,r):void 0}}!function(){if(na)return ia;na=1;var t=y(),r=Ur().EXISTS,e=ct(),n=Eo(),i=Function.prototype,o=e(i.toString),a=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=e(a.exec);t&&!r&&n(i,"name",{configurable:!0,get:function(){try{return u(a,o(this))[1]}catch(t){return""}}})}(),function(t){var r={instanceId:null,env:{},tier:null,status:"uninitialized",error:null,source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""},calibration:{phase:null,message:"",volumePercent:0,complete:!1,gain:1},recorder:{duration:0,amplitude:0,isPlaying:!1,isPaused:!1},submission:{progress:0,isQueued:!1}};function e(t){var r={};for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function n(t,r){var n=e(t);for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n}function i(t){var i=n(r,t||{}),o=[];return{getState:function(){return i},dispatch:function(t){i=function(t,i){if(!i||!i.type)return t;switch(!t.instanceId&&i.payload&&i.payload.instanceId&&(t=n(t,{instanceId:i.payload.instanceId})),i.type){case"starmus/tier-ready":return t.tier?t:n(t,{tier:i.payload&&i.payload.tier?i.payload.tier:t.tier});case"starmus/init":return n(t,n(i.payload||{},{status:"idle",error:null}));case"starmus/ui/step-continue":return n(t,{status:"ready_to_record",error:null});case"starmus/calibration-start":return n(t,{status:"calibrating"});case"starmus/calibration-update":return n(t,{calibration:n(t.calibration,{message:i.message,volumePercent:i.volumePercent})});case"starmus/calibration-complete":return n(t,{status:"ready",calibration:n(t.calibration,n(i.calibration||{},{complete:!0}))});case"starmus/mic-start":return n(t,{status:"recording",error:null,recorder:n(t.recorder,{duration:0,amplitude:0,isPaused:!1})});case"starmus/mic-pause":return n(t,{status:"paused",recorder:n(t.recorder,{isPaused:!0})});case"starmus/mic-resume":return n(t,{status:"recording",recorder:n(t.recorder,{isPaused:!1})});case"starmus/mic-stop":return n(t,{status:"processing"});case"starmus/recorder-tick":return n(t,{recorder:n(t.recorder,{duration:i.duration,amplitude:i.amplitude})});case"starmus/recording-available":return n(t,{status:"ready_to_submit",source:n(t.source,{kind:"blob",blob:i.payload.blob,fileName:i.payload.fileName})});case"starmus/recorder-playback-state":return n(t,{recorder:n(t.recorder,{isPlaying:i.isPlaying})});case"starmus/transcript-update":return n(t,{source:n(t.source,{transcript:i.transcript})});case"starmus/transcript-interim":return n(t,{source:n(t.source,{interimTranscript:i.interim})});case"starmus/env-update":return n(t,{env:n(t.env,i.payload||{}),tier:i.tier||t.tier});case"starmus/file-attached":return n(t,{status:"ready_to_submit",source:{kind:"file",file:i.file,fileName:i.file.name}});case"starmus/submit-start":return n(t,{status:"submitting",error:null});case"starmus/submit-progress":return n(t,{submission:n(t.submission,{progress:i.progress})});case"starmus/submit-complete":return n(t,{status:"complete",submission:{progress:1,isQueued:!1}});case"starmus/submit-queued":return n(t,{status:"complete",submission:{progress:0,isQueued:!0}});case"starmus/error":return n(t,{error:i.error||i.payload});case"starmus/reset":return n(e(r),{instanceId:t.instanceId,env:t.env,tier:t.tier,status:"idle",source:{kind:null,blob:null,file:null,fileName:"",transcript:"",interimTranscript:""}});default:return t}}(i,t);for(var a=0;a<o.length;a++)try{o[a](i)}catch(t){console.error(t)}},subscribe:function(t){return-1===o.indexOf(t)&&o.push(t),function(){var r=o.indexOf(t);-1!==r&&o.splice(r,1)}}}}"undefined"!=typeof module&&module.exports?module.exports={createStore:i}:"undefined"!=typeof exports?exports.createStore=i:(t.StarmusStore=t.StarmusStore||{},t.StarmusStore.createStore=i)}("undefined"!=typeof window?window:globalThis),"undefined"!=typeof window&&(window.StarmusStore=window.StarmusStore||{},window.StarmusStore.createStore=oa),"undefined"!=typeof module&&module.exports&&(module.exports={createStore:oa}),"undefined"!=typeof exports&&(exports.createStore=oa);var Sa,Ta={};!function(){if(Sa)return Ta;Sa=1;var t=De(),r=v(),e=Xn(),n=yt(),i=er(),o=pe(),a=hi(),u=ei(),c=bi(),s=ni(),f=or(),l=bt(),d=f("isConcatSpreadable"),p=l>=51||!r(function(){var t=[];return t[d]=!1,t.concat()[0]!==t}),y=function(t){if(!n(t))return!1;var r=t[d];return void 0!==r?!!r:e(t)};t({target:"Array",proto:!0,arity:1,forced:!p||!s("concat")},{concat:function(t){var r,e,n,s,f,l=i(this),d=c(l,0),p=0;for(r=-1,n=arguments.length;r<n;r++)if(y(f=-1===r?l:arguments[r]))for(s=o(f),a(p+s),e=0;e<s;e++,p++)e in f&&u(d,p,f[e]);else a(p+1),u(d,p++,f);return d.length=p,d}})}();var Aa,Oa={};!function(){if(Aa)return Oa;Aa=1;var t=De(),r=ct(),e=ft(),n=pt(),i=Be(),o=r([].join);t({target:"Array",proto:!0,forced:e!==Object||!i("join",",")},{join:function(t){return o(n(this),void 0===t?",":t)}})}();var Ea,ka,xa,Ra,Ia,Pa,Ca,Ma={};function ja(){if(ka)return Ea;ka=1;var t=Ot(),r=er(),e=ft(),n=pe(),i=TypeError,o="Reduce of empty array with no initial value",a=function(a){return function(u,c,s,f){var l=r(u),d=e(l),p=n(l);if(t(c),0===p&&s<2)throw new i(o);var v=a?p-1:0,y=a?-1:1;if(s<2)for(;;){if(v in d){f=d[v],v+=y;break}if(v+=y,a?v<0:p<=v)throw new i(o)}for(;a?v>=0:p>v;v+=y)v in d&&(f=c(f,d[v],v,l));return f}};return Ea={left:a(!1),right:a(!0)}}function _a(){if(Ra)return xa;Ra=1;var t=i(),r=gt(),e=st(),n=function(t){return r.slice(0,t.length)===t};return xa=n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":t.Bun&&"string"==typeof Bun.version?"BUN":t.Deno&&"object"==typeof Deno.version?"DENO":"process"===e(t.process)?"NODE":t.window&&t.document?"BROWSER":"REST"}function Na(){if(Pa)return Ia;Pa=1;var t=_a();return Ia="NODE"===t}!function(){if(Ca)return Ma;Ca=1;var t=De(),r=ja().left,e=Be(),n=bt();t({target:"Array",proto:!0,forced:!Na()&&n>79&&n<83||!e("reduce")},{reduce:function(t){var e=arguments.length;return r(this,t,e,e>1?arguments[1]:void 0)}})}();var Da,La,Ba,Ua={};!function(){if(Ba)return Ua;Ba=1;var t=De(),r=function(){if(La)return Da;La=1;var t=y(),r=v(),e=ct(),n=xn(),i=Tn(),o=pt(),a=e(at().f),u=e([].push),c=t&&r(function(){var t=Object.create(null);return t[2]=2,!a(t,2)}),s=function(r){return function(e){for(var s,f=o(e),l=i(f),d=c&&null===n(f),p=l.length,v=0,y=[];p>v;)s=l[v++],t&&!(d?s in f:a(f,s))||u(y,r?[s,f[s]]:f[s]);return y}};return Da={entries:s(!0),values:s(!1)}}().entries;t({target:"Object",stat:!0},{entries:function(t){return r(t)}})}();var Fa,qa={};!function(){if(Fa)return qa;Fa=1;var t=De(),r=er(),e=Tn();t({target:"Object",stat:!0,forced:v()(function(){e(1)})},{keys:function(t){return e(r(t))}})}();var za,Ha,Wa,Va,Ga,$a,Ya,Qa,Ja,Ka,Xa,Za,tu,ru,eu,nu,iu,ou,au,uu,cu,su,fu,lu,du,pu,vu,yu,mu,hu,gu,bu,wu={};function Su(){if(Ha)return za;Ha=1;var t=i();return za=t}function Tu(){if(Va)return Wa;Va=1;var t=ri(),r=At(),e=TypeError;return Wa=function(n){if(t(n))return n;throw new e(r(n)+" is not a constructor")}}function Au(){if($a)return Ga;$a=1;var t=wr(),r=Tu(),e=lt(),n=or()("species");return Ga=function(i,o){var a,u=t(i).constructor;return void 0===u||e(a=t(u)[n])?o:r(a)}}function Ou(){if(Qa)return Ya;Qa=1;var t=m(),r=Function.prototype,e=r.apply,n=r.call;return Ya="object"==typeof Reflect&&Reflect.apply||(t?n.bind(e):function(){return n.apply(e,arguments)}),Ya}function Eu(){if(Ka)return Ja;Ka=1;var t=TypeError;return Ja=function(r,e){if(r<e)throw new t("Not enough arguments");return r}}function ku(){if(Za)return Xa;Za=1;var t=gt();return Xa=/(?:ipad|iphone|ipod).*applewebkit/i.test(t)}function xu(){if(ru)return tu;ru=1;var t,r,e,n,o=i(),a=Ou(),u=yo(),c=vt(),s=nr(),f=v(),l=An(),d=ii(),p=cr(),y=Eu(),m=ku(),h=Na(),g=o.setImmediate,b=o.clearImmediate,w=o.process,S=o.Dispatch,T=o.Function,A=o.MessageChannel,O=o.String,E=0,k={},x="onreadystatechange";f(function(){t=o.location});var R=function(t){if(s(k,t)){var r=k[t];delete k[t],r()}},I=function(t){return function(){R(t)}},P=function(t){R(t.data)},C=function(r){o.postMessage(O(r),t.protocol+"//"+t.host)};return g&&b||(g=function(t){y(arguments.length,1);var e=c(t)?t:T(t),n=d(arguments,1);return k[++E]=function(){a(e,void 0,n)},r(E),E},b=function(t){delete k[t]},h?r=function(t){w.nextTick(I(t))}:S&&S.now?r=function(t){S.now(I(t))}:A&&!m?(n=(e=new A).port2,e.port1.onmessage=P,r=u(n.postMessage,n)):o.addEventListener&&c(o.postMessage)&&!o.importScripts&&t&&"file:"!==t.protocol&&!f(C)?(r=C,o.addEventListener("message",P,!1)):r=x in p("script")?function(t){l.appendChild(p("script"))[x]=function(){l.removeChild(this),R(t)}}:function(t){setTimeout(I(t),0)}),tu={set:g,clear:b}}function Ru(){if(nu)return eu;nu=1;var t=i(),r=y(),e=Object.getOwnPropertyDescriptor;return eu=function(n){if(!r)return t[n];var i=e(t,n);return i&&i.value}}function Iu(){if(ou)return iu;ou=1;var t=function(){this.head=null,this.tail=null};return t.prototype={add:function(t){var r={item:t,next:null},e=this.tail;e?e.next=r:this.head=r,this.tail=r},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},iu=t}function Pu(){if(lu)return fu;lu=1;var t,r,e,n,o,a=i(),u=Ru(),c=yo(),s=xu().set,f=Iu(),l=ku(),d=function(){if(uu)return au;uu=1;var t=gt();return au=/ipad|iphone|ipod/i.test(t)&&"undefined"!=typeof Pebble}(),p=function(){if(su)return cu;su=1;var t=gt();return cu=/web0s(?!.*chrome)/i.test(t)}(),v=Na(),y=a.MutationObserver||a.WebKitMutationObserver,m=a.document,h=a.process,g=a.Promise,b=u("queueMicrotask");if(!b){var w=new f,S=function(){var r,e;for(v&&(r=h.domain)&&r.exit();e=w.get();)try{e()}catch(r){throw w.head&&t(),r}r&&r.enter()};l||v||p||!y||!m?!d&&g&&g.resolve?((n=g.resolve(void 0)).constructor=g,o=c(n.then,n),t=function(){o(S)}):v?t=function(){h.nextTick(S)}:(s=c(s,a),t=function(){s(S)}):(r=!0,e=m.createTextNode(""),new y(S).observe(e,{characterData:!0}),t=function(){e.data=r=!r}),b=function(r){w.head||t(),w.add(r)}}return fu=b}function Cu(){return pu||(pu=1,du=function(t,r){try{1===arguments.length?console.error(t):console.error(t,r)}catch(t){}}),du}function Mu(){return yu?vu:(yu=1,vu=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}})}function ju(){if(hu)return mu;hu=1;var t=i();return mu=t.Promise}function _u(){if(bu)return gu;bu=1;var t=i(),r=ju(),e=vt(),n=Ne(),o=Fr(),a=or(),u=_a(),c=Xt(),s=bt(),f=r&&r.prototype,l=a("species"),d=!1,p=e(t.PromiseRejectionEvent),v=n("Promise",function(){var t=o(r),e=t!==String(r);if(!e&&66===s)return!0;if(c&&(!f.catch||!f.finally))return!0;if(!s||s<51||!/native code/.test(t)){var n=new r(function(t){t(1)}),i=function(t){t(function(){},function(){})};if((n.constructor={})[l]=i,!(d=n.then(function(){})instanceof i))return!0}return!(e||"BROWSER"!==u&&"DENO"!==u||p)});return gu={CONSTRUCTOR:v,REJECTION_EVENT:p,SUBCLASSING:d}}var Nu,Du,Lu={};function Bu(){if(Nu)return Lu;Nu=1;var t=Ot(),r=TypeError,e=function(e){var n,i;this.promise=new e(function(t,e){if(void 0!==n||void 0!==i)throw new r("Bad Promise constructor");n=t,i=e}),this.resolve=t(n),this.reject=t(i)};return Lu.f=function(t){return new e(t)},Lu}var Uu,Fu,qu,zu={};function Hu(){if(Fu)return Uu;Fu=1;var t=ju(),r=To(),e=_u().CONSTRUCTOR;return Uu=e||!r(function(r){t.all(r).then(void 0,function(){})})}var Wu,Vu={};var Gu,$u={};var Yu,Qu={};var Ju,Ku,Xu,Zu,tc={};function rc(){if(Ku)return Ju;Ku=1;var t=wr(),r=yt(),e=Bu();return Ju=function(n,i){if(t(n),r(i)&&i.constructor===n)return i;var o=e.f(n);return(0,o.resolve)(i),o.promise}}Zu||(Zu=1,function(){if(Du)return wu;Du=1;var t,r,e,n,o=De(),a=Xt(),u=Na(),c=i(),s=Su(),f=h(),l=Vr(),d=Mn(),p=In(),v=xo(),y=Ot(),m=vt(),g=yt(),b=So(),w=Au(),S=xu().set,T=Pu(),A=Cu(),O=Mu(),E=Iu(),k=Hr(),x=ju(),R=_u(),I=Bu(),P="Promise",C=R.CONSTRUCTOR,M=R.REJECTION_EVENT,j=R.SUBCLASSING,_=k.getterFor(P),N=k.set,D=x&&x.prototype,L=x,B=D,U=c.TypeError,F=c.document,q=c.process,z=I.f,H=z,W=!!(F&&F.createEvent&&c.dispatchEvent),V="unhandledrejection",G=function(t){var r;return!(!g(t)||!m(r=t.then))&&r},$=function(t,r){var e,n,i,o=r.value,a=1===r.state,u=a?t.ok:t.fail,c=t.resolve,s=t.reject,l=t.domain;try{u?(a||(2===r.rejection&&X(r),r.rejection=1),!0===u?e=o:(l&&l.enter(),e=u(o),l&&(l.exit(),i=!0)),e===t.promise?s(new U("Promise-chain cycle")):(n=G(e))?f(n,e,c,s):c(e)):s(o)}catch(t){l&&!i&&l.exit(),s(t)}},Y=function(t,r){t.notified||(t.notified=!0,T(function(){for(var e,n=t.reactions;e=n.get();)$(e,t);t.notified=!1,r&&!t.rejection&&J(t)}))},Q=function(t,r,e){var n,i;W?((n=F.createEvent("Event")).promise=r,n.reason=e,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:r,reason:e},!M&&(i=c["on"+t])?i(n):t===V&&A("Unhandled promise rejection",e)},J=function(t){f(S,c,function(){var r,e=t.facade,n=t.value;if(K(t)&&(r=O(function(){u?q.emit("unhandledRejection",n,e):Q(V,e,n)}),t.rejection=u||K(t)?2:1,r.error))throw r.value})},K=function(t){return 1!==t.rejection&&!t.parent},X=function(t){f(S,c,function(){var r=t.facade;u?q.emit("rejectionHandled",r):Q("rejectionhandled",r,t.value)})},Z=function(t,r,e){return function(n){t(r,n,e)}},tt=function(t,r,e){t.done||(t.done=!0,e&&(t=e),t.value=r,t.state=2,Y(t,!0))},rt=function(t,r,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===r)throw new U("Promise can't be resolved itself");var n=G(r);n?T(function(){var e={done:!1};try{f(n,r,Z(rt,e,t),Z(tt,e,t))}catch(r){tt(e,r,t)}}):(t.value=r,t.state=1,Y(t,!1))}catch(r){tt({done:!1},r,t)}}};if(C&&(B=(L=function(r){b(this,B),y(r),f(t,this);var e=_(this);try{r(Z(rt,e),Z(tt,e))}catch(t){tt(e,t)}}).prototype,(t=function(t){N(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:null})}).prototype=l(B,"then",function(t,r){var e=_(this),n=z(w(this,L));return e.parent=!0,n.ok=!m(t)||t,n.fail=m(r)&&r,n.domain=u?q.domain:void 0,0===e.state?e.reactions.add(n):T(function(){$(n,e)}),n.promise}),r=function(){var r=new t,e=_(r);this.promise=r,this.resolve=Z(rt,e),this.reject=Z(tt,e)},I.f=z=function(t){return t===L||t===e?new r(t):H(t)},!a&&m(x)&&D!==Object.prototype)){n=D.then,j||l(D,"then",function(t,r){var e=this;return new L(function(t,r){f(n,e,t,r)}).then(t,r)},{unsafe:!0});try{delete D.constructor}catch(t){}d&&d(D,B)}o({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:L}),e=s.Promise,p(L,P,!1,!0),v(P)}(),function(){if(qu)return zu;qu=1;var t=De(),r=h(),e=Ot(),n=Bu(),i=Mu(),o=wo();t({target:"Promise",stat:!0,forced:Hu()},{all:function(t){var a=this,u=n.f(a),c=u.resolve,s=u.reject,f=i(function(){var n=e(a.resolve),i=[],u=0,f=1;o(t,function(t){var e=u++,o=!1;f++,r(n,a,t).then(function(t){o||(o=!0,i[e]=t,--f||c(i))},s)}),--f||c(i)});return f.error&&s(f.value),u.promise}})}(),function(){if(Wu)return Vu;Wu=1;var t=De(),r=Xt(),e=_u().CONSTRUCTOR,n=ju(),i=mt(),o=vt(),a=Vr(),u=n&&n.prototype;if(t({target:"Promise",proto:!0,forced:e,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&o(n)){var c=i("Promise").prototype.catch;u.catch!==c&&a(u,"catch",c,{unsafe:!0})}}(),function(){if(Gu)return $u;Gu=1;var t=De(),r=h(),e=Ot(),n=Bu(),i=Mu(),o=wo();t({target:"Promise",stat:!0,forced:Hu()},{race:function(t){var a=this,u=n.f(a),c=u.reject,s=i(function(){var n=e(a.resolve);o(t,function(t){r(n,a,t).then(u.resolve,c)})});return s.error&&c(s.value),u.promise}})}(),function(){if(Yu)return Qu;Yu=1;var t=De(),r=Bu();t({target:"Promise",stat:!0,forced:_u().CONSTRUCTOR},{reject:function(t){var e=r.f(this);return(0,e.reject)(t),e.promise}})}(),function(){if(Xu)return tc;Xu=1;var t=De(),r=mt(),e=Xt(),n=ju(),i=_u().CONSTRUCTOR,o=rc(),a=r("Promise"),u=e&&!i;t({target:"Promise",stat:!0,forced:e||i},{resolve:function(t){return o(u&&this===a?n:this,t)}})}());var ec,nc={};!function(){if(ec)return nc;ec=1;var t=De(),r=Xt(),e=ju(),n=v(),i=mt(),o=vt(),a=Au(),u=rc(),c=Vr(),s=e&&e.prototype;if(t({target:"Promise",proto:!0,real:!0,forced:!!e&&n(function(){s.finally.call({then:function(){}},function(){})})},{finally:function(t){var r=a(this,i("Promise")),e=o(t);return this.then(e?function(e){return u(r,t()).then(function(){return e})}:t,e?function(e){return u(r,t()).then(function(){throw e})}:t)}}),!r&&o(e)){var f=i("Promise").prototype.finally;s.finally!==f&&c(s,"finally",f,{unsafe:!0})}}();var ic,oc,ac,uc,cc,sc,fc,lc,dc,pc,vc,yc={};function mc(){if(oc)return ic;oc=1;var t=wr();return ic=function(){var r=t(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.unicodeSets&&(e+="v"),r.sticky&&(e+="y"),e}}function hc(){if(pc)return dc;pc=1;var t,r,e=h(),n=ct(),o=No(),a=mc(),u=function(){if(uc)return ac;uc=1;var t=v(),r=i().RegExp,e=t(function(){var t=r("a","y");return t.lastIndex=2,null!==t.exec("abcd")}),n=e||t(function(){return!r("a","y").sticky}),o=e||t(function(){var t=r("^r","gy");return t.lastIndex=2,null!==t.exec("str")});return ac={BROKEN_CARET:o,MISSED_STICKY:n,UNSUPPORTED_Y:e}}(),c=rr(),s=On(),f=Hr().get,l=function(){if(sc)return cc;sc=1;var t=v(),r=i().RegExp;return cc=t(function(){var t=r(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})}(),d=function(){if(lc)return fc;lc=1;var t=v(),r=i().RegExp;return fc=t(function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})}(),p=c("native-string-replace",String.prototype.replace),y=RegExp.prototype.exec,m=y,g=n("".charAt),b=n("".indexOf),w=n("".replace),S=n("".slice),T=(r=/b*/g,e(y,t=/a/,"a"),e(y,r,"a"),0!==t.lastIndex||0!==r.lastIndex),A=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];return(T||O||A||l||d)&&(m=function(t){var r,n,i,u,c,l,d,v=this,h=f(v),E=o(t),k=h.raw;if(k)return k.lastIndex=v.lastIndex,r=e(m,k,E),v.lastIndex=k.lastIndex,r;var x=h.groups,R=A&&v.sticky,I=e(a,v),P=v.source,C=0,M=E;if(R&&(I=w(I,"y",""),-1===b(I,"g")&&(I+="g"),M=S(E,v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==g(E,v.lastIndex-1))&&(P="(?: "+P+")",M=" "+M,C++),n=new RegExp("^(?:"+P+")",I)),O&&(n=new RegExp("^"+P+"$(?!\\s)",I)),T&&(i=v.lastIndex),u=e(y,R?n:v,M),R?u?(u.input=S(u.input,C),u[0]=S(u[0],C),u.index=v.lastIndex,v.lastIndex+=u[0].length):v.lastIndex=0:T&&u&&(v.lastIndex=v.global?u.index+u[0].length:i),O&&u&&u.length>1&&e(p,u[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(u[c]=void 0)}),u&&x)for(u.groups=l=s(null),c=0;c<x.length;c++)l[(d=x[c])[0]]=u[d[1]];return u}),dc=m}function gc(){if(vc)return yc;vc=1;var t=De(),r=hc();return t({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r}),yc}gc();var bc,wc,Sc,Tc,Ac,Oc,Ec,kc,xc,Rc,Ic,Pc,Cc,Mc={};function jc(){if(Tc)return Sc;Tc=1;var t=Do().charAt;return Sc=function(r,e,n){return e+(n?t(r,e).length:1)}}function _c(){if(Oc)return Ac;Oc=1;var t=ct(),r=er(),e=Math.floor,n=t("".charAt),i=t("".replace),o=t("".slice),a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;return Ac=function(t,c,s,f,l,d){var p=s+t.length,v=f.length,y=u;return void 0!==l&&(l=r(l),y=a),i(d,y,function(r,i){var a;switch(n(i,0)){case"$":return"$";case"&":return t;case"`":return o(c,0,s);case"'":return o(c,p);case"<":a=l[o(i,1,-1)];break;default:var u=+i;if(0===u)return r;if(u>v){var d=e(u/10);return 0===d?r:d<=v?void 0===f[d-1]?n(i,1):f[d-1]+n(i,1):r}a=f[u-1]}return void 0===a?"":a})}}function Nc(){if(Rc)return xc;Rc=1;var t=h(),r=nr(),e=ht(),n=function(){if(kc)return Ec;kc=1;var t=i(),r=v(),e=t.RegExp,n=!r(function(){var t=!0;try{e(".","d")}catch(r){t=!1}var r={},n="",i=t?"dgimsy":"gimsy",o=function(t,e){Object.defineProperty(r,t,{get:function(){return n+=e,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var u in t&&(a.hasIndices="d"),a)o(u,a[u]);return Object.getOwnPropertyDescriptor(e.prototype,"flags").get.call(r)!==i||n!==i});return Ec={correct:n}}(),o=mc(),a=RegExp.prototype;return xc=n.correct?function(t){return t.flags}:function(i){return n.correct||!e(a,i)||r(i,"flags")?i.flags:t(o,i)}}!function(){if(Cc)return Mc;Cc=1;var t=Ou(),r=h(),e=ct(),n=function(){if(wc)return bc;wc=1,gc();var t=h(),r=Vr(),e=hc(),n=v(),i=or(),o=Tr(),a=i("species"),u=RegExp.prototype;return bc=function(c,s,f,l){var d=i(c),p=!n(function(){var t={};return t[d]=function(){return 7},7!==""[c](t)}),v=p&&!n(function(){var t=!1,r=/a/;if("split"===c){var e={};e[a]=function(){return r},(r={constructor:e,flags:""})[d]=/./[d]}return r.exec=function(){return t=!0,null},r[d](""),!t});if(!p||!v||f){var y=/./[d],m=s(d,""[c],function(r,n,i,o,a){var c=n.exec;return c===e||c===u.exec?p&&!a?{done:!0,value:t(y,n,i,o)}:{done:!0,value:t(r,i,n,o)}:{done:!1}});r(String.prototype,c,m[0]),r(u,d,m[1])}l&&o(u[d],"sham",!0)}}(),i=v(),o=wr(),a=vt(),u=yt(),c=fe(),s=de(),f=No(),l=dt(),d=jc(),p=Et(),y=_c(),m=Nc(),g=function(){if(Pc)return Ic;Pc=1;var t=h(),r=wr(),e=vt(),n=st(),i=hc(),o=TypeError;return Ic=function(a,u){var c=a.exec;if(e(c)){var s=t(c,a,u);return null!==s&&r(s),s}if("RegExp"===n(a))return t(i,a,u);throw new o("RegExp#exec called on incompatible receiver")}}(),b=or()("replace"),w=Math.max,S=Math.min,T=e([].concat),A=e([].push),O=e("".indexOf),E=e("".slice),k=function(t){return void 0===t?t:String(t)},x="$0"==="a".replace(/./,"$0"),R=!!/./[b]&&""===/./[b]("a","$0");n("replace",function(e,n,i){var v=R?"$":"$0";return[function(t,e){var i=l(this),o=u(t)?p(t,b):void 0;return o?r(o,t,i,e):r(n,f(i),t,e)},function(r,e){var u=o(this),l=f(r);if("string"==typeof e&&-1===O(e,v)&&-1===O(e,"$<")){var p=i(n,u,l,e);if(p.done)return p.value}var h=a(e);h||(e=f(e));var b,x=f(m(u)),R=-1!==O(x,"g");R&&(b=-1!==O(x,"u"),u.lastIndex=0);for(var I,P=[];null!==(I=g(u,l))&&(A(P,I),R);){""===f(I[0])&&(u.lastIndex=d(l,s(u.lastIndex),b))}for(var C="",M=0,j=0;j<P.length;j++){for(var _,N=f((I=P[j])[0]),D=w(S(c(I.index),l.length),0),L=[],B=1;B<I.length;B++)A(L,k(I[B]));var U=I.groups;if(h){var F=T([N],L,D,l);void 0!==U&&A(F,U),_=f(t(e,void 0,F))}else _=y(N,l,D,L,U,e);D>=M&&(C+=E(l,M,D)+_,M=D+N.length)}return C+E(l,M)}]},!!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!x||R)}();var Dc=window.StarmusHooks.debugLog,Lc={chunkSize:1048576,retryDelays:[0,3e3,5e3,1e4,2e4,6e4],maxChunkRetries:3},Bc=function(){return window.starmusConfig||{}};function Uc(t){return(t=(t="string"==typeof t?t:String(t)).replace(/[\r\n\t]/g," ")).length>500?t.slice(0,497)+"...":t}function Fc(t){return t&&"object"===ba(t)?t:{}}function qc(t,r,e,n,i,o){return zc.apply(this,arguments)}function zc(){return(zc=ca(va().m(function t(r,e,n,i,o,a){var u,c,s,f,l,d,p,v,y,m,h,g,b;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if(l=Bc(),d=(null===(u=window.tus)||void 0===u?void 0:u.Upload)&&(null===(c=l.endpoints)||void 0===c?void 0:c.tusUpload),p=null===(s=l.endpoints)||void 0===s?void 0:s.chunkedUpload,v=null===(f=l.endpoints)||void 0===f?void 0:f.directUpload,!d){t.n=4;break}return t.p=1,t.n=2,Hc(r,e,n,i,o,a);case 2:return y=t.v,t.a(2,{method:"tus",url:y});case 3:t.p=3,g=t.v,Dc("[Priority] TUS failed:",g.message);case 4:if(!p){t.n=8;break}return t.p=5,t.n=6,Wc(r,e,n,i,o,a);case 6:return m=t.v,t.a(2,{method:"chunked_rest",result:m});case 7:t.p=7,b=t.v,Dc("[Priority] Chunked REST failed:",b.message);case 8:if(!v){t.n=10;break}return t.n=9,Vc(r,e,n,i,o,a);case 9:return h=t.v,t.a(2,{method:"fallback_post",result:h});case 10:throw new Error("All upload methods failed or missing endpoints");case 11:return t.a(2)}},t,null,[[5,7],[1,3]])}))).apply(this,arguments)}function Hc(t,r,e,n,i,o){var a,u;if(null===(a=window.tus)||void 0===a||!a.Upload)throw new Error("TUS library not present");var c=window.starmusTus||{},s=c.endpoint||(null===(u=Bc().endpoints)||void 0===u?void 0:u.tusUpload);if(!s)throw new Error("TUS endpoint missing");var f=function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?pa(Object(e),!0).forEach(function(r){da(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):pa(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}({filename:Uc(r),filetype:t.type||"audio/webm"},Object.entries(Fc(e)).reduce(function(t,r){var e=ha(r,2),n=e[0],i=e[1];return t[n]=Uc(i),t},{}));return n&&(f.starmus_meta=Uc(JSON.stringify(n))),new Promise(function(r,e){var n,a={endpoint:s,chunkSize:c.chunkSize||Lc.chunkSize,retryDelays:c.retryDelays||Lc.retryDelays,metadata:f,fingerprint:function(t){return["starmus",i,t.size,t.lastModified||""].join("-")},onProgress:function(t,r){"function"==typeof o&&o(t,r)},onError:e,onSuccess:function(){return ca(va().m(function e(){var i,o,u,s;return va().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Dc("[TUS] Success:",n.url),u=(null===(i=window.tus)||void 0===i||null===(i=i.defaultOptions)||void 0===i?void 0:i.removeFingerprint)||(null===(o=window.tus)||void 0===o||null===(o=o.Upload)||void 0===o||null===(o=o.prototype)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.removeFingerprint),!c.removeFingerprintOnSuccess||!u){e.n=5;break}return e.p=1,e.n=2,window.tus.defaultOptions.fingerprint(t,a);case 2:return s=e.v,e.n=3,u(s);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:r(n.url);case 6:return e.a(2)}},e,null,[[1,4]])}))()}};(n=new window.tus.Upload(t,a)).findPreviousUploads().then(function(t){return t.length&&n.resumeFromPreviousUpload(t[0])}).finally(function(){return n.start()})})}function Wc(t,r,e,n,i,o){var a,u,c=Bc(),s=null===(a=c.endpoints)||void 0===a?void 0:a.chunkedUpload,f=c.nonce||"";if(!s)throw new Error("Chunked REST endpoint missing");if(!f)throw new Error("Nonce missing");var l,d,p,v=Fc(e),y=c.chunkSize||Lc.chunkSize,m=Math.ceil(t.size/y),h=window.localStorage||window.sessionStorage,g=(l=i,d=r,p=t.size,"starmus_chunked_".concat(l,"_").concat(d,"_").concat(p)),b=h.getItem(g)||null,w=null!==(u=c.maxChunkRetries)&&void 0!==u?u:Lc.maxChunkRetries;return new Promise(function(){var e=ca(va().m(function e(i,a){var u,c,l,d,p,S,T;return va().w(function(e){for(;;)switch(e.p=e.n){case 0:S=function(e,i,a){return new Promise(function(u,c){var l=new FormData;l.append("audio_chunk",i,"".concat(r,".part").concat(e)),l.append("chunk_index",e),l.append("total_chunks",m),b?l.append("upload_id",b):l.append("create_upload_id","1"),Object.entries(v).forEach(function(t){var r=ha(t,2),e=r[0],n=r[1];return l.append(e,n)}),n&&l.append("_starmus_meta",JSON.stringify(n));var d=new XMLHttpRequest;d.open("POST",s,!0),d.setRequestHeader("X-WP-Nonce",f),d.upload.onprogress=function(r){return"function"==typeof o&&r.lengthComputable&&o(a+r.loaded,t.size)},d.onload=function(){if(d.status<200||d.status>=300)return c(new Error("Chunk ".concat(e," failed: ").concat(d.status)));try{var t=JSON.parse(d.responseText);!b&&t.upload_id&&(b=t.upload_id,h.setItem(g,b)),u(t)}catch(t){c(new Error("Invalid JSON response"))}},d.onerror=function(){return c(new Error("Network error"))},d.send(l)})},e.p=1,u=va().m(function r(){var e,n,i,o,a,u;return va().w(function(r){for(;;)switch(r.p=r.n){case 0:e=0,n=!1,i=c*y,o=Math.min(i+y,t.size),a=t.slice(i,o);case 1:if(n||!(e<w)){r.n=7;break}return e++,r.p=2,r.n=3,S(c,a,i);case 3:n=!0,r.n=6;break;case 4:if(r.p=4,u=r.v,e!==w){r.n=5;break}throw u;case 5:return r.n=6,new Promise(function(t){return setTimeout(t,300*e*e)});case 6:r.n=1;break;case 7:return r.a(2)}},r,null,[[2,4]])}),c=0;case 2:if(!(c<m)){e.n=4;break}return e.d(ma(u()),3);case 3:c++,e.n=2;break;case 4:return(l=new FormData).append("upload_id",b),l.append("finalize","1"),e.n=5,fetch(s,{method:"POST",headers:{"X-WP-Nonce":f},body:l});case 5:if((d=e.v).ok){e.n=6;break}throw new Error("Finalization failed: ".concat(d.status));case 6:return e.n=7,d.json();case 7:p=e.v,h.removeItem(g),i(p),e.n=9;break;case 8:e.p=8,T=e.v,a(T);case 9:return e.a(2)}},e,null,[[1,8]])}));return function(t,r){return e.apply(this,arguments)}}())}function Vc(t,r,e,n,i,o){var a,u=Bc(),c=null===(a=u.endpoints)||void 0===a?void 0:a.directUpload,s=u.nonce||"";if(!c)throw new Error("Direct upload endpoint missing");var f=Fc(e);return new Promise(function(e,i){var a=new FormData;Object.entries(f).forEach(function(t){var r=ha(t,2),e=r[0],n=r[1];return a.append(e,n)}),a.append("audio_file",t,r),null!=n&&n.transcript&&a.append("_starmus_transcript",n.transcript),null!=n&&n.calibration&&a.append("_starmus_calibration",JSON.stringify(n.calibration)),null!=n&&n.env&&a.append("_starmus_env",JSON.stringify(n.env));var u=new XMLHttpRequest;u.open("POST",c,!0),u.setRequestHeader("X-WP-Nonce",s),u.upload.onprogress=function(t){return"function"==typeof o&&t.lengthComputable&&o(t.loaded,t.total)},u.onload=function(){if(u.status<200||u.status>=300)return i(new Error("Upload failed: ".concat(u.status)));try{e(JSON.parse(u.responseText))}catch(t){i(new Error("Invalid JSON response"))}},u.onerror=function(){return i(new Error("Network error"))},u.send(a)})}var Gc={uploadWithTus:Hc,uploadWithChunkedRest:Wc,uploadDirect:Vc,uploadWithPriority:qc,estimateUploadTime:function(t,r){var e,n=(null==r?void 0:r.downlink)||(null!==(e={"slow-2g":.05,"2g":.15,"3g":.75,"4g":8}[null==r?void 0:r.effectiveType])&&void 0!==e?e:.5);return n=Math.min(n,10),Math.ceil(t/(1e6*n/8)*1.5)},formatUploadEstimate:function(t){return isFinite(t)?t<60?"~".concat(t,"s"):"~".concat(Math.ceil(t/60)," min"):"Calculating..."}};"undefined"!=typeof window&&(window.StarmusTus=Gc);var $c,Yc={};!function(){if($c)return Yc;$c=1;var t=De(),r=ve().includes,e=v(),n=En();t({target:"Array",proto:!0,forced:e(function(){return!Array(1).includes()})},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")}();var Qc,Jc;Jc||(Jc=1,Qc||(Qc=1,Oo()("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ro())));var Kc,Xc,Zc,ts,rs,es={};function ns(){if(Xc)return Kc;Xc=1;var t=ct();return Kc=t(1.1.valueOf)}function is(){if(ts)return Zc;ts=1;var t=fe(),r=No(),e=dt(),n=RangeError;return Zc=function(i){var o=r(e(this)),a="",u=t(i);if(u<0||u===1/0)throw new n("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(o+=o))1&u&&(a+=o);return a}}!function(){if(rs)return es;rs=1;var t=De(),r=ct(),e=fe(),n=ns(),i=is(),o=v(),a=RangeError,u=String,c=Math.floor,s=r(i),f=r("".slice),l=r(1.1.toFixed),d=function(t,r,e){return 0===r?e:r%2==1?d(t,r-1,e*t):d(t*t,r/2,e)},p=function(t,r,e){for(var n=-1,i=e;++n<6;)i+=r*t[n],t[n]=i%1e7,i=c(i/1e7)},y=function(t,r){for(var e=6,n=0;--e>=0;)n+=t[e],t[e]=c(n/r),n=n%r*1e7},m=function(t){for(var r=6,e="";--r>=0;)if(""!==e||0===r||0!==t[r]){var n=u(t[r]);e=""===e?n:e+s("0",7-n.length)+n}return e};t({target:"Number",proto:!0,forced:o(function(){return"0.000"!==l(8e-5,3)||"1"!==l(.9,0)||"1.25"!==l(1.255,2)||"1000000000000000128"!==l(0xde0b6b3a7640080,0)})||!o(function(){l({})})},{toFixed:function(t){var r,i,o,c,l=n(this),v=e(t),h=[0,0,0,0,0,0],g="",b="0";if(v<0||v>20)throw new a("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return u(l);if(l<0&&(g="-",l=-l),l>1e-21)if(i=(r=function(t){for(var r=0,e=t;e>=4096;)r+=12,e/=4096;for(;e>=2;)r+=1,e/=2;return r}(l*d(2,69,1))-69)<0?l*d(2,-r,1):l/d(2,r,1),i*=4503599627370496,(r=52-r)>0){for(p(h,0,i),o=v;o>=7;)p(h,1e7,0),o-=7;for(p(h,d(10,o,1),0),o=r-1;o>=23;)y(h,1<<23),o-=23;y(h,1<<o),p(h,1,1),y(h,2),b=m(h)}else p(h,0,i),p(h,1<<-r,0),b=m(h)+s("0",v);return b=v>0?g+((c=b.length)<=v?"0."+s("0",v-c)+b:f(b,0,c-v)+"."+f(b,c-v)):g+b}})}();var os,as={};!function(){if(os)return as;os=1;var t=Ur().PROPER,r=Vr(),e=wr(),n=No(),i=v(),o=Nc(),a="toString",u=RegExp.prototype,c=u[a],s=i(function(){return"/a/b"!==c.call({source:"a",flags:"b"})}),f=t&&c.name!==a;(s||f)&&r(u,a,function(){var t=e(this);return"/"+n(t.source)+"/"+n(o(t))},{unsafe:!0})}();var us,cs,ss,fs,ls,ds,ps,vs={};function ys(){if(fs)return ss;fs=1;var t=function(){if(cs)return us;cs=1;var t=yt(),r=st(),e=or()("match");return us=function(n){var i;return t(n)&&(void 0!==(i=n[e])?!!i:"RegExp"===r(n))}}(),r=TypeError;return ss=function(e){if(t(e))throw new r("The method doesn't accept regular expressions");return e}}!function(){if(ps)return vs;ps=1;var t=De(),r=ct(),e=ys(),n=dt(),i=No(),o=function(){if(ds)return ls;ds=1;var t=or()("match");return ls=function(r){var e=/./;try{"/./"[r](e)}catch(n){try{return e[t]=!1,"/./"[r](e)}catch(t){}}return!1}}(),a=r("".indexOf);t({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~a(i(n(this)),i(e(t)),arguments.length>1?arguments[1]:void 0)}})}();var ms={dbName:"StarmusSubmissions",storeName:"pendingSubmissions",dbVersion:1,maxRetries:10,retryDelays:[0,5e3,1e4,3e4,6e4,12e4,3e5,6e5,12e5,18e5],maxBlobSize:41943040},hs=new(function(){return fa(function t(){sa(this,t),this.db=null,this.isProcessing=!1},[{key:"init",value:(o=ca(va().m(function t(){var r=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(window.indexedDB){t.n=1;break}return console.error("[Offline] IndexedDB not supported â offline queue disabled."),t.a(2);case 1:return t.a(2,new Promise(function(t){var e=indexedDB.open(ms.dbName,ms.dbVersion);e.onerror=function(r){ea("[Offline] DB open failed",r),t()},e.onblocked=function(){ea("[Offline] DB open blocked â close other tabs")},e.onsuccess=function(e){r.db=e.target.result,r.db.onversionchange=function(){r.db.close(),ea("[Offline] DB version change â closed connection")},ea("[Offline] IndexedDB ready"),t()},e.onupgradeneeded=function(t){var r=t.target.result;if(!r.objectStoreNames.contains(ms.storeName)){var e=r.createObjectStore(ms.storeName,{keyPath:"id"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("retryCount","retryCount",{unique:!1}),ea("[Offline] Created object store",ms.storeName)}}}))}},t)})),function(){return o.apply(this,arguments)})},{key:"add",value:(i=ca(va().m(function t(r,e,n,i,o){var a,u,c,s=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}throw new Error("IndexedDB not initialized");case 1:if(a="starmus-offline-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,10)),u=e.size>ms.maxBlobSize?null:"function"==typeof structuredClone?structuredClone(e):new Blob([e],{type:e.type})){t.n=2;break}throw new Error("Blob too large for offline storage (".concat((e.size/1024/1024).toFixed(2),"MB)"));case 2:return c={id:a,instanceId:r,fileName:n,timestamp:Date.now(),audioBlob:u,formFields:i||{},metadata:o||{},retryCount:0,lastAttempt:null,error:null},t.a(2,new Promise(function(t,r){var e=s.db.transaction([ms.storeName],"readwrite");e.objectStore(ms.storeName).add(c),e.oncomplete=function(){ea("[Offline] Queued submission",a),t(a)},e.onerror=function(t){var e=t.target.error;"QuotaExceededError"===(null==e?void 0:e.name)?r(new Error("IndexedDB quota exceeded â cannot queue submission offline.")):r(e)}}))}},t,this)})),function(t,r,e,n,o){return i.apply(this,arguments)})},{key:"getAll",value:(n=ca(va().m(function t(){var r=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.a(2,[]);case 1:return t.a(2,new Promise(function(t,e){var n=r.db.transaction([ms.storeName],"readonly").objectStore(ms.storeName).getAll();n.onsuccess=function(){return t(n.result||[])},n.onerror=function(){return e(n.error)}}))}},t,this)})),function(){return n.apply(this,arguments)})},{key:"remove",value:(e=ca(va().m(function t(r){var e=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.a(2);case 1:return t.a(2,new Promise(function(t,n){var i=e.db.transaction([ms.storeName],"readwrite");i.objectStore(ms.storeName).delete(r),i.oncomplete=function(){ea("[Offline] Removed from queue",r),t()},i.onerror=function(t){return n(t.target.error)}}))}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_updateRetry",value:(r=ca(va().m(function t(r,e,n){var i=this;return va().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.a(2);case 1:return t.a(2,new Promise(function(t,o){var a=i.db.transaction([ms.storeName],"readwrite"),u=a.objectStore(ms.storeName),c=u.get(r);c.onsuccess=function(){var t=c.result;t&&(t.retryCount=e,t.lastAttempt=Date.now(),t.error=n||null,u.put(t))},a.oncomplete=t,a.onerror=function(){return o(a.error)}}))}},t,this)})),function(t,e,n){return r.apply(this,arguments)})},{key:"processQueue",value:(t=ca(va().m(function t(){var r,e,n,i,o,a,u=this;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!this.isProcessing&&navigator.onLine){t.n=1;break}return t.a(2);case 1:return this.isProcessing=!0,ea("[Offline] Processing queue..."),t.p=2,t.n=3,this.getAll();case 3:r=t.v,ea("[Offline] Pending submissions:",r.length),e=la(r),t.p=4,i=va().m(function t(){var r,e,i,o,a,c,s,f,l,d,p;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r=n.value,e=r.id,i=r.audioBlob,o=r.fileName,a=r.formFields,c=r.metadata,s=r.retryCount,f=r.instanceId,!(s>=ms.maxRetries)){t.n=1;break}return ea("[Offline] Max retries reached for",e),t.a(2,0);case 1:return t.p=1,ea("[Offline] Attempt ".concat(s+1," for"),e),t.n=2,qc({blob:i,fileName:o,formFields:a,metadata:c,instanceId:f,background:!0});case 2:return t.n=3,u.remove(e);case 3:ea("[Offline] Upload succeeded:",e),t.n=7;break;case 4:if(t.p=4,p=t.v,l=(null==p?void 0:p.message)||"Unknown upload error",ea("[Offline] Upload failed:",e,l),!(l.includes("400")||l.includes("Invalid JSON")||l.includes("QuotaExceeded"))){t.n=5;break}return ea("[Offline] Non-retryable error â leaving item in queue"),t.a(2,0);case 5:return t.n=6,u._updateRetry(e,s+1,l);case 6:return d=ms.retryDelays[Math.min(s,ms.retryDelays.length-1)],ea("[Offline] Retrying ".concat(e," after ").concat(d,"ms...")),t.n=7,new Promise(function(t){return setTimeout(t,d)});case 7:return t.a(2)}},t,null,[[1,4]])}),e.s();case 5:if((n=e.n()).done){t.n=8;break}return t.d(ma(i()),6);case 6:if(0!==t.v){t.n=7;break}return t.a(3,7);case 7:t.n=5;break;case 8:t.n=10;break;case 9:t.p=9,o=t.v,e.e(o);case 10:return t.p=10,e.f(),t.f(10);case 11:t.n=13;break;case 12:t.p=12,a=t.v,console.error("[Offline] Fatal queue processing error",a);case 13:return t.p=13,this.isProcessing=!1,t.f(13);case 14:return t.a(2)}},t,this,[[4,9,10,11],[2,12,13,14]])})),function(){return t.apply(this,arguments)})},{key:"setupNetworkListeners",value:function(){var t=this;window.addEventListener("online",function(){ea("[Offline] Online â resuming queue"),t.processQueue()}),window.addEventListener("offline",function(){ea("[Offline] Offline â pausing queue")}),setInterval(function(){navigator.onLine&&t.processQueue().catch(function(t){return ea("[Offline] Retry loop error",t)})},6e4)}}]);var t,r,e,n,i,o}());function gs(){return bs.apply(this,arguments)}function bs(){return(bs=ca(va().m(function t(){return va().w(function(t){for(;;)switch(t.n){case 0:if(hs.db){t.n=2;break}return t.n=1,hs.init();case 1:hs.setupNetworkListeners();case 2:return t.a(2,hs)}},t)}))).apply(this,arguments)}function ws(t,r,e,n,i){return Ss.apply(this,arguments)}function Ss(){return(Ss=ca(va().m(function t(r,e,n,i,o){var a;return va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,gs();case 1:return a=t.v,t.a(2,a.add(r,e,n,i,o))}},t)}))).apply(this,arguments)}function Ts(){return(Ts=ca(va().m(function t(){var r;return va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,gs();case 1:return r=t.v,t.n=2,r.getAll();case 2:return t.a(2,t.v.length)}},t)}))).apply(this,arguments)}function As(){return gs()}"undefined"!=typeof window&&(window.initOffline=As),"undefined"!=typeof module&&module.exports&&(module.exports={getOfflineQueue:gs,queueSubmission:ws,getPendingCount:function(){return Ts.apply(this,arguments)},initOffline:As});var Os,Es,ks;function xs(){if(Es)return Os;Es=1;var t=i().isFinite;return Os=Number.isFinite||function(r){return"number"==typeof r&&t(r)}}ks||(ks=1,De()({target:"Number",stat:!0},{isFinite:xs()}));var Rs,Is,Ps,Cs,Ms,js={};!function(){if(Ms)return js;Ms=1;var t=De(),r=function(){if(Is)return Rs;Is=1;var t=ct(),r=de(),e=No(),n=is(),i=dt(),o=t(n),a=t("".slice),u=Math.ceil,c=function(t){return function(n,c,s){var f,l,d=e(i(n)),p=r(c),v=d.length,y=void 0===s?" ":e(s);return p<=v||""===y?d:((l=o(y,u((f=p-v)/y.length))).length>f&&(l=a(l,0,f)),t?d+l:l+d)}};return Rs={start:c(!1),end:c(!0)}}().start;t({target:"String",proto:!0,forced:function(){if(Cs)return Ps;Cs=1;var t=gt();return Ps=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(t)}()},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}();var _s=!1;function Ns(t){var r=document.createElement("div");return r.textContent=t,r.innerHTML}function Ds(t,r){var e=t.status,n=t.error,i=t.source,o=void 0===i?{}:i,a=t.submission,u=void 0===a?{}:a,c=t.calibration,s=void 0===c?{}:c,f=t.recorder,l=void 0===f?{}:f,d=t.instanceId;if("C"===t.tier||!0===t.fallbackActive)return["recordBtn","pauseBtn","resumeBtn","stopBtn","recorderContainer"].forEach(function(t){r[t]&&(r[t].style.display="none")}),void(r.fallbackContainer&&(r.fallbackContainer.style.display="block"));if(r.step1&&r.step2){if("uninitialized"===e)return r.step1.style.display="block",void(r.step2.style.display="none");var p="idle"!==e&&"uninitialized"!==e;r.step1.style.display=p?"none":"block",r.step2.style.display=p?"block":"none"}if(r.timer||r.timerElapsed){var v=function(t){if(!Number.isFinite(t))return"00m 00s";var r=Math.floor(t/60),e=Math.floor(t%60);return"".concat(r.toString().padStart(2,"0"),"m ").concat(e.toString().padStart(2,"0"),"s")}(l.duration||0);r.timerElapsed?r.timerElapsed.textContent=v:r.timer&&(r.timer.textContent=v),r.timer&&("recording"===e?r.timer.classList.add("starmus-timer--recording"):r.timer.classList.remove("starmus-timer--recording"))}if(r.durationProgress){var y=l.duration||0,m="recording"===e||"paused"===e||"calibrating"===e;if(r.durationProgress.parentElement&&(r.durationProgress.parentElement.style.display=m?"block":"none"),m){var h=Math.min(100,y/1200*100);r.durationProgress.style.setProperty("--starmus-recording-progress","".concat(h,"%")),r.durationProgress.setAttribute("aria-valuenow",Math.floor(y)),y>=1020?r.durationProgress.setAttribute("data-level","danger"):y>=900?r.durationProgress.setAttribute("data-level","warning"):r.durationProgress.setAttribute("data-level","safe"),y>=1200&&"recording"===e&&window.CommandBus&&window.CommandBus.dispatch("stop-mic",{},{instanceId:d})}}if(r.volumeMeter){var g="recording"===e||"paused"===e||"calibrating"===e;if(r.volumeMeter.parentElement&&(r.volumeMeter.parentElement.style.display=g?"block":"none"),g){var b=Math.max(0,Math.min(100,"calibrating"===e?s.volumePercent||0:l.amplitude||0));r.volumeMeter.style.setProperty("--starmus-audio-level","".concat(b,"%"));var w=b/100;w<.6?r.volumeMeter.setAttribute("data-level","safe"):w<.85?r.volumeMeter.setAttribute("data-level","hot"):r.volumeMeter.setAttribute("data-level","clip"),"recording"===e&&function(t,r){if(t>=.85&&!_s){_s=!0;var e=r.messageBox||document.querySelector("[data-starmus-message-box]");e&&(e.textContent="â ï¸ Your microphone is too loud. Move back 6â12 inches or speak softer for a cleaner recording.",e.style.display="block",e.setAttribute("role","alert"),e.setAttribute("aria-live","assertive"),setTimeout(function(){e.style.display="none",e.removeAttribute("role"),e.removeAttribute("aria-live")},6e3))}}(w,r)}else r.volumeMeter.style.setProperty("--starmus-audio-level","0%"),r.volumeMeter.removeAttribute("data-level")}var S="recording"===e,T="paused"===e,A="ready"===e,O="calibrating"===e,E="ready_to_submit"===e,k=s&&!0===s.complete,x=S||T||O;if(r.recordBtn&&(r.recordBtn.style.display=A&&k&&!x&&!E?"inline-flex":"none"),r.pauseBtn&&(r.pauseBtn.style.display=S?"inline-flex":"none"),r.resumeBtn&&(r.resumeBtn.style.display=T?"inline-flex":"none"),r.stopBtn&&(r.stopBtn.style.display=x?"inline-flex":"none",r.stopBtn.disabled=O,r.stopBtn.innerHTML=O?'<span class="dashicons dashicons-update"></span> Calibrating...':'<span class="dashicons dashicons-media-default"></span> Stop'),r.submitBtn&&(r.submitBtn.disabled="ready_to_submit"!==e,r.submitBtn.textContent="submitting"===e?"Uploadingâ¦":"Submit Recording"),r.transcriptBox){var R,I,P=(null===(R=o.transcript)||void 0===R?void 0:R.length)>0,C=(null===(I=o.interimTranscript)||void 0===I?void 0:I.length)>0;P||C?(r.transcriptBox.style.display="block",r.transcriptBox.innerHTML=(P?'<span class="starmus-transcript--final">'.concat(Ns(o.transcript),"</span>"):"")+(C?' <span class="starmus-transcript--interim">'.concat(Ns(o.interimTranscript),"</span>"):"")):r.transcriptBox.style.display="none"}if(r.statusEl){var M=r.statusEl,j="",_="starmus-status";if(n)j=n.message||"An error occurred.",_+=" starmus-status--error";else switch(e){case"ready":j="Mic calibrated. Click Start Recording.",_+=" starmus-status--success";break;case"recording":j="Recording...",_+=" starmus-status--recording";break;case"paused":j="Paused â Resume or Stop.";break;case"submitting":j="Uploading ".concat(Math.round(100*u.progress),"%");break;case"complete":j="Upload successful!",_+=" starmus-status--success";break;default:j=""}M.className=_,M.textContent=j,M.style.display=j?"block":"none"}}function Ls(t,r){var e,n,i,o,a,u,c,s=t.getState().instanceId,f=window.CommandBus||window.StarmusHooks;function l(t){if(!f)return console.warn("[StarmusUI] No CommandBus detected.");f.dispatch(t,{},{instanceId:s})}null===(e=r.recordBtn)||void 0===e||e.addEventListener("click",function(){return l("start-recording")}),null===(n=r.pauseBtn)||void 0===n||n.addEventListener("click",function(){return l("pause-mic")}),null===(i=r.resumeBtn)||void 0===i||i.addEventListener("click",function(){return l("resume-mic")}),null===(o=r.stopBtn)||void 0===o||o.addEventListener("click",function(){return l("stop-mic")}),null===(a=r.submitBtn)||void 0===a||a.addEventListener("click",function(){return l("submit")}),null===(u=r.resetBtn)||void 0===u||u.addEventListener("click",function(){return l("reset")}),null===(c=r.setupMicBtn)||void 0===c||c.addEventListener("click",function(){return l("setup-mic")}),r.fileInput&&r.fileInput.addEventListener("change",function(t){var r,e=null===(r=t.target.files)||void 0===r?void 0:r[0];e&&f.dispatch("file-attached",{file:e},{instanceId:s})});var d=t.subscribe(function(t){return Ds(t,r)});return Ds(t.getState(),r),d}"undefined"!=typeof window&&(window.initUI=Ls);var Bs,Us,Fs,qs,zs,Hs,Ws,Vs={};function Gs(){return Us?Bs:(Us=1,Bs="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff")}function $s(){if(qs)return Fs;qs=1;var t=ct(),r=dt(),e=No(),n=Gs(),i=t("".replace),o=RegExp("^["+n+"]+"),a=RegExp("(^|[^"+n+"])["+n+"]+$"),u=function(t){return function(n){var u=e(r(n));return 1&t&&(u=i(u,o,"")),2&t&&(u=i(u,a,"$1")),u}};return Fs={start:u(1),end:u(2),trim:u(3)}}!function(){if(Ws)return Vs;Ws=1;var t=De(),r=$s().trim,e=function(){if(Hs)return zs;Hs=1;var t=Ur().PROPER,r=v(),e=Gs();return zs=function(n){return r(function(){return!!e[n]()||"âÂá "!=="âÂá "[n]()||t&&e[n].name!==n})}}();t({target:"String",proto:!0,forced:e("trim")},{trim:function(){return r(this)}})}();var Ys=window.StarmusHooks||{},Qs=Ys.subscribe||function(){},Js=Ys.debugLog||function(){};function Ks(t,r,e){function n(n){var i=t.getState(),o=i.source||{},a=i.calibration||{},u=i.env||e||{};if("submitting"!==i.status){var c=o.blob||o.file,s=o.fileName||o.file&&o.file.name||"recording.webm";if(c){var f={transcript:(o.transcript||"").trim()||null,calibration:a.complete?JSON.parse(JSON.stringify(a)):null,env:u};t.dispatch({type:"starmus/submit-start"}),Promise.resolve().then(function(){if(!navigator.onLine)throw new Error("OFFLINE_FAST_PATH");return Js("[Upload] Starting Priority Upload Pipeline..."),qc({blob:c,fileName:s,formFields:n,metadata:f,instanceId:r,onProgress:l})}).then(function(r){Js("[Upload] Upload Succeeded via",r.method,r),t.dispatch({type:"starmus/submit-complete",payload:r})}).catch(function(e){var i=e&&e.message&&-1!==e.message.indexOf("not configured");"OFFLINE_FAST_PATH"!==e.message&&i?t.dispatch({type:"starmus/error",payload:{message:e.message||"Upload failed."}}):(Js("[Upload] Upload failed/offline. Attempting offline queue..."),ws(r,c,s,n,f).then(function(r){t.dispatch({type:"starmus/submit-queued",submissionId:r})}).catch(function(r){console.error("[Upload] Offline save failed:",r),t.dispatch({type:"starmus/error",payload:{message:"Upload failed and could not be saved offline."}})}))})}else t.dispatch({type:"starmus/error",payload:{message:"Please record or attach audio before submitting."}})}function l(r,e){t.dispatch({type:"starmus/submit-progress",progress:r/e})}}return Qs("submit",function(t,e){e&&e.instanceId===r&&n(t.formFields||{})}),Qs("reset",function(e,n){n&&n.instanceId===r&&t.dispatch({type:"starmus/reset"})}),{handleSubmit:n}}"undefined"!=typeof window&&(window.initCore=Ks),"undefined"!=typeof module&&module.exports&&(module.exports={initCore:Ks});var Xs,Zs,tf,rf,ef,nf,of,af,uf,cf,sf,ff,lf,df,pf,vf,yf,mf,hf,gf={};function bf(){return Zs?Xs:(Zs=1,Xs="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView)}function wf(){if(rf)return tf;rf=1;var t=fe(),r=de(),e=RangeError;return tf=function(n){if(void 0===n)return 0;var i=t(n),o=r(i);if(i!==o)throw new e("Wrong length or index");return o}}function Sf(){if(cf)return uf;cf=1;var t=nf?ef:(nf=1,ef=Math.sign||function(t){var r=+t;return 0===r||r!=r?r:r<0?-1:1}),r=function(){if(af)return of;af=1;var t=4503599627370496;return of=function(r){return r+t-t}}(),e=Math.abs;return uf=function(n,i,o,a){var u=+n,c=e(u),s=t(u);if(c<a)return s*r(c/a/i)*a*i;var f=(1+i/2220446049250313e-31)*c,l=f-(f-c);return l>o||l!=l?s*(1/0):s*l}}function Tf(){if(df)return lf;df=1;var t=Array,r=Math.abs,e=Math.pow,n=Math.floor,i=Math.log,o=Math.LN2;return lf={pack:function(a,u,c){var s,f,l,d=t(c),p=8*c-u-1,v=(1<<p)-1,y=v>>1,m=23===u?e(2,-24)-e(2,-77):0,h=a<0||0===a&&1/a<0?1:0,g=0;for((a=r(a))!=a||a===1/0?(f=a!=a?1:0,s=v):(s=n(i(a)/o),a*(l=e(2,-s))<1&&(s--,l*=2),(a+=s+y>=1?m/l:m*e(2,1-y))*l>=2&&(s++,l/=2),s+y>=v?(f=0,s=v):s+y>=1?(f=(a*l-1)*e(2,u),s+=y):(f=a*e(2,y-1)*e(2,u),s=0));u>=8;)d[g++]=255&f,f/=256,u-=8;for(s=s<<u|f,p+=u;p>0;)d[g++]=255&s,s/=256,p-=8;return d[g-1]|=128*h,d},unpack:function(t,r){var n,i=t.length,o=8*i-r-1,a=(1<<o)-1,u=a>>1,c=o-7,s=i-1,f=t[s--],l=127&f;for(f>>=7;c>0;)l=256*l+t[s--],c-=8;for(n=l&(1<<-c)-1,l>>=-c,c+=r;c>0;)n=256*n+t[s--],c-=8;if(0===l)l=1-u;else{if(l===a)return n?NaN:f?-1/0:1/0;n+=e(2,r),l-=u}return(f?-1:1)*n*e(2,l-r)}}}function Af(){if(vf)return pf;vf=1;var t=er(),r=le(),e=pe();return pf=function(n){for(var i=t(this),o=e(i),a=arguments.length,u=r(a>1?arguments[1]:void 0,o),c=a>2?arguments[2]:void 0,s=void 0===c?o:r(c,o);s>u;)i[u++]=n;return i},pf}function Of(){if(mf)return yf;mf=1;var t=i(),r=ct(),e=y(),n=bf(),o=Ur(),a=Tr(),u=Eo(),c=ko(),s=v(),f=So(),l=fe(),d=de(),p=wf(),m=function(){if(ff)return sf;ff=1;var t=Sf();return sf=Math.fround||function(r){return t(r,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}}(),h=Tf(),g=xn(),b=Mn(),w=Af(),S=ii(),T=Ao(),A=_e(),O=In(),E=Hr(),k=o.PROPER,x=o.CONFIGURABLE,R="ArrayBuffer",I="DataView",P="prototype",C="Wrong index",M=E.getterFor(R),j=E.getterFor(I),_=E.set,N=t[R],D=N,L=D&&D[P],B=t[I],U=B&&B[P],F=Object.prototype,q=t.Array,z=t.RangeError,H=r(w),W=r([].reverse),V=h.pack,G=h.unpack,$=function(t){return[255&t]},Y=function(t){return[255&t,t>>8&255]},Q=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},J=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},K=function(t){return V(m(t),23,4)},X=function(t){return V(t,52,8)},Z=function(t,r,e){u(t[P],r,{configurable:!0,get:function(){return e(this)[r]}})},tt=function(t,r,e,n){var i=j(t),o=p(e),a=!!n;if(o+r>i.byteLength)throw new z(C);var u=i.bytes,c=o+i.byteOffset,s=S(u,c,c+r);return a?s:W(s)},rt=function(t,r,e,n,i,o){var a=j(t),u=p(e),c=n(+i),s=!!o;if(u+r>a.byteLength)throw new z(C);for(var f=a.bytes,l=u+a.byteOffset,d=0;d<r;d++)f[l+d]=c[s?d:r-d-1]};if(n){var et=k&&N.name!==R;s(function(){N(1)})&&s(function(){new N(-1)})&&!s(function(){return new N,new N(1.5),new N(NaN),1!==N.length||et&&!x})?et&&x&&a(N,"name",R):((D=function(t){return f(this,L),T(new N(p(t)),this,D)})[P]=L,L.constructor=D,A(D,N)),b&&g(U)!==F&&b(U,F);var nt=new B(new D(2)),it=r(U.setInt8);nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||c(U,{setInt8:function(t,r){it(this,t,r<<24>>24)},setUint8:function(t,r){it(this,t,r<<24>>24)}},{unsafe:!0})}else L=(D=function(t){f(this,L);var r=p(t);_(this,{type:R,bytes:H(q(r),0),byteLength:r}),e||(this.byteLength=r,this.detached=!1)})[P],U=(B=function(t,r,n){f(this,U),f(t,L);var i=M(t),o=i.byteLength,a=l(r);if(a<0||a>o)throw new z("Wrong offset");if(a+(n=void 0===n?o-a:d(n))>o)throw new z("Wrong length");_(this,{type:I,buffer:t,byteLength:n,byteOffset:a,bytes:i.bytes}),e||(this.buffer=t,this.byteLength=n,this.byteOffset=a)})[P],e&&(Z(D,"byteLength",M),Z(B,"buffer",j),Z(B,"byteLength",j),Z(B,"byteOffset",j)),c(U,{getInt8:function(t){return tt(this,1,t)[0]<<24>>24},getUint8:function(t){return tt(this,1,t)[0]},getInt16:function(t){var r=tt(this,2,t,arguments.length>1&&arguments[1]);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=tt(this,2,t,arguments.length>1&&arguments[1]);return r[1]<<8|r[0]},getInt32:function(t){return J(tt(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return J(tt(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return G(tt(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return G(tt(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,r){rt(this,1,t,$,r)},setUint8:function(t,r){rt(this,1,t,$,r)},setInt16:function(t,r){rt(this,2,t,Y,r,arguments.length>2&&arguments[2])},setUint16:function(t,r){rt(this,2,t,Y,r,arguments.length>2&&arguments[2])},setInt32:function(t,r){rt(this,4,t,Q,r,arguments.length>2&&arguments[2])},setUint32:function(t,r){rt(this,4,t,Q,r,arguments.length>2&&arguments[2])},setFloat32:function(t,r){rt(this,4,t,K,r,arguments.length>2&&arguments[2])},setFloat64:function(t,r){rt(this,8,t,X,r,arguments.length>2&&arguments[2])}});return O(D,R),O(B,I),yf={ArrayBuffer:D,DataView:B}}!function(){if(hf)return gf;hf=1;var t=De(),r=i(),e=Of(),n=xo(),o="ArrayBuffer",a=e[o];t({global:!0,constructor:!0,forced:r[o]!==a},{ArrayBuffer:a}),n(o)}();var Ef,kf={};!function(){if(Ef)return kf;Ef=1;var t=De(),r=Le(),e=v(),n=Of(),i=wr(),o=le(),a=de(),u=n.ArrayBuffer,c=n.DataView,s=c.prototype,f=r(u.prototype.slice),l=r(s.getUint8),d=r(s.setUint8);t({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:e(function(){return!new u(2).slice(1,void 0).byteLength})},{slice:function(t,r){if(f&&void 0===r)return f(i(this),t);for(var e=i(this).byteLength,n=o(t,e),s=o(void 0===r?e:r,e),p=new u(a(s-n)),v=new c(this),y=new c(p),m=0;n<s;)d(y,m++,l(v,n++));return p}})}();var xf,Rf,If,Pf={};!function(){if(If)return Pf;If=1;var t=De(),r=function(){if(Rf)return xf;Rf=1;var t=i(),r=v(),e=ct(),n=No(),o=$s().trim,a=Gs(),u=e("".charAt),c=t.parseFloat,s=t.Symbol,f=s&&s.iterator,l=1/c(a+"-0")!=-1/0||f&&!r(function(){c(Object(f))});return xf=l?function(t){var r=o(n(t)),e=c(r);return 0===e&&"-"===u(r,0)?-0:e}:c}();t({global:!0,forced:parseFloat!==r},{parseFloat:r})}();var Cf,Mf,jf,_f,Nf,Df,Lf,Bf,Uf,Ff,qf,zf,Hf,Wf,Vf,Gf,$f,Yf,Qf,Jf,Kf,Xf,Zf={exports:{}};function tl(){if(Mf)return Cf;Mf=1;var t,r,e,n=bf(),o=y(),a=i(),u=vt(),c=yt(),s=nr(),f=ti(),l=At(),d=Tr(),p=Vr(),v=Eo(),m=ht(),h=xn(),g=Mn(),b=or(),w=ir(),S=Hr(),T=S.enforce,A=S.get,O=a.Int8Array,E=O&&O.prototype,k=a.Uint8ClampedArray,x=k&&k.prototype,R=O&&h(O),I=E&&h(E),P=Object.prototype,C=a.TypeError,M=b("toStringTag"),j=w("TYPED_ARRAY_TAG"),_="TypedArrayConstructor",N=n&&!!g&&"Opera"!==f(a.opera),D=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},U=function(t){var r=h(t);if(c(r)){var e=A(r);return e&&s(e,_)?e[_]:U(r)}},F=function(t){if(!c(t))return!1;var r=f(t);return s(L,r)||s(B,r)};for(t in L)(e=(r=a[t])&&r.prototype)?T(e)[_]=r:N=!1;for(t in B)(e=(r=a[t])&&r.prototype)&&(T(e)[_]=r);if((!N||!u(R)||R===Function.prototype)&&(R=function(){throw new C("Incorrect invocation")},N))for(t in L)a[t]&&g(a[t],R);if((!N||!I||I===P)&&(I=R.prototype,N))for(t in L)a[t]&&g(a[t].prototype,I);if(N&&h(x)!==I&&g(x,I),o&&!s(I,M))for(t in D=!0,v(I,M,{configurable:!0,get:function(){return c(this)?this[j]:void 0}}),L)a[t]&&d(a[t],j,t);return Cf={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:D&&j,aTypedArray:function(t){if(F(t))return t;throw new C("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!g||m(R,t)))return t;throw new C(l(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,e,n){if(o){if(e)for(var i in L){var u=a[i];if(u&&s(u.prototype,t))try{delete u.prototype[t]}catch(e){try{u.prototype[t]=r}catch(t){}}}I[t]&&!e||p(I,t,e?r:N&&E[t]||r,n)}},exportTypedArrayStaticMethod:function(t,r,e){var n,i;if(o){if(g){if(e)for(n in L)if((i=a[n])&&s(i,t))try{delete i[t]}catch(t){}if(R[t]&&!e)return;try{return p(R,t,e?r:N&&R[t]||r)}catch(t){}}for(n in L)!(i=a[n])||i[t]&&!e||p(i,t,r)}},getTypedArrayConstructor:U,isView:function(t){if(!c(t))return!1;var r=f(t);return"DataView"===r||s(L,r)||s(B,r)},isTypedArray:F,TypedArray:R,TypedArrayPrototype:I}}function rl(){if(Df)return Nf;Df=1;var t=yt(),r=Math.floor;return Nf=Number.isInteger||function(e){return!t(e)&&isFinite(e)&&r(e)===e}}function el(){if(Bf)return Lf;Bf=1;var t=fe(),r=RangeError;return Lf=function(e){var n=t(e);if(n<0)throw new r("The argument can't be less than 0");return n}}function nl(){if(Ff)return Uf;Ff=1;var t=el(),r=RangeError;return Uf=function(e,n){var i=t(e);if(i%n)throw new r("Wrong offset");return i}}function il(){if(zf)return qf;zf=1;var t=Math.round;return qf=function(r){var e=t(r);return e<0?0:e>255?255:255&e}}function ol(){if(Wf)return Hf;Wf=1;var t=ti();return Hf=function(r){var e=t(r);return"BigInt64Array"===e||"BigUint64Array"===e}}function al(){if(Gf)return Vf;Gf=1;var t=ar(),r=TypeError;return Vf=function(e){var n=t(e,"number");if("number"==typeof n)throw new r("Can't convert number to bigint");return BigInt(n)}}function ul(){if(Yf)return $f;Yf=1;var t=yo(),r=h(),e=Tu(),n=er(),i=pe(),o=go(),a=ho(),u=mo(),c=ol(),s=tl().aTypedArrayConstructor,f=al();return $f=function(l){var d,p,v,y,m,h,g,b,w=e(this),S=n(l),T=arguments.length,A=T>1?arguments[1]:void 0,O=void 0!==A,E=a(S);if(E&&!u(E))for(b=(g=o(S,E)).next,S=[];!(h=r(b,g)).done;)S.push(h.value);for(O&&T>2&&(A=t(A,arguments[2])),p=i(S),v=new(s(w))(p),y=c(v),d=0;p>d;d++)m=O?A(S[d],d):S[d],v[d]=y?f(m):+m;return v},$f}function cl(){if(Jf)return Qf;Jf=1;var t=pe();return Qf=function(r,e,n){for(var i=0,o=arguments.length>2?n:t(e),a=new r(o);o>i;)a[i]=e[i++];return a},Qf}function sl(){if(Kf)return Zf.exports;Kf=1;var t=De(),r=i(),e=h(),n=y(),o=function(){if(_f)return jf;_f=1;var t=i(),r=v(),e=To(),n=tl().NATIVE_ARRAY_BUFFER_VIEWS,o=t.ArrayBuffer,a=t.Int8Array;return jf=!n||!r(function(){a(1)})||!r(function(){new a(-1)})||!e(function(t){new a,new a(null),new a(1.5),new a(t)},!0)||r(function(){return 1!==new a(new o(2),1,void 0).length})}(),a=tl(),u=Of(),c=So(),s=ut(),f=Tr(),l=rl(),d=de(),p=wf(),m=nl(),g=il(),b=ur(),w=nr(),S=ti(),T=yt(),A=Tt(),O=On(),E=ht(),k=Mn(),x=he().f,R=ul(),I=Xo().forEach,P=xo(),C=Eo(),M=Sr(),j=fr(),_=cl(),N=Hr(),D=Ao(),L=N.get,B=N.set,U=N.enforce,F=M.f,q=j.f,z=r.RangeError,H=u.ArrayBuffer,W=H.prototype,V=u.DataView,G=a.NATIVE_ARRAY_BUFFER_VIEWS,$=a.TYPED_ARRAY_TAG,Y=a.TypedArray,Q=a.TypedArrayPrototype,J=a.isTypedArray,K="BYTES_PER_ELEMENT",X="Wrong length",Z=function(t,r){C(t,r,{configurable:!0,get:function(){return L(this)[r]}})},tt=function(t){var r;return E(W,t)||"ArrayBuffer"===(r=S(t))||"SharedArrayBuffer"===r},rt=function(t,r){return J(t)&&!A(r)&&r in t&&l(+r)&&r>=0},et=function(t,r){return r=b(r),rt(t,r)?s(2,t[r]):q(t,r)},nt=function(t,r,e){return r=b(r),!(rt(t,r)&&T(e)&&w(e,"value"))||w(e,"get")||w(e,"set")||e.configurable||w(e,"writable")&&!e.writable||w(e,"enumerable")&&!e.enumerable?F(t,r,e):(t[r]=e.value,t)};return n?(G||(j.f=et,M.f=nt,Z(Q,"buffer"),Z(Q,"byteOffset"),Z(Q,"byteLength"),Z(Q,"length")),t({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:et,defineProperty:nt}),Zf.exports=function(n,i,a){var u=n.match(/\d+/)[0]/8,s=n+(a?"Clamped":"")+"Array",l="get"+n,v="set"+n,y=r[s],h=y,b=h&&h.prototype,w={},S=function(t,r){F(t,r,{get:function(){return function(t,r){var e=L(t);return e.view[l](r*u+e.byteOffset,!0)}(this,r)},set:function(t){return function(t,r,e){var n=L(t);n.view[v](r*u+n.byteOffset,a?g(e):e,!0)}(this,r,t)},enumerable:!0})};G?o&&(h=i(function(t,r,n,i){return c(t,b),D(T(r)?tt(r)?void 0!==i?new y(r,m(n,u),i):void 0!==n?new y(r,m(n,u)):new y(r):J(r)?_(h,r):e(R,h,r):new y(p(r)),t,h)}),k&&k(h,Y),I(x(y),function(t){t in h||f(h,t,y[t])}),h.prototype=b):(h=i(function(t,r,n,i){c(t,b);var o,a,s,f=0,l=0;if(T(r)){if(!tt(r))return J(r)?_(h,r):e(R,h,r);o=r,l=m(n,u);var v=r.byteLength;if(void 0===i){if(v%u)throw new z(X);if((a=v-l)<0)throw new z(X)}else if((a=d(i)*u)+l>v)throw new z(X);s=a/u}else s=p(r),o=new H(a=s*u);for(B(t,{buffer:o,byteOffset:l,byteLength:a,length:s,view:new V(o)});f<s;)S(t,f++)}),k&&k(h,Y),b=h.prototype=O(Q)),b.constructor!==h&&f(b,"constructor",h),U(b).TypedArrayConstructor=h,$&&f(b,$,s);var A=h!==y;w[s]=h,t({global:!0,constructor:!0,forced:A,sham:!G},w),K in h||f(h,K,u),K in b||f(b,K,u),P(s)}):Zf.exports=function(){},Zf.exports}Xf||(Xf=1,sl()("Float32",function(t){return function(r,e,n){return t(this,r,e,n)}}));var fl,ll,dl,pl={};!function(){if(dl)return pl;dl=1;var t=ct(),r=tl(),e=function(){if(ll)return fl;ll=1;var t=er(),r=le(),e=pe(),n=wi(),i=Math.min;return fl=[].copyWithin||function(o,a){var u=t(this),c=e(u),s=r(o,c),f=r(a,c),l=arguments.length>2?arguments[2]:void 0,d=i((void 0===l?c:r(l,c))-f,c-s),p=1;for(f<s&&s<f+d&&(p=-1,f+=d-1,s+=d-1);d-- >0;)f in u?u[s]=u[f]:n(u,s),s+=p,f+=p;return u},fl}(),n=t(e),i=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",function(t,r){return n(i(this),t,r,arguments.length>2?arguments[2]:void 0)})}();var vl,yl={};!function(){if(vl)return yl;vl=1;var t=tl(),r=Xo().every,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("every",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var ml,hl={};!function(){if(ml)return hl;ml=1;var t=tl(),r=Af(),e=al(),n=ti(),i=h(),o=ct(),a=v(),u=t.aTypedArray,c=t.exportTypedArrayMethod,s=o("".slice);c("fill",function(t){var o=arguments.length;u(this);var a="Big"===s(n(this),0,3)?e(t):+t;return i(r,this,a,o>1?arguments[1]:void 0,o>2?arguments[2]:void 0)},a(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}))}();var gl,bl,wl,Sl={};!function(){if(wl)return Sl;wl=1;var t=tl(),r=Xo().filter,e=function(){if(bl)return gl;bl=1;var t=cl(),r=tl().getTypedArrayConstructor;return gl=function(e,n){return t(r(e),n)}}(),n=t.aTypedArray;(0,t.exportTypedArrayMethod)("filter",function(t){var i=r(n(this),t,arguments.length>1?arguments[1]:void 0);return e(this,i)})}();var Tl,Al={};!function(){if(Tl)return Al;Tl=1;var t=tl(),r=Xo().find,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("find",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var Ol,El={};!function(){if(Ol)return El;Ol=1;var t=tl(),r=Xo().findIndex,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("findIndex",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var kl,xl={};!function(){if(kl)return xl;kl=1;var t=tl(),r=Xo().forEach,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("forEach",function(t){r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var Rl,Il={};!function(){if(Rl)return Il;Rl=1;var t=tl(),r=ve().includes,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("includes",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var Pl,Cl={};!function(){if(Pl)return Cl;Pl=1;var t=tl(),r=ve().indexOf,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("indexOf",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var Ml,jl={};!function(){if(Ml)return jl;Ml=1;var t=i(),r=v(),e=ct(),n=tl(),o=Nn(),a=or()("iterator"),u=t.Uint8Array,c=e(o.values),s=e(o.keys),f=e(o.entries),l=n.aTypedArray,d=n.exportTypedArrayMethod,p=u&&u.prototype,y=!r(function(){p[a].call([1])}),m=!!p&&p.values&&p[a]===p.values&&"values"===p.values.name,h=function(){return c(l(this))};d("entries",function(){return f(l(this))},y),d("keys",function(){return s(l(this))},y),d("values",h,y||!m,{name:"values"}),d(a,h,y||!m,{name:"values"})}();var _l,Nl={};!function(){if(_l)return Nl;_l=1;var t=tl(),r=ct(),e=t.aTypedArray,n=t.exportTypedArrayMethod,i=r([].join);n("join",function(t){return i(e(this),t)})}();var Dl,Ll,Bl,Ul={};!function(){if(Bl)return Ul;Bl=1;var t=tl(),r=Ou(),e=function(){if(Ll)return Dl;Ll=1;var t=Ou(),r=pt(),e=fe(),n=pe(),i=Be(),o=Math.min,a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0,c=i("lastIndexOf");return Dl=u||!c?function(i){if(u)return t(a,this,arguments)||0;var c=r(this),s=n(c);if(0===s)return-1;var f=s-1;for(arguments.length>1&&(f=o(f,e(arguments[1]))),f<0&&(f=s+f);f>=0;f--)if(f in c&&c[f]===i)return f||0;return-1}:a,Dl}(),n=t.aTypedArray;(0,t.exportTypedArrayMethod)("lastIndexOf",function(t){var i=arguments.length;return r(e,n(this),i>1?[t,arguments[1]]:[t])})}();var Fl,ql={};!function(){if(Fl)return ql;Fl=1;var t=tl(),r=Xo().map,e=t.aTypedArray,n=t.getTypedArrayConstructor;(0,t.exportTypedArrayMethod)("map",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0,function(t,r){return new(n(t))(r)})})}();var zl,Hl={};!function(){if(zl)return Hl;zl=1;var t=tl(),r=ja().left,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("reduce",function(t){var n=arguments.length;return r(e(this),t,n,n>1?arguments[1]:void 0)})}();var Wl,Vl={};!function(){if(Wl)return Vl;Wl=1;var t=tl(),r=ja().right,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("reduceRight",function(t){var n=arguments.length;return r(e(this),t,n,n>1?arguments[1]:void 0)})}();var Gl,$l={};!function(){if(Gl)return $l;Gl=1;var t=tl(),r=t.aTypedArray,e=t.exportTypedArrayMethod,n=Math.floor;e("reverse",function(){for(var t,e=this,i=r(e).length,o=n(i/2),a=0;a<o;)t=e[a],e[a++]=e[--i],e[i]=t;return e})}();var Yl,Ql={};!function(){if(Yl)return Ql;Yl=1;var t=i(),r=h(),e=tl(),n=pe(),o=nl(),a=er(),u=v(),c=t.RangeError,s=t.Int8Array,f=s&&s.prototype,l=f&&f.set,d=e.aTypedArray,p=e.exportTypedArrayMethod,y=!u(function(){var t=new Uint8ClampedArray(2);return r(l,t,{length:1,0:3},1),3!==t[1]}),m=y&&e.NATIVE_ARRAY_BUFFER_VIEWS&&u(function(){var t=new s(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]});p("set",function(t){d(this);var e=o(arguments.length>1?arguments[1]:void 0,1),i=a(t);if(y)return r(l,this,i,e);var u=this.length,s=n(i),f=0;if(s+e>u)throw new c("Wrong length");for(;f<s;)this[e+f]=i[f++]},!y||m)}();var Jl,Kl={};!function(){if(Jl)return Kl;Jl=1;var t=tl(),r=v(),e=ii(),n=t.aTypedArray,i=t.getTypedArrayConstructor;(0,t.exportTypedArrayMethod)("slice",function(t,r){for(var o=e(n(this),t,r),a=i(this),u=0,c=o.length,s=new a(c);c>u;)s[u]=o[u++];return s},r(function(){new Int8Array(1).slice()}))}();var Xl,Zl={};!function(){if(Xl)return Zl;Xl=1;var t=tl(),r=Xo().some,e=t.aTypedArray;(0,t.exportTypedArrayMethod)("some",function(t){return r(e(this),t,arguments.length>1?arguments[1]:void 0)})}();var td,rd,ed,nd,id,od,ad,ud,cd,sd={};!function(){if(cd)return sd;cd=1;var t=i(),r=Le(),e=v(),n=Ot(),o=function(){if(rd)return td;rd=1;var t=ii(),r=Math.floor,e=function(n,i){var o=n.length;if(o<8)for(var a,u,c=1;c<o;){for(u=c,a=n[c];u&&i(n[u-1],a)>0;)n[u]=n[--u];u!==c++&&(n[u]=a)}else for(var s=r(o/2),f=e(t(n,0,s),i),l=e(t(n,s),i),d=f.length,p=l.length,v=0,y=0;v<d||y<p;)n[v+y]=v<d&&y<p?i(f[v],l[y])<=0?f[v++]:l[y++]:v<d?f[v++]:l[y++];return n};return td=e}(),a=tl(),u=function(){if(nd)return ed;nd=1;var t=gt().match(/firefox\/(\d+)/i);return ed=!!t&&+t[1]}(),c=function(){if(od)return id;od=1;var t=gt();return id=/MSIE|Trident/.test(t)}(),s=bt(),f=function(){if(ud)return ad;ud=1;var t=gt().match(/AppleWebKit\/(\d+)\./);return ad=!!t&&+t[1]}(),l=a.aTypedArray,d=a.exportTypedArrayMethod,p=t.Uint16Array,y=p&&r(p.prototype.sort),m=!(!y||e(function(){y(new p(2),null)})&&e(function(){y(new p(2),{})})),h=!!y&&!e(function(){if(s)return s<74;if(u)return u<67;if(c)return!0;if(f)return f<602;var t,r,e=new p(516),n=Array(516);for(t=0;t<516;t++)r=t%4,e[t]=515-t,n[t]=t-2*r+3;for(y(e,function(t,r){return(t/4|0)-(r/4|0)}),t=0;t<516;t++)if(e[t]!==n[t])return!0});d("sort",function(t){return void 0!==t&&n(t),h?y(this,t):o(l(this),function(t){return function(r,e){return void 0!==t?+t(r,e)||0:e!=e?-1:r!=r?1:0===r&&0===e?1/r>0&&1/e<0?1:-1:r>e}}(t))},!h||m)}();var fd,ld={};!function(){if(fd)return ld;fd=1;var t=tl(),r=de(),e=le(),n=t.aTypedArray,i=t.getTypedArrayConstructor;(0,t.exportTypedArrayMethod)("subarray",function(t,o){var a=n(this),u=a.length,c=e(t,u);return new(i(a))(a.buffer,a.byteOffset+c*a.BYTES_PER_ELEMENT,r((void 0===o?u:e(o,u))-c))})}();var dd,pd={};!function(){if(dd)return pd;dd=1;var t=i(),r=Ou(),e=tl(),n=v(),o=ii(),a=t.Int8Array,u=e.aTypedArray,c=e.exportTypedArrayMethod,s=[].toLocaleString,f=!!a&&n(function(){s.call(new a(1))});c("toLocaleString",function(){return r(s,f?o(u(this)):u(this),o(arguments))},n(function(){return[1,2].toLocaleString()!==new a([1,2]).toLocaleString()})||!n(function(){a.prototype.toLocaleString.call([1,2])}))}();var vd,yd={};!function(){if(vd)return yd;vd=1;var t=tl().exportTypedArrayMethod,r=v(),e=i(),n=ct(),o=e.Uint8Array,a=o&&o.prototype||{},u=[].toString,c=n([].join);r(function(){u.call({})})&&(u=function(){return c(this)});var s=a.toString!==u;t("toString",u,s)}(),function(t){var r=t.StarmusHooks,e=r&&r.debugLog||function(){},n={},i=null;function o(t,e,n){try{r&&"function"==typeof r.dispatch&&r.dispatch("starmus_event",{instanceId:t,event:e,severity:n.severity||"info",message:n.message||"",data:n.data||{}})}catch(t){console.warn("[Starmus] Telemetry emit failed:",t)}}function a(){var r=t.AudioContext||t.webkitAudioContext;if(!r)throw new Error("AudioContext not supported");if((!i||"closed"===i.state)&&(i=new r({latencyHint:"interactive"}),e("[Recorder] Created AudioContext, state:",i.state),"function"!=typeof i.createMediaStreamSource))throw new Error("AudioContext lacks createMediaStreamSource");return i}function u(t){var r=a(),n=r.createMediaStreamSource(t);try{var i=function(t){var r=t.createMediaStreamDestination||t.createMediaStreamAudioDestination;if("function"!=typeof r)throw new Error("MediaStreamDestination not supported");var e=r.call(t);if(!e||!e.stream)throw new Error("Destination stream invalid");return e}(r),o=r.createBiquadFilter();o.type="highpass",o.frequency.value=85;var u=r.createDynamicsCompressor();u.threshold.value=-20,u.knee.value=40,u.ratio.value=12,u.attack.value=0,u.release.value=.25;var c=r.createAnalyser();return c.fftSize=2048,n.connect(o),o.connect(u),u.connect(c),c.connect(i),{audioContext:r,destinationStream:i.stream,analyser:c,nodes:[n,o,u,c,i],fallbackActive:!1}}catch(i){e("[Recorder] Audio graph failed â fallback to raw stream:",i.message);var s=r.createAnalyser();return s.fftSize=2048,n.connect(s),{audioContext:r,destinationStream:t,analyser:s,nodes:[n,s],fallbackActive:!0}}}t.initStarmusRecorder=function(i,c){var s=i.getState&&i.getState().tier||"A";e("[Recorder]["+c+"] Tier:",s),r.subscribe("setup-mic",function(t,r){if(r&&r.instanceId===c){if(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia){var e="Microphone not supported.";return o(c,"E_RECORDER_UNSUPPORTED",{severity:"error",message:e}),void i.dispatch({type:"starmus/error",payload:{message:e,retryable:!1}})}navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){return o(c,"E_MIC_ACCESS",{severity:"info",message:"Mic access granted"}),i.dispatch({type:"starmus/calibration-start"}),(r=t,e=function(t,r){i.dispatch({type:"starmus/calibration-update",message:t,volumePercent:r})},new Promise(function(t){var n;try{n=a()}catch(r){return void t({gain:1,snr:1,noiseFloor:0,speechLevel:0,timestamp:(new Date).toISOString()})}var i=n.createAnalyser();i.fftSize=2048;var o=n.createMediaStreamSource(r);o.connect(i);var u=new Float32Array(i.fftSize),c=[],s=Date.now();!function r(){if("running"===n.state){i.getFloatTimeDomainData(u);for(var a=0,f=0;f<u.length;f++)a+=u[f]*u[f];var l=Math.sqrt(a/u.length);if(isFinite(l)){if(c.push(l),e){var d=Math.min(100,2e3*l);e("Calibratingâ¦",d,!1)}if(Date.now()-s<15e3)requestAnimationFrame(r);else{var p=Math.max(1,Math.floor(c.length/3)),v=c.slice(0,p),y=c.slice(p,2*p),m=function(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r/t.length},h=m(v),g=m(y),b=g/Math.max(h,1e-6),w=b<3?6:Math.max(1,Math.min(4,.1/Math.max(g,1e-6))),S={gain:parseFloat(w.toFixed(3)),snr:parseFloat(b.toFixed(3)),noiseFloor:parseFloat(h.toFixed(6)),speechLevel:parseFloat(g.toFixed(6)),timestamp:(new Date).toISOString()};try{o.disconnect()}catch(t){}try{i.disconnect()}catch(t){}e&&e("Mic calibrated",null,!0),t(S)}}else requestAnimationFrame(r)}else requestAnimationFrame(r)}()})).then(function(r){try{t.getTracks().forEach(function(t){t.stop()})}catch(t){}i.dispatch({type:"starmus/calibration-complete",calibration:r})});var r,e}).catch(function(t){var r=t&&"NotAllowedError"===t.name?"Microphone permission denied.":"Failed to access microphone.";o(c,"E_MIC_ACCESS",{severity:"error",message:r,data:{error:t.message}}),i.dispatch({type:"starmus/error",payload:{message:r,retryable:!0}})})}}),r.subscribe("start-recording",function(r,a){if(a&&a.instanceId===c){var s=i.getState();"calibrating"!==s.status?s.calibration&&!0===s.calibration.complete?navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(function(r){var a,s=u(r),f=s.destinationStream,l=s.analyser;"suspended"===s.audioContext.state&&s.audioContext.resume().catch(function(){}),(a=f,new Promise(function(t){var r=a.getAudioTracks&&a.getAudioTracks()||[];if(r.length){var e=r[0];if("live"!==e.readyState){var n=0,i=setInterval(function(){("live"===e.readyState||n>100)&&(clearInterval(i),t()),n+=1},50);setTimeout(function(){clearInterval(i),t()},5e3)}else t()}else t()})).then(function(){if((f.getAudioTracks&&f.getAudioTracks()||[]).length){var a,u=[];try{a=new t.MediaRecorder(f,{})}catch(t){e("[Recorder] MediaRecorder creation failed:",t);try{r.getTracks().forEach(function(t){t.stop()})}catch(t){}return void i.dispatch({type:"starmus/error",payload:{message:"Unable to start recording",retryable:!0}})}var d={mediaRecorder:a,rawStream:r,processedStream:f,audioContext:s.audioContext,analyser:l,nodes:s.nodes,fallbackActive:s.fallbackActive};n[c]=d,a.ondataavailable=function(t){t.data&&t.data.size>0&&u.push(t.data)},a.onstop=function(){if(n[c]===d){try{d.audioContext&&d.audioContext.close&&d.audioContext.close()}catch(t){}var t=new Blob(u,{type:a.mimeType||"audio/webm"}),e="starmus-recording-"+Date.now()+".webm";i.dispatch({type:"starmus/recording-available",payload:{blob:t,fileName:e}});try{r.getTracks().forEach(function(t){t.stop()})}catch(t){}try{f.getTracks().forEach(function(t){t.stop()})}catch(t){}d.nodes.forEach(function(t){try{t.disconnect()}catch(t){}}),delete n[c]}},a.onerror=function(t){e("[Recorder] MediaRecorder error:",t),o(c,"E_RECORDER_ERROR",{severity:"error",message:t.message}),i.dispatch({type:"starmus/error",payload:{message:"Recording error",retryable:!0}})};try{if("inactive"!==a.state)throw new Error("MediaRecorder not in inactive state");a.start(3e3),i.dispatch({type:"starmus/mic-start"})}catch(t){e("[Recorder] mediaRecorder.start failed:",t);try{r.getTracks().forEach(function(t){t.stop()})}catch(t){}return delete n[c],i.dispatch({type:"starmus/error",payload:{message:"Cannot start recording",retryable:!0}}),void o(c,"E_RECORDER_START_FAIL",{severity:"error",message:t.message})}var p=new Float32Array(l.fftSize);d.startTime=Date.now(),d.rafId=requestAnimationFrame(function t(){var r=n[c];if(r&&r.mediaRecorder&&("recording"===r.mediaRecorder.state||"paused"===r.mediaRecorder.state)){try{r.analyser.getFloatTimeDomainData(p);for(var e=0,o=0;o<p.length;o++)e+=p[o]*p[o];var a=Math.sqrt(e/p.length),u=Math.min(100,Math.max(0,4e3*a)),s=(Date.now()-d.startTime)/1e3;i.dispatch({type:"starmus/recorder-tick",duration:s,amplitude:u})}catch(t){}d.rafId=requestAnimationFrame(t)}})}else{try{r.getTracks().forEach(function(t){t.stop()})}catch(t){}i.dispatch({type:"starmus/error",payload:{message:"Invalid audio stream",retryable:!0}})}})}).catch(function(t){var r="Could not access microphone.";o(c,"E_MIC_ACCESS",{severity:"error",message:r,data:{error:t.message}}),i.dispatch({type:"starmus/error",payload:{message:r,retryable:!0}})}):i.dispatch({type:"starmus/error",payload:{message:"Microphone not available.",retryable:!1}}):i.dispatch({type:"starmus/error",payload:{message:"Please setup your microphone first.",retryable:!0}}):i.dispatch({type:"starmus/error",payload:{message:"Please wait for calibration to complete.",retryable:!0}})}}),r.subscribe("stop-mic",function(t,r){if(r&&r.instanceId===c){var e=n[c];if(e&&e.mediaRecorder&&"recording"===e.mediaRecorder.state){i.dispatch({type:"starmus/mic-stop"});try{e.mediaRecorder.stop()}catch(t){}}}}),r.subscribe("pause-mic",function(t,r){if(r&&r.instanceId===c){var e=n[c];e&&e.mediaRecorder&&"recording"===e.mediaRecorder.state&&"function"==typeof e.mediaRecorder.pause&&(i.dispatch({type:"starmus/mic-pause"}),e.mediaRecorder.pause())}}),r.subscribe("resume-mic",function(t,r){if(r&&r.instanceId===c){var e=n[c];e&&e.mediaRecorder&&"paused"===e.mediaRecorder.state&&"function"==typeof e.mediaRecorder.resume&&(i.dispatch({type:"starmus/mic-resume"}),e.mediaRecorder.resume())}}),r.subscribe("reset",function(t,r){if(r&&r.instanceId===c){var e=n[c];if(e){try{e.mediaRecorder&&"inactive"!==e.mediaRecorder.state&&e.mediaRecorder.stop()}catch(t){}e.rafId&&cancelAnimationFrame(e.rafId),e.rawStream&&e.rawStream.getTracks().forEach(function(t){t.stop()}),e.processedStream&&e.processedStream.getTracks().forEach(function(t){t.stop()}),e.nodes&&e.nodes.forEach(function(t){try{t.disconnect()}catch(t){}}),delete n[c]}}})}}("undefined"!=typeof window?window:globalThis);var md=("undefined"!=typeof window?window:globalThis).initStarmusRecorder;function hd(t,r){return md(t,r)}"undefined"!=typeof window&&(window.initRecorder=md,window.initStarmusRecorder=md),"undefined"!=typeof window&&(window.initRecorder=hd,window.initStarmusRecorder=hd);var gd=window.StarmusHooks||window.CommandBus,bd=gd&&gd.debugLog?gd.debugLog:function(){},wd=function(){return fa(function t(r,e,n){sa(this,t),this.peaks=r,this.container=document.getElementById(e),this.data=Array.isArray(n)?n:[],this.activeTokenIndex=-1,this.isUserScrolling=!1,this.scrollTimeout=null,this.boundOnTimeUpdate=null,this.boundOnSeeked=null,this.boundOnClick=null,this.boundOnScroll=null,this.init()},[{key:"init",value:function(){this.container?(this.render(),this.bindEvents()):console.warn("[StarmusTranscript] Container not found. Transcript sync disabled.")}},{key:"render",value:function(){var t=this,r=document.createDocumentFragment();this.data.forEach(function(e,n){var i=document.createElement("span");i.textContent=e.text,i.className="starmus-word",i.dataset.index=n,i.dataset.start=e.start,i.dataset.end=e.end,"confidence"in e&&e.confidence<.8&&(i.dataset.confidence="low",i.title="Low confidence: ".concat(Math.round(100*e.confidence),"%")),r.appendChild(i),n<t.data.length-1&&r.appendChild(document.createTextNode(" "))}),this.container.innerHTML="",this.container.appendChild(r),this.activeTokenIndex=-1}},{key:"bindEvents",value:function(){var t=this;this.boundOnClick=function(r){var e=r.target;if(e.classList.contains("starmus-word")){var n=parseFloat(e.dataset.start);t.peaks&&t.peaks.player&&"function"==typeof t.peaks.player.seek&&(t.peaks.player.seek(n),gd&&"function"==typeof gd.dispatch&&gd.dispatch("starmus/transcript/seek",{time:n},{instanceId:t.peaks.instanceId}))}},this.container.addEventListener("click",this.boundOnClick),this.boundOnScroll=function(){t.isUserScrolling=!0,t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.scrollTimeout=setTimeout(function(){t.isUserScrolling=!1},1e3)},this.container.addEventListener("scroll",this.boundOnScroll);var r=this.peaks&&this.peaks.player&&this.peaks.player.getMediaElement?this.peaks.player.getMediaElement():null;r&&"function"==typeof r.addEventListener?(this.boundOnTimeUpdate=function(){var e=r.currentTime;"number"!=typeof e||isNaN(e)||t.syncHighlight(e)},r.addEventListener("timeupdate",this.boundOnTimeUpdate),this.boundOnSeeked=function(){var e=r.currentTime;"number"!=typeof e||isNaN(e)||t.syncHighlight(e)},r.addEventListener("seeked",this.boundOnSeeked)):bd("[StarmusTranscript] Player media element not found â sync disabled")}},{key:"findTokenIndex",value:function(t){if("number"!=typeof t||0===this.data.length)return-1;for(var r=0,e=this.data.length-1;r<=e;){var n=r+e>>1,i=this.data[n];if(t>=i.start&&t<=i.end)return n;t<i.start?e=n-1:r=n+1}return-1}},{key:"syncHighlight",value:function(t){var r=this.findTokenIndex(t);-1===r?this.clearHighlight():r!==this.activeTokenIndex&&this.updateDOM(r)}},{key:"updateDOM",value:function(t){var r=this.container.querySelectorAll(".starmus-word");this.activeTokenIndex>=0&&r[this.activeTokenIndex]&&r[this.activeTokenIndex].classList.remove("is-active"),this.activeTokenIndex=t;var e=r[t];e&&(e.classList.add("is-active"),this.isUserScrolling||this.scrollToWord(e))}},{key:"clearHighlight",value:function(){var t=this.container.querySelector(".starmus-word.is-active");t&&t.classList.remove("is-active"),this.activeTokenIndex=-1}},{key:"scrollToWord",value:function(t){t.scrollIntoView&&t.scrollIntoView({block:"center",behavior:"smooth"})}},{key:"updateData",value:function(t){this.data=Array.isArray(t)?t:[],this.render(),this.unbindEvents(),this.bindEvents()}},{key:"unbindEvents",value:function(){if(this.container){this.boundOnClick&&this.container.removeEventListener("click",this.boundOnClick),this.boundOnScroll&&this.container.removeEventListener("scroll",this.boundOnScroll);var t=this.peaks&&this.peaks.player&&this.peaks.player.getMediaElement?this.peaks.player.getMediaElement():null;t&&"function"==typeof t.removeEventListener&&(this.boundOnTimeUpdate&&t.removeEventListener("timeupdate",this.boundOnTimeUpdate),this.boundOnSeeked&&t.removeEventListener("seeked",this.boundOnSeeked))}}},{key:"destroy",value:function(){this.unbindEvents(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.container&&(this.container.innerHTML=""),this.data=[],this.activeTokenIndex=-1,this.isUserScrolling=!1}}])}();function Sd(t,r,e){return new wd(t,r,e)}"undefined"!=typeof window&&(window.StarmusTranscript=wd,window.StarmusTranscriptController={StarmusTranscript:wd,init:Sd}),"undefined"!=typeof module&&module.exports&&(module.exports={StarmusTranscript:wd,init:Sd});var Td,Ad={};!function(){if(Td)return Ad;Td=1;var t=De(),r=y(),e=Sr().f;t({target:"Object",stat:!0,forced:Object.defineProperty!==e,sham:!r},{defineProperty:e})}(),function(t){if(t.Starmus=t.Starmus||{},t.STARMUS_EDITOR_DATA?(t.STARMUS_BOOTSTRAP=t.STARMUS_EDITOR_DATA,t.STARMUS_BOOTSTRAP.pageType="editor"):t.STARMUS_RERECORDER_DATA?(t.STARMUS_BOOTSTRAP=t.STARMUS_RERECORDER_DATA,t.STARMUS_BOOTSTRAP.pageType="rerecorder"):t.STARMUS_RECORDER_DATA&&(t.STARMUS_BOOTSTRAP=t.STARMUS_RECORDER_DATA,t.STARMUS_BOOTSTRAP.pageType="recorder"),t.Starmus_DisableOptionalNodes=!0,t.Starmus_DisableOptionalNodes){var r=(t.AudioContext||t.webkitAudioContext||{}).prototype;r&&(r.createConstantSource&&(r.createConstantSource=function(){throw new Error("ConstantSourceNode disabled")}),r.createIIRFilter&&(r.createIIRFilter=function(){throw new Error("IIRFilterNode disabled")}))}!function(t){try{if("function"==typeof t.Peaks||"object"===ba(t.Peaks))return void(t.Starmus.Peaks=t.Peaks);Object.defineProperty(t,"Peaks",{get:function(){return t.Starmus.Peaks},set:function(r){t.Starmus.Peaks=r},configurable:!0})}catch(t){console.warn("[Starmus] Peaks.js exposure failed:",t)}}(t);var e=t.StarmusHooks,n=t.createStore,i=t.initUI,o=t.initCore,a=t.initOffline;function u(r,e){try{t.StarmusHooks&&"function"==typeof t.StarmusHooks.doAction&&t.StarmusHooks.doAction("starmus_event",{instanceId:e.instanceId||null,event:r,severity:e.severity||"info",message:e.message||"",data:e.data||{}})}catch(t){console.warn("[Starmus] Global telemetry emit failed:",t)}}function c(){try{return navigator.deviceMemory||null}catch(t){return null}}function s(){try{return navigator.hardwareConcurrency||null}catch(t){return null}}function f(){return(f=ca(va().m(function t(r){var e,n;return va().w(function(t){for(;;)switch(t.p=t.n){case 0:if("C"!==r){t.n=1;break}return t.a(2,"C");case 1:if(!navigator.storage||!navigator.storage.estimate){t.n=6;break}return t.p=2,t.n=3,navigator.storage.estimate();case 3:if(e=t.v,!((n=(e.quota||0)/1024/1024)&&n<80)){t.n=4;break}return t.a(2,"C");case 4:t.n=6;break;case 5:t.p=5,t.v;case 6:if(!navigator.permissions||!navigator.permissions.query){t.n=11;break}return t.p=7,t.n=8,navigator.permissions.query({name:"microphone"});case 8:if("denied"!==t.v.state){t.n=9;break}return t.a(2,"C");case 9:t.n=11;break;case 10:t.p=10,t.v;case 11:return t.a(2,r)}},t,null,[[7,10],[2,5]])}))).apply(this,arguments)}function l(){try{var r=!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia),e="function"==typeof t.MediaRecorder,n=!(!t.AudioContext&&!t.webkitAudioContext);return r&&e&&n}catch(t){return!1}}t.StarmusApp=t.StarmusApp||{},t.StarmusApp.isRecordingSupported=l,a().catch(function(t){console.error("[Starmus] Offline queue init failed:",t)});var d={};function p(r,p){if(e=t.StarmusHooks,n=t.createStore,i=t.initUI,o=t.initCore,a=t.initOffline,e&&n&&i&&o&&a||(console.error("[Starmus Integrator] Critical dependencies missing â cannot initialize."),console.error("Available:",{CommandBus:!!e,createStore:!!n,initUI:!!i,initCore:!!o,initOfflineQueue:!!a}),0)){var v=p.getAttribute("data-starmus-id");if(v||(v="starmus_"+Date.now()+"_"+Math.random().toString(16).slice(2),p.setAttribute("data-starmus-id",v)),d[v])return v;var y=function(t){var r=t.capabilities||{},e=t.network||{};if(/\bCrOS\b|Chrome OS/i.test(navigator.userAgent))return"A";if(!r.mediaRecorder||!r.webrtc)return"C";var n=c(),i=s();if(n&&n<1)return"C";if(i){if(1===i)return"C";if(2===i)return"B"}return/wv|Crosswalk|Android WebView|Opera Mini/i.test(navigator.userAgent)?"C":"2g"===e.effectiveType||"slow-2g"===e.effectiveType||n&&n<2?"B":"A"}(r);(function(t){return f.apply(this,arguments)})(y).then(function(e){console.log("[Starmus] Instance",v,"-> Tier",e),u("TIER_ASSIGN",{instanceId:v,severity:"info",message:"Tier "+e+" assigned",data:{tier:e}});var a=n({instanceId:v,env:r,tier:e});a.getState().tier||a.dispatch({type:"starmus/tier-ready",payload:{tier:e}});var c={step1:p.querySelector(".starmus-step-1"),step2:p.querySelector(".starmus-step-2"),continueBtn:p.querySelector('[data-starmus-action="continue"]'),messageBox:p.querySelector("[data-starmus-message-box]"),setupMicBtn:p.querySelector('[data-starmus-action="setup-mic"]'),recordBtn:p.querySelector('[data-starmus-action="record"]'),pauseBtn:p.querySelector('[data-starmus-action="pause"]'),resumeBtn:p.querySelector('[data-starmus-action="resume"]'),stopBtn:p.querySelector('[data-starmus-action="stop"]'),submitBtn:p.querySelector('[data-starmus-action="submit"]'),resetBtn:p.querySelector('[data-starmus-action="reset"]'),fileInput:p.querySelector('input[type="file"]'),statusEl:p.querySelector("[data-starmus-status]"),progressEl:p.querySelector("[data-starmus-progress]"),progressWrap:p.querySelector(".starmus-progress-wrap"),recorderContainer:p.querySelector("[data-starmus-recorder-container]"),fallbackContainer:p.querySelector("[data-starmus-fallback-container]")};i(a,c),o(a,v,r),"C"!==e&&l()?"function"==typeof t.initRecorder?t.initRecorder(a,v):(console.error("[Starmus] initRecorder function not available"),a.dispatch({type:"starmus/error",payload:{message:"Recorder init failed",retryable:!1}})):(c.recorderContainer&&(c.recorderContainer.style.display="none"),c.fallbackContainer&&(c.fallbackContainer.style.display="block"),a.dispatch({type:"starmus/tier-ready",payload:{tier:"C",fallbackActive:!0}})),d[v]={store:a,form:p,elements:c,tier:e}})}else console.error("[Starmus] Dependencies not available - cannot initialize")}function v(t){var r=t.detail||{},e=document.querySelectorAll('form[data-starmus="recorder"]');if(e&&0!==e.length)for(var n=0;n<e.length;n++)p(r,e[n])}function y(){var r=function(){try{return navigator.connection||navigator.mozConnection||navigator.webkitConnection||null}catch(t){return null}}()||{},e={browser:{userAgent:navigator.userAgent},device:{type:/mobile|android|iphone|ipad/i.test(navigator.userAgent)?"mobile":"desktop",memory:c(),concurrency:s()},capabilities:{webrtc:!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia),mediaRecorder:!!t.MediaRecorder,indexedDB:!!t.indexedDB},network:{effectiveType:r.effectiveType||"unknown",downlink:r.downlink||null,saveData:r.saveData||!1}};u("E_ENV_FALLBACK_INIT",{severity:"warning",message:"Fallback env used",data:{fallbackEnv:e}}),v({detail:e})}var m=!1,h=null;document.addEventListener("sparxstar:environment-ready",function(t){m=!0,h&&(clearTimeout(h),h=null),v(t)}),h=setTimeout(function(){m||(console.warn("[Starmus] environment-ready not fired; using fallback."),y())},2e3),t.Starmus.instances=d}("undefined"!=typeof window?window:globalThis),"undefined"!=typeof module&&module.exports&&(module.exports=global.Starmus),window.createStore=oa,window.initCore=Ks,window.initUI=Ls,window.initRecorder=hd,window.StarmusTus=Gc,window.StarmusTranscriptController=wd,window.StarmusOfflineQueue=gs,window.StarmusQueueSubmission=ws,window.initOffline=As,window.StarmusIntegrator=!0,window.StarmusRecorder=hd,window.initStarmusRecorder=hd,console.log("[Starmus] Runtime globals wired");export{wd as StarmusTranscript,Gc as StarmusTus,oa as createStore,gs as getOfflineQueue,Ks as initCore,As as initOffline,hd as initRecorder,Ls as initUI,ws as queueSubmission};
